---
title: Azure 安全中心内云本机计算的威胁检测 |Microsoft Docs
description: 本文介绍 Azure 安全中心提供的云本机计算警报。
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.assetid: 5aa5efcf-9f6f-4aa1-9f72-d651c6a7c9cd
ms.service: security-center
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/05/2019
ms.author: memildin
ms.openlocfilehash: 6b6acb0ae1452795fe02906779b920e4b41f9a55
ms.sourcegitcommit: 827248fa609243839aac3ff01ff40200c8c46966
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/07/2019
ms.locfileid: "73748387"
---
# <a name="threat-detection-for-cloud-native-computing-in-azure-security-center"></a>Azure 安全中心内云本机计算的威胁检测

作为本机解决方案，Azure 安全中心对于跨多个目标的攻击方法识别的内部日志具有独特的可见性。 本文介绍适用于以下 Azure 服务的警报：

* [Azure 应用服务](#app-services)
* [Azure 容器](#azure-containers) 

> [!NOTE]
> 这些服务当前在 Azure 政府版和主权云区域中不可用。

## Azure App Service<a name="app-services"></a>

安全中心使用云的规模来确定针对应用服务上运行的应用程序的攻击。 攻击者探查 web 应用程序以找出并利用弱点。 在将路由到特定环境之前，对在 Azure 中运行的应用程序的请求会经历多个网关，并在其中进行检查和记录。 然后，将使用此数据来识别攻击者和攻击者，并了解稍后将使用的新模式。

通过使用 Azure 作为云提供商的可见性，安全中心将分析应用服务内部日志，以确定多个目标的攻击方法。 例如，方法包含广泛的扫描和分布式攻击。 这种类型的攻击通常来自一小部分 Ip，并显示对多个主机上的类似终结点进行爬网的模式。 攻击会搜索易受攻击的页面或插件，不能从单个主机的角度来识别。

安全中心还可以访问基础沙箱和 Vm。 与内存取证一起，基础结构可以从一种新的攻击传播到客户计算机中的威胁，从而讲述这一案例。 因此，即使在 web 应用被利用后部署了安全中心，它也能够检测到正在进行的攻击。

> [!div class="mx-tableFixed"]

|警报|说明|
|---|---|
|**检测到可疑的 WordPress 主题调用**|应用服务活动日志表示应用服务资源上可能的代码注入活动。<br/> 此可疑活动类似于操作 WordPress 主题以支持服务器端代码执行的活动，后跟一个直接 web 请求来调用操作的主题文件。 此类活动可以是通过 WordPress 的攻击活动的一部分。|
|**检测到从异常 IP 地址连接到网页**|应用服务活动日志表示从以前从未连接到它的源地址到敏感网页的连接。 此连接可能表示有人正在尝试对你的 web 应用管理页面进行暴力攻击。 它也可能是使用新 IP 地址的合法用户的结果。|
|**在威胁智能中找到连接到 Azure App Service FTP 接口的 IP**|应用服务 FTP 日志分析检测到来自威胁情报源中找到的源地址的连接。 在此连接期间，用户访问了列出的页面。|
|**检测到 Web 指纹**|应用服务活动日志指出了应用服务资源上可能存在的 web 指纹活动。 <br/>此可疑活动与名为盲大象的工具相关联。 工具指纹 web 服务器并尝试检测已安装的应用程序及其版本。 攻击者通常使用此工具来探测 web 应用程序以查找漏洞。|
|**检测到可能易受到攻击的网页的可疑访问**|应用服务活动日志表明访问了看似敏感的网页。 <br/>此可疑活动源自其访问模式与 web 扫描程序类似的源地址。 这种活动通常与攻击者尝试扫描您的网络以尝试访问敏感或易受攻击的网页有关。|
|**上传文件夹中的 PHP 文件**|应用服务活动日志指示某些内容已访问上传文件夹中的可疑 PHP 页。 <br/>这种类型的文件夹通常不包含 PHP 文件。 存在这种类型的文件可能表示利用了任意文件上传漏洞的利用。|
|**尝试在 Windows 应用服务上运行 Linux 命令**|分析应用服务进程检测到尝试在 Windows 应用服务上运行 Linux 命令。 此操作已被 web 应用程序运行。 此行为在市场活动中经常出现，利用公共 web 应用程序中的漏洞。|
|**检测到可疑 PHP 执行**|计算机日志指示可疑 PHP 进程正在运行。 操作包含尝试使用 PHP 进程从命令行运行操作系统命令或 PHP 代码。 虽然这种行为是合法的，但在 web 应用程序中，这种行为可能表明恶意活动，例如尝试通过 web 外壳感染网站。|
|**从临时文件夹执行进程**|应用服务流程分析检测到从应用的临时文件夹执行进程。 尽管此行为很合理，但在 web 应用程序中，这种行为可能表明存在恶意活动。|
|**检测到尝试运行高特权命令**|分析应用服务进程检测到尝试运行需要高权限的命令。 命令在 web 应用程序上下文中运行。 尽管此行为很合理，但在 web 应用程序中，这种行为可能表明存在恶意活动。|

## Azure 容器<a name="azure-containers"></a>

安全中心为容器化环境提供实时威胁检测，并生成可疑活动的警报。 可以使用此信息快速补救安全问题，并提高容器的安全性。

我们检测到不同级别的威胁： 

* **主机级别**-安全中心的代理（在标准层上提供，有关详细信息，请参阅[定价](security-center-pricing.md)）监视 Linux 中的可疑活动。 对于源自节点或在其上运行的容器的可疑活动，代理会触发警报。 此类活动的示例包括 web shell 检测和与已知的可疑 IP 地址的连接。

    为了更深入地了解容器化环境的安全性，代理会监视容器特定的分析。 它将触发对在 Docker 容器中运行的事件（例如特权容器创建、可疑访问 API 服务器和安全外壳（SSH）服务器）的警报。

    >[!NOTE]
    > 如果选择不在主机上安装代理，则只会收到威胁检测权益和警报的子集。 你仍将收到与网络分析和恶意服务器通信相关的警报。

* 对于**AKS 群集级别**，会根据 Kubernetes 审核日志分析来监视威胁检测。 若要启用此**无代理**监视，请从 **& 设置**"页的" 定价 "中将" Kubernetes "选项添加到你的订阅（请参阅[定价](security-center-pricing.md)）。 若要在此级别生成警报，安全中心将使用 AKS 检索到的日志来监视 AKS 管理的服务。 此级别的事件示例包括公开的 Kubernetes 仪表板、创建高特权角色，以及创建敏感的装载。

    >[!NOTE]
    > 安全中心为在订阅设置上启用 Kubernetes 选项后发生的 Azure Kubernetes 服务操作和部署生成检测警报。 

另外，我们的安全研究人员的全球安全研究人员不断监视威胁的发展。 它们在发现时添加容器特定的警报和漏洞。


### <a name="aks-cluster-level-alerts"></a>AKS 群集级别警报

> [!div class="mx-tableFixed"]

|警报|说明|
|---|---|
|**预览-检测到群集-管理员角色的角色绑定**|Kubernetes 审核日志分析检测到群集管理角色的新绑定，导致管理员权限。 不必要地提供管理员权限可能会导致群集中的权限提升问题。|
|**检测到预览版的 Kubernetes 仪表板**|Kubernetes 审核日志分析检测到由 LoadBalancer 服务公开的 Kubernetes 仪表板。 公开的仪表板允许未经身份验证的群集管理访问，并带来安全威胁。|
|**预览-检测到新的高特权角色**|Kubernetes 审核日志分析检测到具有高权限的新角色。 与具有高权限的角色的绑定在群集中为用户/组提升的权限。 不必要地提供提升的权限可能会导致群集中的权限提升问题。|
|**预览-检测到 kube 命名空间中的新容器**|Kubernetes 审核日志分析检测到 kube 命名空间中的新容器，该容器不在通常在此命名空间中运行的容器中。 Kube 命名空间不应包含用户资源。 攻击者可以使用此命名空间隐藏恶意组件。|
|**预览-检测到数字货币挖掘容器**|Kubernetes 审核日志分析检测到一个容器具有与数字货币挖掘工具关联的图像。|
|**预览-检测到特权容器**|Kubernetes 审核日志分析检测到新的特权容器。 特权容器可以访问节点的资源，并打破容器之间的隔离。 如果受到侵害，攻击者可以使用特权容器获取对节点的访问权限。|
|**预览-检测到敏感卷装载的容器**|Kubernetes 审核日志分析检测到具有敏感卷装入的新容器。 检测到的卷是将敏感文件或文件夹从节点装入容器的 hostPath 类型。 如果容器被泄露，则攻击者可以使用此装载获取对节点的访问权限。|



### <a name="host-level-alerts"></a>主机级别警报

> [!div class="mx-tableFixed"]

|警报|说明|
|---|---|
|**检测到特权容器**|计算机日志指示特权 Docker 容器正在运行。 特权容器对宿主的资源具有完全访问权限。 如果受到侵害，攻击者可以使用特权容器获取对主机的访问权限。|
|**特权命令在容器中运行**|计算机日志指示已在 Docker 容器中运行特权命令。 特权命令具有主机上的扩展权限。|
|**检测到暴露的 Docker 守护程序**|计算机日志指示 Docker 守护程序（dockerd.exe）公开 TCP 套接字。 默认情况下，启用 TCP 套接字后，Docker 配置不使用加密或身份验证。 可以访问相关端口的任何人均可获取对 Docker 守护程序的完全访问权限。|
|**SSH 服务器在容器中运行**|计算机日志表示 SSH 服务器在 Docker 容器中运行。 尽管此行为是有意的，但它通常表示容器配置不正确或被破坏。|
|**检测到挖掘器映像的容器**|计算机日志表示执行运行与数字货币挖掘关联的映像的 Docker 容器。 此行为可能表示资源被滥用。|
|**Kubernetes API 的可疑请求**|计算机日志表示对 Kubernetes API 发出了可疑的请求。 请求是从 Kubernetes 节点发送的，该节点可能来自节点中运行的某个容器。 尽管此行为是有意的，但它可能指示节点正在运行已泄露的容器。|
|**向 Kubernetes 仪表板发出可疑请求**|计算机日志指示对 Kubernetes 仪表板发出了可疑的请求。 请求是从 Kubernetes 节点发送的，该节点可能来自节点中运行的某个容器。 尽管此行为是有意的，但它可能指示节点正在运行已泄露的容器。|