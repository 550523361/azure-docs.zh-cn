---
title: 在 Azure 开发人员测试实验室中使用声明功能 |微软文档
description: 了解使用 Azure DevTest 实验室的声明/取消声明功能的不同方案
services: devtest-lab
documentationcenter: na
author: spelluru
manager: ''
editor: ''
ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2019
ms.author: spelluru
ms.openlocfilehash: a15148260bccadc59966c86031100f0e0332b0f9
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/27/2020
ms.locfileid: "67861425"
---
# <a name="use-claim-capabilities-in-azure-devtest-labs"></a>在 Azure 开发人员测试实验室中使用声明功能
Azure 开发人员测试实验室服务提高了开发人员和测试人员的效率和效率。 本文重点介绍在 Azure DevTest 实验室中声明或取消声明虚拟机的能力。 它还列出了此功能改善用户体验的各种方法。 在查看可能使用此功能的不同方案之前，让我们先看一下**声明**是什么，以及它是如何工作的。

## <a name="claimable-machines"></a>可索赔机器
可声明计算机是在没有所有者的实验室中创建的虚拟机 （VM）。 声明计算机后，用户拥有该 VM 的全部选项。 当用户声明计算机时，会进行一些更改。 VM 将从 **"可声明虚拟机**"列表移动到 Azure 门户中的 **"我的虚拟机**"列表。 

用户可以连接到 VM、自定义项目、重新启动、停止或取消声明计算机。 有几种方法可以使 VM 可声明：

- 创建一台计算机并取消声明，以便它移动到可声明池。 
- 创建 VM 并使用[高级设置](https://azure.microsoft.com/updates/azure-devtest-labs-claim-lab-vms-from-a-shared-pool/)放置在共享池中。

有两种情况可以有效地使用索赔/取消索赔功能。 第一种情况需要更多的预先思考和规划，才能正确设计和执行。 第二个更了解情况。 以下是不同案例的一些示例。

## <a name="designed-use-of-claimable-machines"></a>设计使用可索赔机器

- **软件开发/测试：** 允许开发人员或测试人员通过准备好配置的计算机并处于无人认领的状态来提高工作效率。 拥有一组具有不同配置、必要工具和最新代码的 VM，允许用户声明 VM 并开始工作，而无需花时间设置计算机。 在声明 VM 之前，已预配计算机，但正在关闭，从而最大程度地降低使用频率较低的计算机的成本。 当需要 VM 时，用户只需声明启动计算机的 VM。 在这种情况下，取消索赔选项没有用到，因为创建新的 VM 通常更容易且更便宜。
- **教室/实验室：** 为班级或实验室预配置 VM，以便学生可以使用 Azure 门户立即连接到计算机。  一旦学生声称使用 VM，实验室将确保任何人都不能要求使用同一台计算机。 自动化此过程可确保具有指定环境所需的计算机数量可用。 如果学生没有出现或运行晚，则无人认领的计算机可以保持可用，直到会话以最低的成本结束。 取消声明选项在此方案中不太有效，因为当执行前一个用户时，VM 处于未知状态。
- **演示：** 使用机器进行演示，其中实验室中的机器设置与特定环境。 当多个人员可能同时或随机进行演示时（如在会议中），此功能非常有用。 在此情况下，取消声明选项可能很有用，因为演示不应更改计算机的状态，允许用户将 VM 返回到可声明池进行下一次演示。 由于无人认领的计算机被取消预配并产生最低成本，VM 可能会留在实验室中更长时间。
- **临时工/合同工：** 允许用户使用计算机。 离开时，他们会将 VM 返回到可声明池，而不会丢失数据。 在无人认领的 VM 时，其他用户可以声明 VM 并继续或查看计算机以获取其他信息。
- **一般：** 在许多不同的情况下，能够让唯一源在特定节奏下自动配置和部署 VM 是很有用的。 有几个不同的情况，索赔/索赔功能通过具有自动化过程来使用集配置在无人认领状态构建 VM，从而帮助用户提高效率。 根据您的需要，配置可能包括不同的操作系统、语言、磁盘[或其他软件（工件）。](devtest-lab-artifact-author.md) 从实验室声明 VM 的能力使实验室用户无需花费时间和精力来配置计算机即可获得正确配置的系统。 实验室经理可以使用 VM 声明的状态来改进生成的计算机数量、清理计算机并确定配置优先级。 [Image 工厂](image-factory-create.md)是为多个实验室构建 VM 和映像的自动化过程的一个很好的例子。 可以修改脚本以执行具有相应更改的以下任何情况，或用作创建自定义系统的参考。

## <a name="situational-use-of-claimable-machines"></a>可索赔机器的情况使用

- 使用声明/取消声明功能，允许用户将计算机的控制权从一台传递到另一台，并且不必明确知道接下来谁将拾取计算机。
- 开发、测试和调试特定计算机配置可以重现 Bug 的方案，然后计算机可以无人认领，允许其他开发人员声明计算机并继续工作。 此功能特别有用，因为越来越多的人在世界不同地区远程工作。 
- 团队成员可以使用单个环境。 例如，您可以手动设置无法自动实现的复杂环境，或者创建只能处理单个输入（如图像）修改的资源。 过去，这个问题是通过启动和运行专用机器来解决的。 可声明功能通过内置用户访问控制和可视化标识（如果可用）对手动过程进行了改进。 无人认领时，将取消配置 VM 以降低成本。
- 具有附加到 VM 的数据磁盘。 每个磁盘最多为 ±1 TB 的数据允许传递大量数据，而无需复制或复制数据。 VM 最初将使用具有大量数据的附加磁盘创建。  然后，任何用户都可以声明计算机并访问数据。 完成后，取消声明 VM 以允许其他用户访问计算机。

使用可声明的机器有一些注意事项，最常见的是获得对机器的访问。 如果计算机已加入域，则声称计算机的用户将需要已被授予访问权限，通常是通过在创建 VM 时授予包含实验室中所有用户的组的权限来完成。 如果计算机未加入域，则需要运行公共存储库中的**重置 VM 密码**项目以添加用户为管理员。  即使在机器启动或声明后，也可以应用工件。

## <a name="next-steps"></a>后续步骤
请参阅以下文章：[在 Azure 开发人员测试实验室中创建和管理可声明 VM](devtest-lab-add-claimable-vm.md)
