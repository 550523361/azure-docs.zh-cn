---
title: Azure 服务总线资源管理器异常 |微软文档
description: Azure 资源管理器显示的服务总线异常列表和建议的操作。
services: service-bus-messaging
documentationcenter: na
author: axisc
manager: darosa
editor: spelluru
ms.assetid: 3d8526fe-6e47-4119-9f3e-c56d916a98f9
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/26/2019
ms.author: aschhab
ms.openlocfilehash: 0f328651ac4422226071d2de12e9cbc787ef64be
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/27/2020
ms.locfileid: "75978277"
---
# <a name="service-bus-resource-manager-exceptions"></a>服务总线资源管理器例外

本文列出了使用 Azure 资源管理器与 Azure 服务总线交互时生成的异常 - 通过模板或直接调用。

> [!IMPORTANT]
> 本文档经常更新。 请回头查看是否有更新。

以下是通过 Azure 资源管理器显示的各种异常/错误。

## <a name="error-bad-request"></a>错误：错误请求

"错误请求"表示资源管理器收到的请求验证失败。

| 错误代码 | 错误子代码 | 错误消息 | 描述 | 建议 |
| ---------- | ------------- | ------------- | ----------- | -------------- |
| 错误的请求 | 40000 | 子代码=40000。 创建队列时无法设置属性 *"属性名称"，* 因为命名空间 *"命名空间名称"* 使用"基本"层。 此操作仅在"标准"或"高级"层中支持。 | 在 Azure 服务总线基本层上，无法设置或更新以下属性 - <ul> <li> RequiresDuplicateDetection </li> <li> AutoDeleteOnIdle </li> <li>RequiresSession</li> <li>DefaultMessageTimeToLive </li> <li> DuplicateDetectionHistoryTimeWindow </li> <li> 启用Express </li> <li> ForwardTo </li> <li> 主题 </li> </ul> | 请考虑从"基本"层升级到标准层或高级层以使用此功能。 |
| 错误的请求 | 40000 | 子代码=40000。 无法更改现有队列（或主题）的"需要重复检测"属性的值。 | 在创建实体时，必须启用/禁用重复检测。 创建后无法更改重复的检测配置参数。 | 要对以前创建的队列/主题启用重复检测，可以创建具有重复检测的新队列/主题，然后从原始队列转发到新的队列/主题。 |
| 错误的请求 | 40000 | 子代码=40000。 指定的值 16384 无效。 属性"MaxSizeInMegaPB"必须是以下值之一：1024;2048;3072;4096;5120。 | MaxSizeInMegaPB 值无效。 | 确保 MaxSizeInMega PB 是以下之一 - 1024、2048、3072、4096、5120。 |
| 错误的请求 | 40000 | 子代码=40000。 无法更改队列/主题的分区。 | 无法更改实体的分区。 | 创建新实体（队列或主题）并启用分区。 | 
| 错误的请求 | none | 命名*空间"命名空间名称"* 不存在。 | 命名空间在 Azure 订阅中不存在。 | 要解决此错误，请尝试以下操作 <ul> <li> 确保 Azure 订阅正确。 </li> <li> 确保命名空间存在。 </li> <li> 验证命名空间名称是否正确（没有拼写错误或空字符串）。 </li> </ul> | 
| 错误的请求 | 40400 | 子代码=40400。 自动转发目标实体不存在。 | 自动转发目标实体的目标不存在。 | 在创建源之前，目标实体（队列或主题）必须存在。 创建目标实体后重试。 |
| 错误的请求 | 40000 | 子代码=40000。 提供的锁定时间超过允许的最大"5"分钟。 | 可以锁定邮件的时间必须在 1 分钟（最小）和 5 分钟（最大值）之间。 | 确保提供的锁定期介于 1 分钟到 5 分钟之间。 |
| 错误的请求 | 40000 | 子代码=40000。 无法同时启用延迟持久性和"重复检测"属性。 | 启用重复检测的实体必须是持久性的，因此不能延迟持久性。 | 了解有关[重复检测](duplicate-detection.md)的更多 |
| 错误的请求 | 40000 | 子代码=40000。 无法更改现有队列的"需要会话"属性的值。 | 应在创建实体时启用对会话的支持。 创建后，您不能启用/禁用现有实体（队列或订阅）上的会话 | 删除并重新创建启用"需要会话"属性的新队列（或订阅）。 |
| 错误的请求 | 40000 | 子代码=40000。 "URI_PATH"包含服务总线不允许的字符。 实体段只能包含字母、数字、句点（.）、连字符（-）和下划线（*）。 | 实体段只能包含字母、数字、句点（.）、连字符（-）和下划线（*）。 任何其他字符都会导致请求失败。 | 确保 URI 路径中没有无效字符。 |


## <a name="error-code-429"></a>错误代码： 429

就像在 HTTP 中，"错误代码 429"表示"请求太多"。 这意味着由于该资源上的请求太多（或由于操作冲突），特定资源（命名空间）正在被限制。

| 错误代码 | 错误子代码 | 错误消息 | 描述 | 建议 |
| ---------- | ------------- | ------------- | ----------- | -------------- |
| 429 | 50004 | 子代码=50004。 请求已终止，因为*命名空间*的命名空间被限制。 | 当传入请求数超过资源限制时，将处理此错误条件。 | 请等待几秒钟，然后重试。 <br/> <br/> 了解有关[配额](service-bus-quotas.md)和 Azure[资源管理器请求限制的更多信息](../azure-resource-manager/management/request-limits-and-throttling.md)|
| 429 | 40901 | 子代码=40901。 另一个冲突操作正在进行中。 | 同一资源/实体上正在进行另一个冲突操作 | 等待当前正在进行的操作完成，然后再重试。 |
| 429 | 40900 | 子代码=40900。 冲突。 在资源的当前状态下不允许所请求的操作。 | 当发出多个请求同时对同一实体（队列、主题、订阅或规则）执行操作时，可能会收到此情况。 | 等待几秒钟，然后重试 |
| 429 | 40901 | 实体 *"实体名称"* 请求与另一个请求冲突 | 同一资源/实体上正在进行另一个冲突操作 | 等待上一个操作完成，然后再重试 |
| 429 | 40901 | 实体 *"实体名称"* 正在进行另一个更新请求。 | 同一资源/实体上正在进行另一个冲突操作 | 等待上一个操作完成，然后再重试 |
| 429 | none | 发生了资源冲突。 另一个冲突操作可能正在进行。 如果这是失败操作的重试，则后台清理仍然挂起。 请稍后再试。 | 当对同一实体执行挂起的操作时，可能会攻击此情况。 | 等待上一个操作完成，然后再重试。 |


## <a name="error-code-not-found"></a>错误代码：未找到

此类错误表示未找到资源。

| 错误代码 | 错误子代码 | 错误消息 | 描述 | 建议 |
| ---------- | ------------- | ------------- | ----------- | -------------- |
| 未找到 | none | 未找到*实体"实体名称"。* | 未找到要操作的实体。 | 检查实体是否存在，然后重试该操作。 |
| 未找到 | none | 找不到该加密提供程序。 操作不存在。 | 您尝试执行的操作不存在。 | 请检查操作，然后重试。 |
| 未找到 | none | 传入请求不被识别为命名空间策略放置请求。 | 传入请求正文为空，因此不能作为 put 请求执行。 | 请检查请求正文以确保它不是 null。 | 
| 未找到 | none | 找不到消息实体 *"实体名称"。* | 找不到您尝试执行操作的实体。 | 请检查实体是否存在，然后重试该操作。 |

## <a name="error-code-internal-server-error"></a>错误代码：内部服务器错误

此类错误表示存在内部服务器错误

| 错误代码 | 错误子代码 | 错误消息 | 描述 | 建议 |
| ---------- | ------------- | ------------- | ----------- | -------------- |
| 内部服务器错误 | 50000 | 子代码=50000。 内部服务器错误| 可能由于各种原因发生。 有些症状是 - <ul> <li> 客户端请求/正文已损坏并导致错误。 </li> <li> 由于服务上的处理问题，客户端请求超时。 </li> </ul> | 要解决此问题 <ul> <li> 确保请求参数不是 null 或格式不正确。 </li> <li> 重试请求。 </li> </ul> |

## <a name="error-code-unauthorized"></a>错误代码：未经授权

此类错误表示没有运行命令的授权。

| 错误代码 | 错误子代码 | 错误消息 | 描述 | 建议 |
| ---------- | ------------- | ------------- | ----------- | -------------- |
| 未授权 | none | 辅助命名空间上的无效操作。 辅助命名空间是只读的。 | 对辅助命名空间执行操作，该命名空间设置为只读命名空间。 | 根据主命名空间重试命令。 了解有关[辅助命名空间](service-bus-geo-dr.md)的更多 |
| 未授权 | none | 缺少令牌：未找到授权标头。 | 当授权具有空值或不正确的值时，将发生此错误。 | 确保授权标头中提到的令牌值正确且不为空。 |