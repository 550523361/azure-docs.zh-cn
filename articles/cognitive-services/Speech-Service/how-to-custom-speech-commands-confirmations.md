---
title: 在自定义命令中添加确认预览应用语音服务
titleSuffix: Azure Cognitive Services
description: 了解如何在自定义命令预览应用中将确认添加到命令。
services: cognitive-services
author: encorona-ms
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 12/05/2019
ms.author: encorona
ms.openlocfilehash: 1cb0624012b22b6cae2c98bfa6ddc9495e09615d
ms.sourcegitcommit: 69156ae3c1e22cc570dda7f7234145c8226cc162
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/03/2020
ms.locfileid: "84310462"
---
# <a name="add-confirmations-to-a-command-in-a-custom-commands-preview-application"></a>将确认添加到自定义命令预览应用程序中的命令

本文介绍如何在自定义命令预览应用程序中创建命令确认。

## <a name="prerequisites"></a>先决条件

完成以下文章中的步骤：
> [!div class="checklist"]
> * [快速入门：创建自定义命令预览应用](./quickstart-custom-speech-commands-create-new.md)
> * [快速入门：使用参数创建自定义命令预览应用](./quickstart-custom-speech-commands-create-parameters.md)

## <a name="create-a-setalarm-command"></a>创建 SetAlarm 命令

若要演示确认，请创建一个设置警报的新命令。

1. 在[Speech Studio](https://speech.microsoft.com/)中，打开您创建的自定义命令预览应用程序。
1. 创建新的**SetAlarm**命令。
1. 添加具有以下配置的**DateTime**参数：

   | 设置                           | 建议的值                     |  描述                 |
   | --------------------------------- | -----------------------------------------------------| ------------|
   | **名称**                              | **DateTime**                                | 参数的描述性名称                                |
   | **必需**                          | 已选中                                 | 一个复选框，该复选框指示在完成命令之前是否需要此参数的值 |
   | **响应所需的参数**   | **简单编辑器-> 什么时间？**                              | 在未知情况下询问此参数值的提示 |
   | **类型**                              | **DateTime**                                | 参数的类型，如 Number、String、DateTime 或 Geography   |
   | **日期默认值**                     | 如果缺少日期，则使用当天的日期            | 用户未提供时要使用的变量的默认值  |  
   | **时间默认值**                     | 如果缺少该时间，则使用 "日开始"     |  用户未提供时要使用的变量的默认值|

1. 添加一些示例句子。
   
    ```
    set an alarm for {DateTime}
    set alarm {DateTime}
    alarm for {DateTime}
   ```

1. 添加完成规则以确认结果。 使用以下配置：

   | 设置    | 建议的值                               |描述                                     |
   | ---------- | ------------------------------------------------------- |-----|
   | **规则名称**  | **设置警报**                                               |    描述规则用途的名称 |
   | **操作**    | **发送语音响应-> 正常，为 {DateTime} 设置警报**    |规则条件为 true 时要执行的操作

## <a name="try-it-out"></a>试试看

1. 选择右窗格顶部的 "**定型**"。

1. 完成训练后，选择 "**测试**"，然后尝试以下交互：
    - 输入：为明天中午设置警报
    - 输出：正常，为 2020-05-02 12:00:00 设置的警报
    - 输入：设置警报
    - 输出：什么时间？
    - 输入：下午
    - 输出：正常，为 2020-05-01 17:00:00 设置的警报

## <a name="add-interaction-rules-for-the-confirmation"></a>为确认添加交互规则

通过添加交互规则来创建确认。

1. 在**SetAlarm**命令中，选择中间窗格中的 "**添加**"，然后选择 "**交互规则**" "  >  **确认" 命令**。

    此规则要求用户确认警报的日期和时间。 使用以下设置：

   | 设置               | 建议的值                                                                  | 描述                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | **规则名称**             | **确认日期时间**                                                                | 描述规则用途的名称          |
   | **条件**            | **必需参数-> 日期时间**                                                    | 确定何时可以运行规则的条件    |   
   | **操作**               | **发送语音响应-> 是否确实要为 {DateTime} 设置警报？**     | 规则条件为 true 时要执行的操作 |
   | **一致**          | **需要用户确认**                                                 | 预期下一轮                      |
   | **执行后状态**  | **等待用户输入**                                                            | 转换后用户的状态                  |
  
      > [!div class="mx-imgBorder"]
      > ![创建所需的参数响应](media/custom-speech-commands/add-validation-set-temperature.png)

1. 为接受的确认添加交互规则（用户说 "是"）。 使用以下配置：

   | 设置               | 建议的值                                                                  | 描述                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | **规则名称**             | **接受的确认**                                                            | 描述规则用途的名称          |
   | **条件**            | **确认 & 必需参数 > 日期时间已成功**                      | 确定何时可以运行规则的条件    |   
   | **执行后状态** | **执行完成规则**                                                          | 转换后的用户状态                   |

1. 为拒绝的确认添加交互规则（用户说为 "否"）。 使用以下配置：

   | 设置               | 建议的值                                                                  | 描述                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | **规则名称**             | **拒绝的确认**                                                                   | 描述规则用途的名称          |
   | **条件**            | **已拒绝确认 & 必需参数-> DateTime**                               | 确定何时可以运行规则的条件    |   
   | **操作**               | **清除参数值-> 日期时间 & 发送语音响应 > 没有问题，该时间是多少？**  | 规则条件为 true 时要执行的操作 |
   | **执行后的状态** | **等待输入**                                                                   | 转换后的用户状态                   |
   | **一致**          | **应输入来自用户 > 日期时间的参数**                           | 预期下一轮                      |

## <a name="try-out-the-changes"></a>尝试更改

1. 选择“训练”。

1. 完成训练后，选择 "**测试**"，然后尝试这些交互：

    - 输入：为明天中午设置警报
    - 输出：是否确实要为 2020-05-02 12:00:00 设置警报？
    - 输入：否
    - 输出：没问题，那次什么时间？
    - 输入：下午
    - 输出： "是否确实要为 2020-05-01 17:00:00 设置警报？"
    - 输入：是
    - 输出：正常，为 2020-05-01 17:00:00 设置的警报

## <a name="next-steps"></a>后续步骤

> [!div class="nextstepaction"]
> [在自定义命令预览应用中添加对命令的单步更正](./how-to-custom-speech-commands-one-step-correction.md)
