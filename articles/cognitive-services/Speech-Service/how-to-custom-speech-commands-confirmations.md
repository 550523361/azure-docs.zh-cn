---
title: 如何：向自定义命令添加确认（预览）
titleSuffix: Azure Cognitive Services
description: 在本文中，如何实现自定义命令中命令的确认。
services: cognitive-services
author: encorona-ms
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 12/05/2019
ms.author: encorona
ms.openlocfilehash: afa197c83b4f66f12863de4185ef7763447f3ed9
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/28/2020
ms.locfileid: "75456494"
---
# <a name="how-to-add-a-confirmation-to-a-custom-command-preview"></a>如何：向自定义命令添加确认（预览）

在本文中，您将学习如何向命令添加确认。

## <a name="prerequisites"></a>先决条件

您必须已完成以下文章中的步骤：

- [快速入门：创建自定义命令（预览）](./quickstart-custom-speech-commands-create-new.md)
- [快速入门：使用参数创建自定义命令（预览）](./quickstart-custom-speech-commands-create-parameters.md)

## <a name="create-a-setalarm-command"></a>创建设置警报命令

为了演示验证，让我们创建一个新命令，允许用户设置警报。

1. 在[语音工作室](https://speech.microsoft.com/)中打开以前创建的自定义命令应用程序
1. 创建新的命令**集警报**
1. 添加名为 DateTime 的参数

   | 设置           | 建议的值                                          | 描述                                                                                      |
   | ----------------- | ---------------------------------------------------------| ------------------------------------------------------------------------------------------------ |
   | “属性”              | DateTime                                                 | 命令参数的描述性名称                                                    |
   | 必选          | true                                                     | 选中复选框，指示在完成命令之前是否需要此参数的值 |
   | 响应模板 | "-什么时间？                                           | 提示在不知道此参数时请求该参数的值                              |
   | 类型              | DateTime                                                 | 参数的类型，如数字、字符串或日期时间                                      |
   | 日期 默认值     | 如果日期今天缺少使用                             |                                                                                                  |
   | 时间默认值     | 如果时间缺少使用，则从一天开始                      |                                                                                                  | 

1. 添加一些示例句子
   
   ```
    set an alarm for {DateTime}
    set alarm {DateTime}
    alarm for {DateTime}
   ```

1. 添加完成规则以确认结果

   | 设置    | 建议的值                                         | 描述                                        |
   | ---------- | ------------------------------------------------------- | -------------------------------------------------- |
   | 规则名称  | 设置闹钟                                               | 描述规则目的的名称          |
   | 操作    | 语音响应 - "-确定，为 [DateTime]设置警报"       | 规则条件为 true 时要执行的操作 |

## <a name="try-it-out"></a>试用

选择"测试"面板并尝试一些交互。

- 输入：为明天中午设置闹钟
- 输出："好的，2019年6月12日12：00：00的报警设置"

- 输入：设置报警
- 输出："什么时间？
- 输入：下午 5 点
- 输出："好的，闹钟设置为 12/05/2019 17：00：00"

## <a name="add-the-advanced-rules-for-confirmation"></a>添加确认的高级规则

1. 添加高级规则进行确认。 

    此规则将要求用户确认警报的日期和时间，并期待下一个回合的确认（是/否）。

   | 设置               | 建议的值                                                                  | 描述                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | 规则名称             | 确认日期时间                                                                | 描述规则目的的名称          |
   | 条件            | 所需参数 - 日期时间                                                    | 确定规则何时可以运行的条件    |   
   | 操作               | 语音响应 - "-是否确实要为 [DateTime]设置闹钟？"       | 规则条件为 true 时要执行的操作 |
   | 执行后的状态 | 等待输入                                                                   | 转弯后用户的状态                  |
   | 期望          | 确认                                                                     | 对下一轮的预期                      |

1. 添加高级规则以处理成功的确认（用户说是）

   | 设置               | 建议的值                                                                  | 描述                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | 规则名称             | 已接受确认                                                            | 描述规则目的的名称          |
   | 条件            | 成功确认&所需参数 - 日期时间                           | 确定规则何时可以运行的条件    |   
   | 执行后的状态 | 准备完成                                                             | 转弯后用户的状态                   |

1. 添加高级规则以处理拒绝确认（用户说"否"）

   | 设置               | 建议的值                                                                  | 描述                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | 规则名称             | 拒绝确认                                                                   | 描述规则目的的名称          |
   | 条件            | 拒绝确认&必需参数 - 日期时间                               | 确定规则何时可以运行的条件    |   
   | 操作               | 清除参数 - 语音响应&日期时间 - "-没问题，什么时候？     | 规则条件为 true 时要执行的操作 |
   | 执行后的状态 | 等待输入                                                                   | 转弯后用户的状态                   |
   | 期望          | 引引参数 - 日期时间                                                      | 对下一轮的预期                      |

## <a name="try-it-out"></a>试用

选择"测试"面板并尝试一些交互。

- 输入：为明天中午设置闹钟
- 输出："是否确实要为 2019 年 7 月 12 日 12：00：00 设置闹钟？"
- 输入： 否
- 输出："没问题，什么时候？
- 输入：下午 5 点
- 输出："是否确实要为 2019 年 6 月 12 日 17：00：00 设置闹钟？"
- 输入： 是
- 输出："好的，闹钟设置为 12/06/2019 17：00：00"

## <a name="next-steps"></a>后续步骤

> [!div class="nextstepaction"]
> [如何：向自定义命令添加一步更正（预览）](./how-to-custom-speech-commands-one-step-correction.md)