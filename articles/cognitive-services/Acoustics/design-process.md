---
title: Project Acoustics 设计过程概述
titlesuffix: Azure Cognitive Services
description: 本文档介绍如何在 Project Acoustics 工作流的所有三个阶段中表达设计意图。
services: cognitive-services
author: kegodin
manager: cgronlun
ms.service: cognitive-services
ms.component: acoustics
ms.topic: conceptual
ms.date: 08/17/2018
ms.author: kegodin
ms.openlocfilehash: 46e2e276086f836ff881fde1db6462f6e7788e22
ms.sourcegitcommit: 7824e973908fa2edd37d666026dd7c03dc0bafd0
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/10/2018
ms.locfileid: "48901356"
---
# <a name="design-process-overview"></a>设计流程概述
可以在 Project Acoustics 工作流的以下三个阶段中表达设计意向：预先制作场景设置、声源放置和后期制作设计。 该过程需要更少的与放置混响音量相关的标记，同时保持设计器控制场景的音响效果。

## <a name="pre-bake-design"></a>预先制作设计
预先制作场景设置过程可生成用于声波模拟的场景和元数据，这包括选择要参与模拟的场景元素以提供声笼、反射和混响。 场景的元数据是针对每个场景元素所选的声学材料。 声学材料控制从每个表面反射回来的声音能量的大小。

所有表面的默认吸收系数均为 0.04，表示反射性很强。 通过优化整个场景中不同材料的吸收系数可实现美感和游戏效果，当侦听器听到从场景的某个区域转换到另一区域时，这种效果尤为突出。 例如，从黑暗的混响房间转换到明亮的非混响户外场景会增强转换的影响。 要实现此效果，请调高户外场景材料的吸收系数。

房间中给定材料的混响时间与其吸收系数成反比，并且大多数材料的吸收系数值介于 0.01 到 0.20 之间。 如果材料的吸收系数超出此范围，则其吸收性很强。

![混响时间关系图](media/ReverbTimeGraph.png)

[制作 UI 演练](bake-ui-walkthrough.md)详细介绍了预先制作控件。

## <a name="sound-source-placement"></a>声源放置
在运行时查看体素和探测点有助于调试陷入体素化几何体内的声源的问题。 要切换体素网格和探测点显示，请单击场景视图右上方的 Gizmos 菜单中的相应复选框。 如果声源位于墙壁体素内，请将其移动到空气体素。

![Gizmos 菜单](media/GizmosMenu.png)  

体素显示可以帮助确定游戏中的视觉对象组件是否已应用转换。 如果已应用，请将该转换也应用到承载音效管理器的 GameObject。

### <a name="voxel-size-discrepancies"></a>体素大小差异
你可能会注意到，用于演示哪个场景网格参与音效制作的体素大小在设计时和运行时视图中是不同的。 这种差异并不会影响所选模拟频率的质量/粒度，而是体素化场景的运行时使用的副产物。 在运行时，会“优化”模拟体素，以支持在源位置之间的内插。 这还使得声源的设计时定位更靠近场景网格，超出模拟体素大小允许的距离范围，因为体素内部的声源包含一个经过声学处理的网格，不会发出任何声音。

下面两张图显示了设计（前期制作）体素与运行时（后期制作）体素之间的差异，正如 Unity 插件显示的那样：

设计时体素：

![VoxelsDesignTime](media/VoxelsDesignTime.png)

运行时体素：

![VoxelsRuntime](media/VoxelsRuntime.png)

若要确定体素网格是否准确地表示体系结构/结构场景网格，应使用设计模式体素，而不是体素经优化的运行时可视化效果。

## <a name="post-bake-design"></a>后期制作设计
制作结果存储在 ACE 文件中，作为整个场景中所有源侦听器位置对的声笼和混响参数。 此物理上准确的结果可按原样用于项目，是设计的良好开端。 后期制作设计过程指定在运行时转换制作结果参数的规则。

### <a name="distance-based-attenuation"></a>基于距离的衰减
Microsoft Acoustics Unity 空间音响插件提供的音频 DSP 遵守内置于 Unity 编辑器的基于距离的按源衰减。 针对基于距离的衰减的控件位于“三维声音设置”下的声源“检查器”面板的“音频源”组件中：

![距离衰减](media/distanceattenuation.png)

音效在以播放器位置为中心的“模拟区域”框中执行计算。 如果声源离播放器较远，位于模拟区域之外，那么只有框内的几何图形会影响声音传播（如造成遮挡），当遮挡物在播放器附近时，此效果会相当好。 然而，如果播放器在开放空间内，但遮挡物靠近远处的声源，则声音会变得不真实。 在这种情况下，我们建议的解决方法是，确保声音衰减在 45 米左右（即播放机到框边缘的默认水平距离）下降到 0。

### <a name="tuning-scene-parameters"></a>优化场景参数
要调整所有源的参数，请单击 Uinty 的音频混音器中的声道条带，然后调整“音效混音器”效果的参数。

![混音器自定义](media/MixerParameters.png)

### <a name="tuning-source-parameters"></a>优化源参数
将 AcousticsAdjust 脚本附加到源可支持优化该源的参数。 要附加脚本，请单击“检查器”面板底部的“添加组件”，然后导航到“脚本”>“音效调节”。 该脚本有六个控件：

![AcousticsAdjust](media/AcousticsAdjust.png)

* 启用音效 - 控制是否对此源应用音效。 取消选中后，系统会使用 HRTF 空间化源，但没有音效，也就是说没有声障、声笼、动态混响参数（例如级别和衰减时间）。 系统仍然以固定的级别和衰减时间应用混响。
* 遮挡 - 将乘数应用到由音效系统计算出的遮挡 dB 级别。 如果此乘数大于 1，遮挡效果将被扩大，而小于 1 的值会使遮挡效果变得较细微，值 0 则会使遮挡失效。
* 传输 (dB) - 设置通过几何传输引起的衰减 (dB)。 将此滑块设置到其最低级别，以禁用传输。 音效围绕场景几何图形 (portaling) 在初始干涩音频到达时对其进行空间化。 传输提供一个额外的干涩到达，它在视线方向空间化。 请注意，针对源的距离衰减曲线同样适用。
* 湿度 (dB) - 在 dB 中，根据源的距离调整混响功率。 正值可增强声音混响效果，而负值则使声音更干涩。 单击曲线控件（绿线）以打开曲线编辑器。 通过左键单击来添加点并拖动这些点以形成所需的函数来修改曲线。 X 轴表示源距离，y 轴表示 dB 中的混响调整。 有关编辑曲线的更多详细信息，请参阅此 [Unity 手册](https://docs.unity3d.com/Manual/EditingCurves.html)。 若要将曲线重置回默认值，右键单击“湿度”并选择“重置”。
* 衰减时间刻度 - 调整衰减时间的倍数。 例如，如果制作结果指定衰减时间为 750 毫秒，但此值设置为 1.5，则应用于源的衰减时间将为 1,125 毫秒。
* 室外 - 音效系统对源上混响在室外音效估计的附加调整。 将此值设置为 1，将使源声音完全始终在室外发出，而设置为 -1，将使源声音在室内发出。

不同的源可能需要不同的设置，以实现特定美学或游戏效果。 例如，对话。 人耳更适应语音中的混响，而游戏中的对话通常需要明白易懂。 你无需制作画外音对话框即可解决这个问题，方法是：通过向下移动“湿度”，调整如下所述的“感知距离扭曲”参数，为一些通过墙壁传播的干涩音频增强添加一些“传输”，和/或从 1 中减少“遮挡”，以便让更多的声音通过门户到达。

将 AcousticsAdjustExperimental 脚本附加到源，可支持优化该源的其他实验性参数。 要附加脚本，请单击“检查器”面板底部的“添加组件”，然后导航到“脚本”>“音效调节试验”。 目前有一个实验性控件：

![AcousticsAdjustExperimental](media/AcousticsAdjustExperimental.png)

* 可感知距离扭曲 - 将指数型扭曲应用到用于计算干湿比率的距离。 音效系统将计算整个空间的湿度级别，后者会随距离平稳变化，并提供可感知的距离提示。大于 1 的扭曲值，通过增加与距离相关的混响级别来扩大这种效果，使声音“远距离”传播，而小于 1 的扭曲值使基于距离的混响变化更细微，使声音“近距离”传播。

