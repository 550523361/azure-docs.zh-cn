---
title: "Azure 堆栈基础结构备份服务参考 |Microsoft 文档"
description: "本文包含 Azure 堆栈基础结构备份服务的参考资料。"
services: azure-stack
documentationcenter: 
author: mattbriggs
manager: femila
editor: 
ms.assetid: D6EC0224-97EA-446C-BC95-A3D32F668E2C
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/15/2017
ms.author: mabrigg
ms.openlocfilehash: 4e6e0a52b2c55239e38757223f54e5e94dc98c42
ms.sourcegitcommit: 85012dbead7879f1f6c2965daa61302eb78bd366
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/02/2018
---
# <a name="infrastructure-backup-service-reference"></a>基础结构备份服务引用

## <a name="azure-backup-infrastructure"></a>Azure 备份的基础结构

*适用范围： Azure 堆栈集成系统和 Azure 堆栈开发工具包*

Azure 堆栈包含，前者构成门户中，Azure 资源管理器中，许多服务和基础结构管理体验。 Azure 堆栈的类似设备的管理体验重点介绍减少公开给解决方案的运算符的复杂性。

基础结构备份旨在内在化的备份的复杂性，并确保运算符可以还原基础结构服务的数据，专注于管理解决方案和维护用户 SLA。

将备份数据导出到外部共享要求以避免在相同系统上存储备份。 需要一个外部共享使管理员能够灵活地确定存储基于现有公司业务连续性/灾难恢复策略的数据的位置。 

### <a name="infrastructure-backup-components"></a>基础结构备份组件

基础结构备份包括以下组件：

 - **基础结构备份控制器**  
 基础结构备份控制器一起被实例化，并驻留在每个 Azure 堆栈云。
 - **备份资源提供程序**  
 备份资源提供程序 (备份 RP) 组成的用户界面和应用程序程序接口 (API) s 公开的 Azure 堆栈的基础结构的基本备份功能。

#### <a name="infrastructure-backup-controller"></a>基础结构备份控制器

基础结构备份控制器是 Service Fabric 服务获取实例化 Azure 堆栈云。 在区域级别和捕获特定于区域的数据的服务从 AD 中，CA，Azure 资源管理器中，创建备份资源 CRP、 SRP、 NRP、 KeyVault、 RBAC。 

### <a name="backup-resource-provider"></a>备份资源提供程序

备份资源提供程序提供 Azure 堆栈门户的基本配置和备份的资源的列表中的用户界面。 运算符可以在用户界面中执行以下操作：

 - 首次启用备份，通过提供的外部存储位置、 凭据和加密密钥
 - 查看已完成创建备份的资源和状态下创建的资源
 - 修改备份控制器放置备份数据的存储位置
 - 修改备份控制器用来访问外部存储位置的凭据
 - 修改加密密钥备份控制器用来加密备份 


## <a name="backup-controller-requirements"></a>备份控制器要求

本部分介绍基础结构备份的重要要求。 我们建议您 Azure 堆栈的实例，为启用备份，然后过程中会引用返回到它根据需要部署和后续操作之前请仔细查看信息。

要求包括：

  - **软件要求**– 介绍支持的存储位置和大小调整指南。 
  - **网络要求**– 介绍不同的存储位置的网络要求。  

### <a name="software-requirements"></a>软件要求

#### <a name="supported-storage-locations"></a>支持的存储位置

| 存储位置                                                                 | 详细信息                                                                                                                                                  |
|----------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|
| 在受信任的网络环境中的存储设备上托管的 SMB 文件共享 | 在其中部署 Azure 堆栈的同一数据中心或不同的数据中心中的 SMB 共享。 多个 Azure 堆栈实例可以使用相同的文件共享。 |
| 在 Azure 上的 SMB 文件共享                                                          | 目前不支持。                                                                                                                                 |
| 在 Azure 上的 blob 存储                                                            | 目前不支持。                                                                                                                                 |

#### <a name="supported-smb-versions"></a>支持的 SMB 版本

| SMB | 版本 |
|-----|---------|
| SMB | 3.x     |

#### <a name="storage-location-sizing"></a>存储位置大小调整 

基础结构备份控制器中，将备份按需的数据。 建议是备份至少两次的日期和保留最多七天的备份。 

| 环境缩放 | 备份的预计的大小 | 所需空间的总量 |
|-------------------|--------------------------|--------------------------------|
| 4-12 节点        | 10 GB                     | 140 GB                          |

### <a name="network-requirements"></a>网络要求
| 存储位置                                                                 | 详细信息                                                                                                                                                                                 |
|----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 在受信任的网络环境中的存储设备上托管的 SMB 文件共享 | 如果 Azure 堆栈实例位于带防火墙的环境，则需要使用端口 445。 基础结构备份控制器将通过端口 445 启动到 SMB 文件服务器的连接。 |
| 若要使用的文件服务器的 FQDN，该名称必须解析从 PEP             |                                                                                                                                                                                         |

> [!Note]  
> 不需要打开任何入站的端口。


## <a name="infrastructure-backup-limits"></a>基础结构备份限制

当你规划、 部署和运行您的 Microsoft Azure 堆栈实例，请考虑这些限制。 下表描述了这些限制。

### <a name="infrastructure-backup-limits"></a>基础结构备份限制
| 限制标识符                                                 | 限制        | 注释                                                                                                                                    |
|------------------------------------------------------------------|--------------|---------------------------------------------------------------------------------------------------------------------------------------------|
| 备份类型                                                      | 仅完整    | 基础结构备份控制器仅支持完整备份。 不支持增量备份。                                          |
| 计划的备份                                                | 仅限手动  | 备份控制器当前仅支持按需备份                                                                                 |
| 最大并发的备份作业                                   | 1            | 只有一个活动的备份作业都支持每个备份的控制器实例。                                                                  |
| 网络交换机配置                                     | 不在范围内 | 管理员必须备份的网络交换机配置使用 OEM 工具。 请参阅 Azure 堆栈由每个 OEM 供应商提供的文档。 |
| 硬件生命周期主机                                          | 不在范围内 | 管理员必须备份使用 OEM 工具的硬件生命周期主机。 请参阅 Azure 堆栈由每个 OEM 供应商提供的文档。      |
| 文件共享的最大数目                                    | 1            | 只有一个文件共享可以用于存储备份数据                                                                                        |
| 备份应用程序服务、 函数、 SQL、 mysql 资源提供程序数据 | 不在范围内 | 发布为部署和管理增值 RPs 由 Microsoft 创建的指南，请参阅。                                                  |
| 备份的第三方资源提供程序                              | 不在范围内 | 发布为部署和管理增值 RPs 创建由第三方供应商的指南，请参阅。                                          |

## <a name="next-steps"></a>后续步骤

 - 若要了解有关基础结构备份服务的详细信息，请参阅[基础结构备份服务的 Azure 堆栈的备份和数据恢复](azure-stack-backup-infrastructure-backup.md)。