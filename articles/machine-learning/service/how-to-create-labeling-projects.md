---
title: 获取数据标签
titleSuffix: Azure Machine Learning
description: 本文介绍如何创建和运行标记项目，以标记用于机器学习的数据。
author: lobrien
ms.author: laobri
ms.service: machine-learning
ms.topic: tutorial
ms.date: 11/04/2019
ms.openlocfilehash: 76f995901814c90ff9fd78585c98d56b3478e8b4
ms.sourcegitcommit: b2fb32ae73b12cf2d180e6e4ffffa13a31aa4c6f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/05/2019
ms.locfileid: "73612770"
---
# <a name="get-labels-for-data"></a>获取数据标签

在机器学习项目中，标记大量数据通常是一件很麻烦的事情。 具有计算机视觉组件的 ML 项目（如图像分类或对象检测）通常需要数千个图像和对应的标签。 
 
Azure 机器学习工作室提供了一个中心位置，用于创建、管理和监视标记项目。 标记项目有助于协调数据、标签和团队成员，使你能够更有效地管理标记任务。 当前支持的任务包括图像分类（多标签或多类）以及使用边界框的对象标识。

Azure 跟踪进度并维护未完成标记任务的队列。 标记人员不需要 Azure 帐户即可参与。 通过他们的 Microsoft 帐户 (MSA) 或 [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-whatis) 进行身份验证后，他们就可以在时间允许的情况下进行或多或少的标记操作。 他们可以使用键盘快捷方式分配和更改标签。 

你可以启动和停止项目，添加和删除人员和团队，以及监视进度。 可以使用 COCO 格式或 Azure ML 数据集导出已标记的数据。 

本文将介绍如何执行以下操作：

> [!div class="checklist"]
> * 创建一个项目
> * 指定项目的数据和结构
> * 管理团队和处理项目的人员
> * 运行和监视项目
> * 导出标签 

## <a name="prerequisites"></a>先决条件

* 要在本地文件中或已在 Azure 存储中标记的数据
* 要应用的标签集
* 标记说明
* Azure 订阅。 如果没有 Azure 订阅，请在开始之前创建一个免费帐户。 立即试用 [Azure 机器学习的免费版或付费版](https://aka.ms/AMLFree)
* Azure 机器学习工作区。 请参阅[创建 Azure 机器学习工作区](how-to-manage-workspace.md)。

## <a name="create-a-labeling-project"></a>创建标记项目

标记项目从 [Azure 机器学习工作室](https://ml.azure.com/)进行管理。 “标记项目”  页可用于管理项目、团队和人员。 一个项目分配有一个或多个团队，一个团队分配有一个或多个人员。 

如果你的数据已存储在 Azure blob 存储中，则应将其作为数据存储提供，然后再创建标记项目。 有关信息，请参阅[创建和注册数据存储](https://docs.microsoft.com/azure/machine-learning/service/how-to-access-data#create-and-register-datastores)。 

若要创建项目，请选择“添加项目”  。 为其指定一个适当的名称，然后选择“标记任务类型”  。 

![标记项目创建向导](media/how-to-create-labeling-projects/labeling-creation-wizard.png)

* 对于一组类中的一个或多个标签可应用于图像的项目，选择“图像分类多标签”   。 例如，狗的照片可能标记为“狗”和“白天”  
* 对于一组类中的单个类可应用于图像的项目，选择“图像分类多类”   。
* 对于任务是向图像中的对象分配类和指定围绕对象的边界框的项目，选择“对象标识(边界框)” 

准备好继续操作时，选择“下一步”  。

## <a name="specify-data-to-be-labeled"></a>指定要标记的数据

如果已创建包含数据的数据集，则可以从“选择现有数据集”  下拉列表中选择该数据集。 或者，选择“创建数据集”  以选择现有的 Azure 数据存储或上载本地文件。 

### <a name="create-a-dataset-from-an-azure-datastore"></a>从 Azure 数据存储创建数据集

尽管选择直接上载本地文件适合于许多用例，但 [Azure 存储资源管理器](https://azure.microsoft.com/features/storage-explorer/)在传输大量数据时更可靠、更快。 建议将 Azure 存储资源管理器作为移动文件的默认方式。

从已存储在 Azure blob 存储中的数据创建数据集：

1. 选择“创建数据集”和“从数据存储选择”  
1. 为数据集分配“名称” 
1. 必须选择“文件”作为“数据集类型”   
1. 选择数据存储 
1. 如果数据位于 blob 存储中的子文件夹中，请选择“浏览”以选择该路径  。 
    * 你还可以在路径后面追加 `/**`，以将所有文件包含在所选路径的子文件夹中
    * 使用 `**/*.*` 以包括当前容器和子文件夹中的所有数据
1. 提供数据集的说明
1. 选择“下一步”  
1. 确认详细信息。 可以选择“后退”  以修改设置，或选择“创建”  以创建数据集

### <a name="create-a-dataset-by-uploading-data"></a>通过上载数据来创建数据集

如果希望直接上载数据：

1. 选择“创建数据集”和“从本地文件选择”  
1. 为数据集分配“名称” 
1. 必须选择“文件”作为“数据集类型” 
1. 如果选择“高级设置”  ，则可以自定义数据的数据存储、容器和数据路径
1. 选择“浏览”  选择要上载的本地文件
1. 提供数据集的说明
1. 选择“下一步”  
1. 确认详细信息。 可以选择“后退”  以修改设置，或选择“创建”  以创建数据集

数据将上载到 Azure ML 工作区的默认 blob 存储 (`workspaceblobstore`)。

## <a name="specify-label-classes"></a>添加标签类

在“标签类”  页上，指定用于对数据进行分类的类集。 考虑一下这些类，因为标记人员的准确性和速度将受到可正确选择它们的难易程度的影响。 例如，对于植物或动物，使用字段代码或缩写科属可能比拼写出完整的科属和物种要好一些。 

使用 +  按钮添加新行，每行输入一个标签。 如果有 3 个或 4 个以上的标签（但少于 10 个），请考虑在其前面加上“1:”、“2:”等前缀，以便为使用数字键提高工作效率的标记人员提供一些指导。 

## <a name="describe-the-labeling-task"></a>描述标记任务

清楚地解释标记任务非常重要。 “标记说明”页允许链接到外部站点，获取向标记人员提供的说明  。 让说明面向任务并适合受众。 

* 他们将看到哪些标签，他们如何在它们之间进行选择？ 是否存在他们应引用的引用文本？
* 如果没有合适的标签，应该怎么办？ 
* 如果没有合适的多个标签，应该怎么办？
* 他们应当向标签应用什么置信度阈值？ 如果他们不确定，是否需要“最佳推测”？
* 他们应该如何处理部分封闭或重叠的相关对象？
* 如果某个相关对象被图像边缘剪裁，应该怎么办？
* 如果他们在提交图像后觉得其中有错误，应该怎么办？ 

对于边界框，其他重要问题包括：

* 如何为此任务定义边界框？ 它应该是完全位于对象内部、裁剪到尽可能接近其范围，还是可以接受一定的清空？ 
* 你希望标记人员向定义边界框应用何种程度的关注和一致性？

>[!Note]
> 请确保标记人员能够使用数字键 1-9 在前 9 个标签之间进行选择。 

## <a name="initialize-the-labeling-project"></a>初始化标记项目

初始化后，标记项目的某些方面是不可变的：不能更改任务类型或数据集。 你可以修改标签，并且可以更改任务说明的 URL。 请在创建项目之前仔细检查设置。 提交项目后，将返回“标记”  主页，这会将项目显示为“正在初始化”  。 此页面不自动刷新，因此，在经过一段时间后，手动刷新则会将项目显示为“已创建”  。 

## <a name="manage-teams-and-people"></a>管理团队和人员

标记项目将获取默认团队，并将你添加为默认成员。 每个标记项目都将获取一个新的默认团队，但可以在项目之间共享团队。 项目可能具有多个团队。 可以通过在“团队”  页上选择“添加团队”  来创建团队。 

人员在“人员”  页上进行管理。 可以添加和删除电子邮件地址上的人员。 每个标记人员都必须使用其 Microsoft 帐户或 Azure Active Directory（如果使用）进行身份验证。  

添加人员后，可以将其分配给一个或多个团队。 导航到“团队”  页，选择你感兴趣的特定团队，然后根据需要使用“分配人员”  或“删除人员”  。

如果你想要向团队中的每个人发送一封电子邮件，可以通过选择团队以打开“团队详细信息”  页来执行此操作。 在此页上，“电子邮件团队”  按钮将打开你的电子邮件编辑器，其中包含团队中所有人的地址。

## <a name="run-and-monitor-the-project"></a>运行和监视项目

项目初始化完成后，Azure 将开始运行项目。 如果在主“标记”  页上单击项目，将转到“项目详细信息”  。 “仪表板”  选项卡将显示标记任务的进度。 

在“数据”  选项卡上，可以查看数据集并查看已标记的数据。 如果发现数据标记不正确，可以“选择”  它，然后选择“拒绝”  ，这将删除标签，并将数据放回未标记队列中。 

在“团队”  选项卡上，可以向此项目分配或取消分配团队。 

如果要使项目脱机或联机，请选择“暂停”  /“开始”  按钮，这将切换项目的运行状态。

通过选择“标记数据”  ，可以直接从“项目详细信息”  页中标记数据。 只能在项目运行时标记数据。 

## <a name="export-the-labels"></a>导出标签

可以随时导出标签数据以进行机器学习试验。 可以采用 [COCO 格式](http://cocodataset.org/#format-data)或 Azure ML 数据集格式导出图像标签。 可在标记项目的“项目详细信息”页上找到“导出”按钮   。

COCO 文件是在 Azure ML 工作区的默认 blob 存储中创建的，该存储位于 export/coco  内的文件夹中。 可以在工作室的“数据集”  部分下访问导出的 Azure ML 数据集。 “数据集详细信息”页还提供了用于从 Python 访问标签的示例代码。

![导出的数据集](media/how-to-create-labeling-projects/exported-dataset.png)

## <a name="next-steps"></a>后续步骤

* 标记图像以进行[图像分类或对象检测](how-to-label-images.md)
* 详细了解 [Azure 机器学习和工作室](../compare-azure-ml-to-studio-classic.md)