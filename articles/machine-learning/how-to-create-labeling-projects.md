---
title: 创建数据标记项目
titleSuffix: Azure Machine Learning
description: 了解如何创建和运行标记项目，以标记用于机器学习的数据。
author: lobrien
ms.author: laobri
ms.service: machine-learning
ms.topic: tutorial
ms.date: 11/04/2019
ms.openlocfilehash: 864cccc4629140754a326823cbaebd7ad8933d3d
ms.sourcegitcommit: aee08b05a4e72b192a6e62a8fb581a7b08b9c02a
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/09/2020
ms.locfileid: "75765063"
---
# <a name="create-a-data-labeling-project-and-export-labels"></a>创建数据标记项目并导出标签 

在机器学习项目中标记大量的数据通常让人感到头疼。 包含计算机视觉组件的项目（例如图像分类或对象检测）通常需要为数千个图像提供标签。
 
[Azure 机器学习](https://ml.azure.com/)提供一个中心位置用于创建、管理和监视标记项目。 使用机器学习可以协调数据、标签和团队成员，以有效地管理标记任务。 机器学习支持多标签或多类图像分类，以及带边界框的对象标识。

机器学习可跟踪进度，并维护未完成标记任务的队列。 标记程序不需要 Azure 帐户即可参与此过程。 在他们使用你的 Microsoft 帐户或 [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-whatis) 完成身份验证后，他们就可以根据可用的时间执行或多或少的标记操作。

在机器学习中，可以启动和停止项目，添加和删除人员与团队，以及监视进度。 可以使用 COCO 格式导出已标记的数据，或将其导出为 Azure 机器学习数据集。

> [!Important]
> 目前仅支持图像分类和对象识别标记项目。 此外，数据图像必须在 Azure Blob 数据存储中提供。 （如果没有现有的数据存储，可以在创建项目过程中上传图像。） 

本文将指导如何进行以下操作：

> [!div class="checklist"]
> * 创建一个项目
> * 指定项目的数据和结构
> * 管理处理项目的团队和人员
> * 运行和监视项目
> * 导出标签


## <a name="prerequisites"></a>必备条件

* 本地文件或 Azure 存储中要标记的数据。
* 要应用的一组标签。
* 标记说明。
* Azure 订阅。 如果还没有 Azure 订阅，可以在开始前创建一个[免费帐户](https://aka.ms/AMLFree)。
* 机器学习工作区。 请参阅[创建 Azure 机器学习工作区](how-to-manage-workspace.md)。

## <a name="create-a-labeling-project"></a>创建标记项目

标记项目是通过 Azure 机器学习管理的。 可以使用“标记项目”页来管理项目和人员。  一个项目分配有一个或多个团队，一个团队分配有一个或多个人员。

如果数据已在 Azure Blob 存储中，在创建标记项目之前，应以数据存储的形式提供这些数据。 有关详细信息，请参阅[创建和注册数据存储](https://docs.microsoft.com/azure/machine-learning/how-to-access-data#create-and-register-datastores)。

若要创建项目，请选择“添加项目”。  为项目指定适当的名称，然后选择“标记任务类型”。 

![标记项目创建向导](./media/how-to-create-labeling-projects/labeling-creation-wizard.png)

* 若要将一组类中的一个或多个标签应用到某个图像，请为项目选择“多标签图像分类”。   例如，可以使用“狗”和“白天”标记狗的照片。  
* 若要将一组类中的单个类应用到某个图像，请为项目选择“多类图像分类”。  
* 若要将类和边界框应用到图像中的每个对象，请为项目选择“对象标识(边界框)”。 

准备好继续时，选择“下一步”。 

## <a name="specify-the-data-to-label"></a>指定要标记的数据

如果已创建包含数据的数据集，请从“选择现有数据集”下拉列表中选择该数据集。  或者，选择“创建数据集”以使用现有的 Azure 数据存储或上传本地文件。 

### <a name="create-a-dataset-from-an-azure-datastore"></a>从 Azure 数据存储创建数据集

在许多情况下，上传本地文件就可以了。 但是，使用 [Azure 存储资源管理器](https://azure.microsoft.com/features/storage-explorer/)可以更快、更可靠地传输大量数据。 建议将存储资源管理器用作移动文件的默认方式。

若要基于已存储在 Azure Blob 存储中的数据创建数据集：

1. 选择“创建数据集” > “从数据存储”。  
1. 为数据集指定一个**名称**。
1. 选择“文件”作为**数据集类型**。   
1. 选择数据存储。
1. 如果数据位于 Blob 存储中的子文件夹中，请选择“浏览”以选择相应的路径。 
    * 将“/**”追加到路径中可以包括所选路径的子文件夹中的所有文件。
    * 追加“* */* .*”可以包括当前容器及其子文件夹中的所有数据。
1. 提供数据集的说明。
1. 选择“**下一页**”。
1. 确认详细信息。 选择“后退”以修改设置，或选择“创建”以创建数据集。  

### <a name="create-a-dataset-from-uploaded-data"></a>基于上传的数据创建数据集

若要直接上传数据：

1. 选择“创建数据集” > “从本地文件”。  
1. 为数据集指定一个**名称**。
1. 选择“文件”作为**数据集类型**。
1. *可选：* 选择“高级设置”可以自定义数据存储、容器，以及数据的路径。 
1. 选择“浏览”选择要上传的本地文件。 
1. 提供数据集的说明。
1. 选择“**下一页**”。
1. 确认详细信息。 选择“后退”以修改设置，或选择“创建”以创建数据集。  

数据将上传到机器学习工作区的默认 Blob 存储（“workspaceblobstore”）。

## <a name="specify-label-classes"></a>添加标签类

在“标签类”页上，指定用于对数据分类的类集。  请谨慎执行此操作，因为标记程序能否在类中进行选择会影响其准确性和速度。 例如，不要拼写出植物或动物的完整属类和物种，而是使用字段代码或者将属类缩写。

在每行输入一个标签。 使用 **+** 按钮添加新行。 如果已经输入了 3 到 4 个标签，但不超过 10 个，则我们建议使用编号（“1:”、“2:”）作为名称的前缀，使标记程序能够使用编号键来加速工作。

## <a name="describe-the-labeling-task"></a>描述标记任务

清楚地解释标记任务非常重要。 在“标记说明”页上，可以添加外部站点的链接来提供标记说明。  让说明面向任务并适合受众。 请考虑以下问题：

* 他们将看到哪些标签，他们如何在标签之间进行选择？ 是否提供了参考文本？
* 如果没有合适的标签，应该怎么办？
* 如果没有合适的多个标签，应该怎么办？
* 他们应当向标签应用什么置信度阈值？ 如果他们不确定，是否需要“最佳推测”？
* 他们应该如何处理部分封闭或重叠的相关对象？
* 如果某个相关对象被图像边缘剪裁，应该怎么办？
* 如果他们错误地提交了标签，该怎么处理？

对于边界框，重要的问题包括：

* 如何为此任务定义边界框？ 边界框应是完全位于对象的内部还是外部？ 是要尽可能准确地裁剪边界框，还是可以接受一定的间隙？
* 希望标记程序在定义边界框中应用何种程度的缜密性和一致性？

>[!NOTE]
> 请务必注意，标记程序可以使用编号键 1-9 选择前 9 个标签。

## <a name="initialize-the-labeling-project"></a>初始化标记项目

在初始化标记项目后，项目的某些方面是不可变的。 无法更改任务类型或数据集。 可以修改任务说明的标签和 URL。  请在创建项目之前仔细检查设置。 提交项目后，将返回到“标记”主页，其中显示项目的状态为“正在初始化”。   此页面不会自动刷新。 因此，在暂停后，手动刷新页面会看到项目状态为“已创建”。 

## <a name="manage-teams-and-people"></a>管理团队和人员

默认情况下，创建的每个标记项目都有一个新团队，而你是其中的成员。 但是，也可以在项目之间共享团队。 项目可以有多个团队。 若要创建团队，请在“团队”页上选择“添加团队”。  

可以在“人员”页上管理人员。  按电子邮件地址添加和删除人员。 每个标记程序必须通过你的 Microsoft 帐户或 Azure Active Directory（如果使用）完成身份验证。  

添加人员后，可将该人员分配到一个或多个团队：转到“团队”页，选择团队，然后选择“分配人员”或“删除人员”。   

若要向团队发送电子邮件，请选择该团队以查看“团队详细信息”页。  在此页上，选择“向团队发送电子邮件”以打开一封草稿电子邮件，其中包含团队中每个人的地址。 

## <a name="run-and-monitor-the-project"></a>运行和监视项目

初始化项目后，Azure 将开始运行该项目。 在“标记”主页上选择该项目，转到“项目详细信息”。   “仪表板”选项卡将显示标记任务的进度。 

在“数据”选项卡上，可以查看数据集并检查已标记的数据。  如果发现数据标记不正确，可以选择该数据，然后选择“拒绝”，这会删除标签，并将数据放回到未标记队列中。 

使用“团队”选项卡可在项目中分配或取消分配团队。 

若要暂停或重启项目，请选择“暂停”/“启动”按钮。   只能在项目运行时标记数据。

通过选择“标记数据”  ，可以直接从“项目详细信息”  页中标记数据。

## <a name="export-the-labels"></a>导出标签

随时可以导出标签数据以进行机器学习试验。 可以使用 [COCO 格式](http://cocodataset.org/#format-data)导出图像标签，或将其导出为 Azure 机器学习数据集。 使用标记项目的“项目详细信息”页上的“导出”按钮。  

COCO 文件是在 Azure 机器学习工作区的默认 Blob 存储中创建的，该存储位于 *export/coco* 内的某个文件夹中。 可以在机器学习的“数据集”部分访问导出的 Azure 机器学习数据集。  数据集详细信息页还提供了演示如何从 Python 访问标签的示例代码。

![导出的数据集](./media/how-to-create-labeling-projects/exported-dataset.png)

## <a name="next-steps"></a>后续步骤

* 标记图像以进行[图像分类或对象检测](how-to-label-images.md)
* 详细了解 [Azure 机器学习和机器学习工作室（经典）](compare-azure-ml-to-studio-classic.md)
