---
title: Azure 机器学习日志记录 API 参考 | Microsoft Docs
description: 日志记录 API 参考。
services: machine-learning
author: akshaya-a
ms.author: akannava
manager: mwinkle
ms.reviewer: garyericson, jasonwhowell, mldocs
ms.service: machine-learning
ms.component: core
ms.workload: data-services
ms.topic: article
ms.date: 09/25/2017
ROBOTS: NOINDEX
ms.openlocfilehash: f7dac645ef0b732b7f3087a06c74385871d5b1c9
ms.sourcegitcommit: dbfd977100b22699823ad8bf03e0b75e9796615f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/30/2018
ms.locfileid: "50238330"
---
# <a name="logging-api-reference"></a>日志记录 API 参考

[!INCLUDE [workbench-deprecated](../../../includes/aml-deprecating-preview-2017.md)] 

Azure 机器学习的日志记录库允许程序发出可由历史记录服务跟踪的指标和文件，供以后进行分析。 

## <a name="uploading-metrics"></a>上传指标

```python
# import logging API package
from azureml.logging import get_azureml_logger

# initialize a logger object
logger = get_azureml_logger()

# log "scalar" metrics
logger.log("simple integer value", 7)
logger.log("simple float value", 3.141592)
logger.log("simple string value", "this is a string metric")

# log a list of numerical values. 
# this automatically creates a chart in the Run History details page
logger.log("chart data points", [1, 3, 5, 10, 6, 4])
```

默认情况下，所有指标以异步方式提交，使提交操作不会妨碍程序的执行。 在边缘方案中发送多个指标时，这可能导致顺序问题。 例如，同时记录了两个指标，但出于某种原因，用户希望保留确切的指标顺序。 另一种情况是，在运行已知可能快速失败的某段代码之前，必须跟踪指标。 在这两种情况下，解决方法都是先等到已完全记录指标，然后再继续：

```python
# blocking call
logger.log("my metric 1", 1).wait()
logger.log("my metric 2", 2).wait()
```

## <a name="consuming-metrics"></a>使用指标

指标由历史记录服务存储，绑定到生成这些指标的“运行”。 使用“运行历史记录”选项卡和以下 CLI 命令，可以在完成运行后检索指标（及指标下的项目）。

```azurecli
# show the last run
$ az ml history last

# list all past runs
$ az ml history list 

# show a paritcular run
$ az ml history info -r <runid>
```

## <a name="artifacts-files"></a>项目（文件）

除指标以外，Azure 机器学习还允许用户跟踪文件。 默认情况下，所有已写入相对于程序工作目录（计算上下文中的项目文件夹）的 `outputs` 文件夹中的文件会上传到历史记录服务，并受到跟踪，供以后进行分析。 请注意，单个文件的大小必须小于 512 MB。


```Python
# Log content as an artifact
logger.upload("artifact/path", "This should be the contents of artifact/path in the service")
```

## <a name="consuming-artifacts"></a>使用项目

若要列显受跟踪项目的内容，用户可以使用给定运行的“运行历史记录”选项卡来**下载**或**提升**项目，或使用以下 CLI 命令获得相同的效果。

```azurecli
# show all artifacts generated by a run
$ az ml history info -r <runid> -a <artifact/path>

# promote a particular artifact
$ az ml history promote -r <runid> -ap <artifact/prefix> -n <name of asset to create>
```
## <a name="next-steps"></a>后续步骤
- 完成整个[鸢尾花分类教程第 2 部分](tutorial-classifying-iris-part-2.md)，了解日志记录 API 的工作方式。
- 查看[如何在 Azure Machine Learning Workbench 中使用运行历史记录和模型指标](how-to-use-run-history-model-metrics.md)，更深入地了解如何在运行历史记录中使用日志记录 API。
