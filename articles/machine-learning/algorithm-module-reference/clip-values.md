---
title: 剪切值
titleSuffix: Azure Machine Learning
description: 了解如何使用 Azure 机器学习中的 "剪裁值" 模块来检测离群值并剪切或替换其值。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 09/09/2019
ms.openlocfilehash: 5f695bf739a6e096083cd6d8271b6936f24c16da
ms.sourcegitcommit: 87781a4207c25c4831421c7309c03fce5fb5793f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/23/2020
ms.locfileid: "76546820"
---
# <a name="clip-values"></a>剪切值

本文介绍 Azure 机器学习设计器（预览）的模块。

使用 "剪裁值" 模块来确定和（可选）将高于或低于指定阈值的数据值替换为平均值、常量或其他替代值。  

将模块连接到包含要剪裁的数字的数据集，选择要使用的列，然后设置阈值或值的范围以及替换方法。 该模块可以只输出结果，也可以输出附加到原始数据集的更改的值。

## <a name="how-to-configure-clip-values"></a>如何配置剪辑值

在开始之前，请确定要剪裁的列以及要使用的方法。 建议先对一小部分数据测试任何剪辑方法。

此模块对所选内容中包括的**所有**列应用相同的条件和替换方法。 因此，请务必排除不想更改的列。

如果需要向某些列应用剪辑方法或不同的条件，则必须为每组类似列使用一个新的**剪辑值**实例。

1.  将 "**剪辑值**" 模块添加到管道，并将其连接到要修改的数据集。 您可以在 "**数据转换**" 下的 "**缩放和缩小**" 类别中找到此模块。 
  
1.  在**列列表**中，使用 "列选择器" 选择将应用**剪辑值**的列。  
  
1.  对于 "**阈值集**"，请从下拉列表中选择以下选项之一。 这些选项确定如何为可接受的值以及必须剪裁的值设置上限和下限。  
  
    - **ClipPeaks**：按峰值剪辑值时，只指定上限。 将替换大于该边界值的值。
  
    -  **ClipSubpeaks**：按 subpeaks 剪辑值时，只指定一个下限。 小于该边界值的值将被替换。  
  
    - **ClipPeaksAndSubpeaks**：按峰值和 subpeaks 剪切值时，可以同时指定上边界和下边界。 超出该范围的值将被替换。 不会更改匹配边界值的值。
  
1.  根据你在上一步中所做的选择，可以设置以下阈值： 

    + **阈值下限**：仅在选择**ClipSubPeaks**时显示
    + **上限阈值**：仅在选择**ClipPeaks**时显示
    + **阈值**：仅在选择**ClipPeaksAndSubPeaks**时显示

    对于每个阈值类型，请选择 "**常量**" 或 "**百分比**"。

1. 如果选择 "**常量**"，请在文本框中键入最大值或最小值。 例如，假设您知道值999用作占位符值。 您可以选择 "**常数**" 作为上限阈值，然后在 "**阈值**" 中键入 "999"。
  
1. 如果选择**百分**位，则会将列值限制为百分比范围。 

    例如，假设您希望只保留10-80 百分位范围内的值，并替换所有其他值。 选择 "**百分**位"，然后为 "**下限阈值**" 键入10，为 "阈值" 键入 "80"，为 "**上限" 值**键入 ""。 

    有关如何使用百分位范围的一些示例，请参阅[百分位数](#examples-for-clipping-using-percentiles)上的部分。  
  
1.  定义替换值。

    与指定边界完全匹配的数字被视为位于允许的值范围内，因此不会被替换。 位于指定范围之外的所有数字都将替换为替换值。 
  
    + **峰值的替换值**：定义要替换为大于指定阈值的所有列值的值。  
    + **Subpeaks 的替换值**：定义要用作小于指定阈值的所有列值的替代值。  
    + 如果使用**ClipPeaksAndSubpeaks**选项，则可以为上下裁剪值指定单独的替换值。  

    支持以下替换值：  
  
    -   **阈值**：用指定的阈值替换剪切后的值。  
  
    -   **均值**：将剪切的值替换为列值的平均值。 在对值进行剪裁之前计算平均值。  
  
    -   中**值：将**剪切的值替换为列值的中值。 在剪切值之前计算中值。   
  
    -   **缺少**。 将剪切的值替换为缺少的（空）值。  
  
1.  **添加指示器列**：如果想要生成一个新列来告诉您是否将指定的剪辑操作应用于该行中的数据，请选择此选项。 在测试一组新的剪辑和替换值时，此选项很有用。  
  
1. **覆盖标志**：指明要如何生成新值。 默认情况下，**剪辑值**构造一个新列，其中的最大值已剪裁到所需的阈值。 新值覆盖原始列。  
  
    若要保留原始列并添加具有剪切值的新列，请取消选择此选项。  
  
1.  运行管道。  
  
    右键单击 "**剪辑值**" 模块，选择 **"可视化**" 或选择该模块，然后切换到右侧面板中的 "**输出**" 选项卡，单击**端口输出**中的直方图图标，查看这些值，并确保剪辑操作满足您的预期。  
 
### <a name="examples-for-clipping-using-percentiles"></a>使用百分位数进行剪辑的示例

若要了解通过百分裁剪的工作方式，请考虑具有 10 行，每个实例的值 1-10 的数据集。  
  
- 如果将百评分用作上限阈值，在第 90 个百评分的值处，数据集中 90% 的值必须小于该值。  
  
- 如果将百评分用作下限阈值，在第 10 个百评分的值处，数据集中 10% 的值必须小于该值。  
  
1.  对于 "**阈值集**"，请选择 " **ClipPeaksAndSubPeaks**"。  
  
1.  对于 "**上限阈值**"，选择 "**百分**位"，对于**百分位数**，请键入90。  
  
1.  对于 "**上限值**"，选择 "**缺失值**"。  
  
1.  对于 "**下限阈值**"，选择 "**百分**位"，对于**百分位数**，请键入10。  
  
1.  对于 "**下限值**"，选择 "**缺失值**"。  
  
1.  取消选中 "**覆盖标志**" 选项，然后选择 "**添加指示器列**" 选项。  
  
现在，请尝试使用60作为上百分位阈值，并使用30作为百分比下限阈值，并使用阈值作为替换值。 下表比较了以下两个结果：  
  
1.  替换为缺少的;阈值上限 = 90;阈值下限 = 20  
  
1.  替换为阈值;高百分位数 = 60;低百分位数 = 40  
  
|原始数据|替换为缺失值|替换为阈值|  
|-------------------|--------------------------|----------------------------|  
|第<br /><br /> 2<br /><br /> 3<br /><br /> 4<br /><br /> 5<br /><br /> 6<br /><br /> 7<br /><br /> 8<br /><br /> 9<br /><br /> 10|TRUE<br /><br /> TRUE<br /><br /> 3、FALSE<br /><br /> 4、FALSE<br /><br /> 5、FALSE<br /><br /> 6、FALSE<br /><br /> 7、FALSE<br /><br /> 8，FALSE<br /><br /> 9，FALSE<br /><br /> TRUE|4，TRUE<br /><br /> 4，TRUE<br /><br /> 4，TRUE<br /><br /> 4，TRUE<br /><br /> 5、FALSE<br /><br /> 6、FALSE<br /><br /> 7、TRUE<br /><br /> 7、TRUE<br /><br /> 7、TRUE<br /><br /> 7、TRUE| 
 
## <a name="next-steps"></a>后续步骤

查看可用于 Azure 机器学习[的模块集](module-reference.md)。 
