---
title: 评估模型：模块参考
titleSuffix: Azure Machine Learning
description: 了解如何使用 Azure 机器学习中的“评估模型”模块来评估已训练模型的准确性。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 07/08/2020
ms.openlocfilehash: fe0d3819701e062fa2253bc6dd0c3a28eaeaadfb
ms.sourcegitcommit: 1e6c13dc1917f85983772812a3c62c265150d1e7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/09/2020
ms.locfileid: "86171103"
---
# <a name="evaluate-model-module"></a>“评估模型”模块

本文介绍 Azure 机器学习设计器（预览版）中的一个模块。

使用此模块可以评估已训练模型的准确性。 你提供了一个数据集，其中包含从模型生成的分数，“评估模型”模块将计算一组行业标准的评估指标。
  
 “评估模型”返回的指标取决于要评估的模型类型：  
  
-   **分类模型**    
-   **回归模型**  
-   **聚类分析模型**  


> [!TIP]
> 如果你还不熟悉模型评估，我们建议观看 Stephen Elston 博士的视频系列，该系列是 EdX [机器学习课程](https://blogs.technet.microsoft.com/machinelearning/2015/09/08/new-edx-course-data-science-machine-learning-essentials/)的一部分. 


## <a name="how-to-use-evaluate-model"></a>如何使用“评估模型”
1. 将[评分模型](./score-model.md)的“得分数据集”输出或[将数据分配到聚类](./assign-data-to-clusters.md)的“结果数据集”输出连接到“评估模型”的左侧输入端口。 
    > [!NOTE] 
    > 如果使用“在数据集中选择列”等模块来选择部分输入数据集，请确保存在“实际标签”列（用于模型训练）、“评分概率”列和“评分标签”列以计算指标（如 AUC、二进制分类/异常检测的准确性）。
    > 存在“实际标签”列、“评分标签”列以计算多类分类/回归的指标。
    > 存在“赋值”列、“DistancesToClusterCenter no.X”列（X 是重心索引，范围为 0，...，重心数量 -1）以计算聚类分析的指标。

2. [可选] 将[评分模型](./score-model.md)的“得分数据集”输出或第二个模型的“将数据分配到聚类”的“结果数据集”输出连接到“评估模型”的右侧输入端口  。 你可以在相同数据上轻松比较两个不同模型的结果。 两个输入算法应为同一算法类型。 你也可以使用不同的参数对相同数据运行两次，然后比较两次运行的评分。

    > [!NOTE]
    > 算法类型是指机器学习算法下的“双类分类”、“多类分类”、“回归”、“聚类分析”。 

3. 提交管道以生成评估分数。

## <a name="results"></a>结果

运行“评估模型”后，选择模块以打开右侧的“评估模型”导航面板 。  然后，选择“输出 + 日志”选项卡，然后在该选项卡上，“数据输出”部分包含多个图标。 “可视化”图标有一个条形图图标，这是查看结果的第一种方法。

对于二元分类，单击 "**可视化**" 图标后，可以可视化二进制混淆矩阵。
对于多分类，可以在 "**输出 + 日志**" 选项卡下找到混乱的矩阵绘图文件，如下所示：
> [!div class="mx-imgBorder"]
> ![预览已上传的图像](media/module/multi-class-confusion-matrix.png)

如果将数据集连接到“评估模型”的两种输入，结果将包含这两个数据集或这两个模型的指标。
报告中首先显示附加到左侧端口的模型或数据，然后是附加在右侧端口上的数据集或模型的指标。  

例如，下图表示使用不同参数的相同数据上生成的两个聚类分析模型的结果比较。  

![比较两个模型](media/module/evaluate-2-models.png)  

因为这是聚类分析模型，所以，计算结果不同于比较两个回归模型的分数或两个分类模型的结果。 不过，整体显示是相同的。 

## <a name="metrics"></a>指标

本部分介绍针对支持与“评估模型”一起使用的特定模型类型返回的指标：

+ [分类模型](#metrics-for-classification-models)
+ [回归模型](#metrics-for-regression-models)
+ [聚类分析模型](#metrics-for-clustering-models)

### <a name="metrics-for-classification-models"></a>分类模型的指标


评估二元分类模型时，将报告以下度量值。
  
-   “准确度”衡量分类模型的优劣，即真实结果占总体的比例。  
  
-   “精准率”是真实结果占所有正直结果的比例。  
  
-   “召回率”是模型返回的所有正确结果的部分。  
  
-   **F1 分数**计算为精度和值介于0和1之间的加权平均值，其中理想的 F1 评分值为1。  
  
-   “AUC”度量曲线下方的区域，y 轴上绘制真正值，x 轴上绘制假正值。 此指标很有用，因为它提供了一个可用于比较不同类型模型的数字。  


### <a name="metrics-for-regression-models"></a>回归模型的指标
 
回归模型返回的指标旨在估算错误量。  如果观测值和预测值之间的差异很小，则认为模型与数据匹配。 不过，查看残差（任何一个预测点和其对应的实际值之间的差异）的模式可以告诉你有关模型中潜在偏差的很多信息。  
  
 评估回归模型时，将报告以下指标。
  
- “平均绝对误差 (MAE)”度量预测对实际结果的接近程度；因此，分数越低越好。  
  
- “均方根误差 (RMSE)”创建汇总了模型中错误的单个值。 通过对差值进行平方，该指标将忽略预测过高与预测过低之间的差异。  
  
- “相对绝对误差 (RAE)”是期望值与实际值之间的相对绝对差；相对是因为平均差除以算术平均值。  
  
- “相对平方误差 (RSE)”类似地通过除以实际值的总平方误差来归一化预测值的总平方误差。  
  

  
- “决定系数”（通常称为 R <sup>2</sup>）将模型的预测能力表示为 0 和 1 之间的值。 如果为零，则表示模型是随机的（不解释任何内容）；1 表示有非常合适的解释。 但是，在解释 R<sup>2</sup> 值时应谨慎，因为低值可能是完全正常的，而高值可能会令人怀疑。

###  <a name="metrics-for-clustering-models"></a>聚类分析模型指标

由于聚类分析模型在许多方面与分类和回归模型有很大差别，因此[评估模型](evaluate-model.md)也会为聚类分析模型返回一组不同的统计信息。  
  
 聚类分析模型返回的统计信息说明分配给每个聚类的数据点数量、聚类之间的隔离量以及每个聚类中数据点的聚集程度。  
  
 聚类分析模型的统计信息是整个数据集的平均值，并附带有包含每个聚类的统计信息的行。  
  
评估聚类分析模型时，将报告以下指标。
    
-   “到其他中心的平均距离”列中的分数表示该聚类中每个点与所有其他聚类中心的平均距离。   

-   “到聚类中心的平均距离”列中的分数表示某个聚类中所有点到该聚类中心的接近程度。  
  
-   “点数”列显示为每个聚类分配了多少数据点，以及所有聚类中数据点的总数。  
  
     如果分配给聚类的数据点数量小于可用的数据点总数，则意味着无法将数据点分配给聚类。  
  
-   此列中的分数（**与 Cluster 中心**之间的最大距离）表示每个点与该点的分类的质心之间的最大距离。  
  
     如果此数字较高，则可能表示该聚类相当分散。 你应该将统计信息与“到聚类中心的平均距离”一起查看，以确定聚类的分布情况。   

-   各部分结果底部的“组合评估”分数列出了在该特定模型中创建的聚类的平均得分。  
  

## <a name="next-steps"></a>后续步骤

请参阅 Azure 机器学习的[可用模块集](module-reference.md)。 
