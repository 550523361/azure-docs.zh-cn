---
title: 基于筛选器的特征选择：模块引用
titleSuffix: Azure Machine Learning service
description: 了解如何使用 Azure 机器学习服务中基于筛选器的特征选择模块来识别数据集中具有最高预测能力的功能。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/10/2019
ms.openlocfilehash: f8ae4982f7602cd7403a78517fec79fa95d33aa2
ms.sourcegitcommit: bc7725874a1502aa4c069fc1804f1f249f4fa5f7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/07/2019
ms.locfileid: "73717203"
---
# <a name="filter-based-feature-selection"></a>基于筛选器的功能选择

本文介绍如何在 Azure 机器学习设计器（预览版）中使用基于筛选器的功能选择模块。 此模块有助于标识输入数据集中具有最大预测能力的列。 

通常，*功能选择*是指在给定指定输出的情况下将统计测试应用到输入的过程。 目标是确定哪些列对输出的预测性更高。 基于筛选器的特征选择模块提供了多个可供选择的特征选择算法。 此模块包括相关方法，例如皮尔逊相关性和χ-平方值。 

使用 "基于筛选器的特征选择" 模块时，需要提供数据集并标识包含标签或相关变量的列。 然后，您可以指定一个方法，用于测量特征重要性。

该模块输出包含最佳特征列的数据集，该数据集按预测功率排名。 它还会从所选指标输出功能的名称及其分数。  

## <a name="what-filter-based-feature-selection-is"></a>什么是基于筛选器的功能选择  

此功能选择模块称为 "基于筛选器"，因为您使用所选指标来查找不相关的属性。 然后从模型中筛选出冗余列。 您可以选择一个适合您的数据的统计度量值，并且该模块计算每个特征列的分数。 列按其功能分数返回排名。 

通过选择适当的功能，你可能会提高分类的准确性和效率。 

通常只使用具有最佳分数的列来构建预测模型。 具有不良功能选择得分的列可以保留在数据集中，并且在您生成模型时将被忽略。  

## <a name="how-to-choose-a-feature-selection-metric"></a>如何选择功能选择指标

基于筛选器的特征选择模块提供了用于评估每个列中的信息值的各种指标。 本部分提供每个指标的一般说明以及应用方式。 你可以在[技术说明](#technical-notes)中找到有关使用每个指标的其他要求，以及配置每个模块的[说明](#how-to-configure-filter-based-feature-selection)。

-   **皮尔逊相关**  

    皮尔逊的相关统计信息或皮尔逊的相关系数在统计模型中也称为 `r` 值。 对于任意两个变量，它将返回指示相关性强度的值。

    皮尔逊的相关系数是通过对两个变量进行协方差并除以其标准偏差的乘积来计算的。 这两个变量中的缩放更改不会影响系数。  

-   **Χ2**  

    双向χ2测试是一种统计方法，用于度量接近预期值与实际结果的接近程度。 方法假定变量是随机的，并从一个足够的独立变量示例中提取。 生成的χ2统计信息指示结果与预期（随机）结果的距离。  


> [!TIP]
> 如果需要为自定义功能选择方法使用不同的选项，请使用 "[执行 R 脚本](execute-r-script.md)" 模块。 

## <a name="how-to-configure-filter-based-feature-selection"></a>如何配置基于筛选器的功能选择

选择标准统计指标。 该模块计算一对列之间的相关性：标签列和特征列。

1.  将基于筛选器的特征选择模块添加到管道。 您可以在设计器的 "**功能选择**" 类别中找到它。

2. 连接输入数据集，该数据集包含至少两个为潜在功能的列。  

    若要确保对列进行分析并生成功能评分，请使用[编辑元数据](edit-metadata.md)模块来设置**IsFeature**属性。 

    > [!IMPORTANT]
    > 确保作为输入提供的列是可能的特征。 例如，包含单个值的列没有信息值。
    >
    > 如果知道某些列会产生不良功能，您可以将其从选择的列中删除。 你还可以使用[编辑元数据](edit-metadata.md)模块将其标记为**分类**。 
3.  对于 "**功能评分方法**"，请选择以下已建立的统计方法之一，以便在计算评分时使用。  

    | 方法              | 要求                             |
    | ------------------- | ---------------------------------------- |
    | 皮尔逊相关 | 标签可以是文本，也可以是数字。 功能必须是数值。 |
    Χ2| 标签和功能可以是文本，也可以是数字。 此方法用于计算两个分类列的特征重要性。|

    > [!TIP]
    > 如果更改所选的指标，将重置所有其他选择。 因此，请务必先设置此选项。
4.  选择 "**仅对功能列操作**" 选项，只为之前标记为功能的列生成分数。 

    如果清除此选项，则该模块将为满足条件的任何列创建分数，直到达到**所需功能数量**中指定的列数。  

5.  对于 "**目标列**"，选择 "**启动列选择器**" 以按名称或按索引选择标签列。 （索引是从1开始的。）  
    所有涉及统计相关性的方法都需要标签列。 如果不选择标签列或多个标签列，则该模块将返回设计时错误。 

6.  对于**所需功能的数目**，请输入要作为结果返回的功能列的数目：  

    - 可以指定的最小功能数目为1，但建议增加此值。  

    - 如果指定的所需功能数目大于数据集中的列数，则返回所有功能。 将返回甚至包含零分数的特征。  

    - 如果指定的结果列比特征列少，则特征按降序排名。 仅返回顶级功能。 

7.  运行管道，或选择基于筛选器的特征选择模块，然后选择 "**运行选定**内容"。


## <a name="results"></a>结果

处理完成后：

+ 若要查看已分析的功能列及其分数的完整列表，请右键单击该模块。 选择 "**功能**"，然后选择 "**可视化**"。  

+ 若要查看基于功能选择条件生成的数据集，请右键单击该模块。 选择 "**数据集**"，然后选择 "**可视化**"。 

如果数据集包含的列数少于所需的列数，请检查模块设置。 还要检查作为输入提供的列的数据类型。 例如，如果将**所需功能的数目**设置为1，则输出数据集只包含两列：标签列和高度排名最高的功能列。


##  <a name="technical-notes"></a>技术说明  

### <a name="implementation-details"></a>实现详细信息

如果对数值特征和分类标签使用皮尔逊相关性，则特征评分的计算方式如下：  

1.  对于 "分类" 列中的每个级别，计算数值列的条件平均值。  

2.  将条件的列与数值列关联起来。  

### <a name="requirements"></a>要求  

-   对于指定为**标签**列或**评分**列的任何列，不能生成功能选择评分。  

-   如果尝试将计分方法与该方法不支持的数据类型的列结合使用，则该模块将引发错误。 或者，将为该列分配零评分。  

-   如果某列包含逻辑（true/false）值，则它们将作为 `True = 1` 和 `False = 0`进行处理。  

-   如果列被指定为**标签**或**分数**，则该列不能是功能。  

### <a name="how-missing-values-are-handled"></a>如何处理缺失值  

-   不能将包含所有缺失值的列指定为 "目标（标签）" 列。  

-   如果某列包含缺失值，则在计算列的分数时，该模块将忽略这些值。  

-   如果被指定为特征列的列包含全部缺失值，则该模块将分配一个零分数。   


## <a name="next-steps"></a>后续步骤

查看可用于 Azure 机器学习服务[的模块集](module-reference.md)。 

