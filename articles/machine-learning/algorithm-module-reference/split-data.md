---
title: 拆分数据：模块引用
titleSuffix: Azure Machine Learning
description: 了解如何使用 Azure 机器学习中的 "拆分数据" 模块将数据集划分为两个不同的集。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/22/2019
ms.openlocfilehash: b705b342708a038a7f3d8c15d6a4298e9fc17c75
ms.sourcegitcommit: 512d4d56660f37d5d4c896b2e9666ddcdbaf0c35
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/14/2020
ms.locfileid: "79369805"
---
# <a name="split-data-module"></a>拆分数据模块

本文介绍 Azure 机器学习设计器（预览版）中的模块。

使用 "拆分数据" 模块将数据集分成两个不同的集。

当你需要将数据分为定型集和测试集时，此模块很有用。 您还可以自定义数据划分的方式。 某些选项支持随机化数据。 其他数据类型为特定的数据类型或模型类型而定制。

## <a name="configure-the-module"></a>配置模块

> [!TIP]
> 在选择拆分模式之前，请阅读所有选项以确定所需的拆分类型。
> 如果更改拆分模式，则所有其他选项都可能会重置。

1. 在设计器中将 "**拆分数据**" 模块添加到管道。 可以在 "**示例" 和 "拆分**" 类别中的 "**数据转换**" 下找到此模块。

1. **拆分模式**：根据所拥有的数据类型以及要如何划分数据，选择以下模式之一。 每个拆分模式都有不同的选项。

   - **拆分行**：如果只想将数据分为两部分，请使用此选项。 您可以指定要置于每个拆分中的数据百分比。 默认情况下，数据划分为50/50。

     您还可以在每个组中随机化选择行并使用分层采样。 在分层采样中，你必须选择要在两个结果数据集之间平均分配值的单个数据列。  

   - **正则表达式拆分**：如果希望通过测试单个列中的值来划分数据集，请选择此选项。

     例如，如果要分析情绪，可以在文本字段中检查是否存在特定的产品名称。 然后，可以将数据集划分为具有目标产品名称的行和没有目标产品名称的行。

   - **相对表达式拆分**：每当要对数字列应用条件时，请使用此选项。 该数字可以是日期/时间字段、包含年龄或美元量的列，甚至是一个百分比。 例如，你可能想要根据项目成本、按年龄范围分组人员或按日历日期分隔数据来划分数据集。

### <a name="split-rows"></a>拆分行

1. 在设计器中将 "[拆分数据](./split-data.md)" 模块添加到管道中，并连接要拆分的数据集。
  
1. 对于**拆分模式**，请选择 "**拆分行**"。 

1. **第一个输出数据集中的部分行**：使用此选项确定将进入第一个（左侧）输出的行数。 所有其他行将进入第二（右侧）输出。

   此比率表示发送到第一个输出数据集的行的百分比，因此必须输入介于0和1之间的十进制数字。
     
   例如，如果输入**0.75**作为值，则会将数据集拆分为75/25。 在此拆分中，75% 的行将发送到第一个输出数据集。 剩余的25% 将发送到第二个输出数据集。
  
1. 如果要将选定的数据随机加入两个组，请选择 "**随机拆分**" 选项。 当你创建定型和测试数据集时，此选项是首选选项。

1. **随机种子**：输入一个非负整数值，启动要使用的实例的伪随机序列。 此默认种子将在生成随机数字的所有模块中使用。 

   指定种子可使结果可重现。 如果需要重复执行拆分操作的结果，则应指定随机数生成器的种子。 否则，随机种子默认设置为**0**，这意味着将从系统时钟获取初始种子值。 因此，数据的分布情况可能略有不同每次执行一个拆分。 

1. **分层 split**：将此选项设置为**True**可确保两个输出数据集包含*阶层列*或*分层键列*中值的代表性示例。 

   对于分层采样，将对数据进行划分，以便每个输出数据集大约获取每个目标值的相同百分比。 例如，你可能想要确保你的定型集和测试集的大致平衡与结果或其他一些列（如性别）有关。

1. 运行管道。


## <a name="select-a-regular-expression"></a>选择正则表达式

1. 将 "[拆分数据](./split-data.md)" 模块添加到管道，并将其作为输入连接到要拆分的数据集。  
  
1. 对于**拆分模式**，请选择 "**正则表达式拆分**"。

1. 在 "**正则表达式**" 框中，输入有效的正则表达式。 
  
   正则表达式应遵循适用于正则表达式的 Python 语法。

1. 运行管道。

   根据您提供的正则表达式，数据集分为两组行：行，其值与表达式和所有剩余行匹配。 

下面的示例演示如何使用**正则表达式**选项来划分数据集。 

### <a name="single-whole-word"></a>单个全字 

此示例将包含列 `Text`中 `Gryphon` 文本的所有行放入第一个数据集。 它将其他行放入**拆分数据**的第二个输出。

```text
    \"Text" Gryphon  
```

### <a name="substring"></a>Substring

此示例在数据集的第二列中的任意位置查找指定的字符串。 此处的索引值为1时表示位置。 匹配项区分大小写。

```text
(\1) ^[a-f]
```

第一个结果数据集包含索引列以以下其中一个字符开头的所有行： `a`、`b`、`c`、`d`、`e`、`f`。 所有其他行将定向到第二个输出。

## <a name="select-a-relative-expression"></a>选择相对表达式

1. 将 "[拆分数据](./split-data.md)" 模块添加到管道，并将其作为输入连接到要拆分的数据集。
  
1. 对于**拆分模式**，请选择 "**相对表达式**"。
  
1. 在 "**关系表达式**" 框中，输入对单个列执行比较运算的表达式。

   对于**数字列**：
   - 列包含任何数值数据类型的数字，包括日期和时间数据类型。
   - 表达式最多可以引用一个列名称。
   - 对于和操作，请使用与号字符 `&`。 为或操作使用管道字符 `|`。
   - 支持以下运算符： `<`、`>`、`<=`、`>=`、`==`、`!=`。
   - 不能使用 `(` 和 `)`对操作进行分组。
   
   对于**字符串列**：
   - 支持以下运算符： `==`，`!=`。

1. 运行管道。

   表达式将数据集分成两组行：值满足条件的行和所有剩余行。

下面的示例演示如何使用**拆分数据**模块中的**相对表达式**选项来划分数据集。  

### <a name="calendar-year"></a>日历年

常见情形是按年份分割数据集。 下面的表达式选择 `Year` 列中的值大于 `2010`的所有行。

```text
\"Year" > 2010
```

日期表达式必须考虑数据列中包含的所有日期部分。 数据列中日期的格式必须一致。 

例如，在使用格式 `mmddyyyy`日期列中，表达式应类似于：

```text
\"Date" > 1/1/2010
```

### <a name="column-index"></a>列索引

以下表达式演示如何使用列索引选择数据集的第一列中值小于或等于 30、但不等于 20 的所有行。

```text
(\0)<=30 & !=20
```


## <a name="next-steps"></a>后续步骤

查看可用于 Azure 机器学习[的模块集](module-reference.md)。 
