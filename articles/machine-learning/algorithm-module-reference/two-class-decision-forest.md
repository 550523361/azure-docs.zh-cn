---
title: 双类决策林：模块参考
titleSuffix: Azure Machine Learning
description: 了解如何使用 Azure 机器学习中的“双类决策林”模块，以便根据决策林算法创建机器学习模型。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 04/22/2020
ms.openlocfilehash: c98935781699510d84247f80367d5c57cb388f6b
ms.sourcegitcommit: 1ed0230c48656d0e5c72a502bfb4f53b8a774ef1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/24/2020
ms.locfileid: "82137631"
---
# <a name="two-class-decision-forest-module"></a>“双类决策林”模块

本文介绍了 Azure 机器学习设计器（预览版）中的一个模块。

使用此模块，可以根据决策林算法创建机器学习模型。  

决策林是快速的监督式集成模型。 如果希望预测具有最多两个结果的目标，则此模块是一个不错的选择。 

## <a name="understanding-decision-forests"></a>了解决策林

此决策林算法是一种用于分类任务的集成学习方法。 集成方法的基本原理是，可以通过创建多个相关模型并以某种方式组合它们来获得更好的结果和更通用的模型，而不是依赖于单个模型。 一般说来，集成模型可以提供比单个决策树更大的覆盖范围和更高的准确度。 

有许多方法可用来创建各个模型并将它们组合到一个集成中。 决策林的此特定实现的工作原理是生成多个决策树，然后对最受欢迎的输出类进行投票  。 投票是用于在一个集成模型中生成结果的更知名方法之一。 

+ 将使用整个数据集但使用不同的（通常为随机的）起点创建许多单独的分类树。 这不同于随机林方法，在随机林方法中，各个决策树可能仅使用数据或特征的某个随机部分。
+ 决策林中的每个树都会输出标签的一个非标准化频率直方图。 
+ 聚合过程对这些直方图求和并规范化结果，以获取每个标签的 "概率"。 
+ 决策树的预测置信度越高，它在集成的最终决策中所占的权重越高。

通常，对于分类任务，决策树有许多优势：
  
- 它们可以捕获非线性决策边界。
- 你可以基于大量数据进行训练和预测，因为它们在计算和内存使用方面很有效。
- 训练和分类流程中集成了特征选择。  
- 树可以容纳干扰性数据和许多特征。  
- 它们是非参数模型，这意味着它们可以处理具有不同分布的数据。 

但是，简单决策树可能会基于数据过度拟合，并且通用性比集成更低。

有关详细信息，请参阅[决策林](https://go.microsoft.com/fwlink/?LinkId=403677)。  

## <a name="how-to-configure"></a>配置方式
  
1.  在 Azure 机器学习中将**双类决策林**模块添加到你的管道，并打开模块的“属性”  窗格。 

    可以在“机器学习”下找到此模块。  依次展开“初始化”  和“分类”  。  
  
2.  对于“重新采样方法”，请选择用于创建各个树的方法  。  你可以选择“装袋”或“复制”。    
  
    -   **装袋**：装袋也称为“启动聚合”  。 在此方法中，每个树都在新示例的基础上发展。新示例的创建方法是，对原始数据集进行随机采样并替换，直到得到与原始数据集相同大小的数据集。  
  
         模型的输出通过“投票”（一种聚合形式）组合在一起  。 分类决策林中的每个树都会输出标签的一个非标准化频率直方图。 聚合是为了为每个标签计算这些直方图和规范化的 "概率"。 在此方式中，决策树的预测置信度越高，它在集成的最终决策中所占的权重越高。  
  
         有关详细信息，请参阅关于启动聚合的维基百科条目。  
  
    -   **复制**：在复制中，每个树都用完全相同的输入数据进行训练。 确定每个树节点使用哪个拆分谓词仍然是随机的，并且树将多种多样。   
  
3.  通过设置“创建训练程序模式”选项，指定要如何对模型进行训练  。  
  
    -   “单个参数”  ：如果你知道自己想要如何配置模型，可以提供一组特定的值作为参数。

    -   **参数范围**：如果您不能确定最佳参数，可以使用 "[优化模型超参数](tune-model-hyperparameters.md)" 模块找到最佳参数。 提供一定范围的值，而讲师会循环访问设置的多个组合，以确定产生最佳结果的值的组合。
  
4.  对于“决策树数目”****，键入可在集成中创建的最大决策树数目。 通过创建更多决策树，你可能会获得更好的覆盖范围，但训练时间将会增加。  
  
    > [!NOTE]
    >  此值还控制对训练后的模型进行可视化时显示的树的数量。 如果希望查看或打印单个树，可以将此值设置为 1。 但是，只能生成一个树（该树采用初始的参数集），不会执行进一步的迭代。
  
5.  对于“决策树的最大深度”****，请键入一个数字，以限制任何决策树的最大深度。 增加树的深度可能会提高精度，但存在过度拟合和训练时间增加的风险。
  
6.  对于“每个节点的随机拆分数”****，键入在生成树的每个节点时要使用的拆分数。 拆分意味着对树的每个级别（节点）的要素进行随机划分**。
  
7.  对于“每个叶节点的最少样本数”****，指定在树中创建任何终端节点（叶）所需的最小事例数。
  
     通过增加此值，可以增加创建新规则的阈值。 例如，使用默认值 1 时，即使是单个案例也可以导致创建新规则。 如果将值增加到 5，则训练数据将必须包含至少五个满足相同条件的事例。  
  
8.  选择“允许分类特征的未知值”**** 选项可以为训练或验证集内的未知值创建一个组。 对于已知值，此模型可能不太精确，但是对于新的（未知）值，它可以提供更好的预测。 

     如果取消选择此选项，则模型只能接受训练数据中包含的值。
  
9. 附加带标签的数据集，并训练模型：

    + 如果将“创建训练程序模式”设置为“单个参数”，请连接标记的数据集和[训练模型](train-model.md)模块********。  
  
    + 如果将 "**创建训练培训模式**" 设置为 "**参数范围**"，请使用[优化模型超参数](tune-model-hyperparameters.md)连接标记的数据集并为模型定型。  
  
    > [!NOTE]
    > 
    > 如果将参数范围传递到[定型模型](train-model.md)，则它仅使用单个参数列表中的默认值。  
    > 
    > 如果将一组参数值传递到[优化模型超参数](tune-model-hyperparameters.md)模块，则在它需要每个参数的一系列设置时，它将忽略这些值，并使用学习器的默认值。  
    > 
    > 如果选择 "**参数范围**" 选项并为任何参数输入单个值，则会在整个扫描中使用您指定的单个值，即使其他参数在一系列值中发生变化。  
    
## <a name="results"></a>结果

训练完成后：

+ 若要保存训练模型的快照，请选择 "**定型模型**" 模块右侧面板中的 "**输出**" 选项卡。 选择 "**注册数据集**" 图标，将该模型保存为可重复使用的模块。

+ 若要使用模型进行评分，请向管道中添加**评分模型**模块。

## <a name="next-steps"></a>后续步骤

参阅 Azure 机器学习[可用的模块集](module-reference.md)。 