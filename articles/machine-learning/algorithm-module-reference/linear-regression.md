---
title: 线性回归：模块引用
titleSuffix: Azure Machine Learning
description: 了解如何在 Azure 机器学习中使用 "线性回归" 模块来创建要在管道中使用的线性回归模型。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: xiaoharper
ms.author: zhanxia
ms.date: 10/22/2019
ms.openlocfilehash: 00a92d60e494920f516d1a52593a54463c050615
ms.sourcegitcommit: a9b1f7d5111cb07e3462973eb607ff1e512bc407
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/22/2020
ms.locfileid: "76311438"
---
# <a name="linear-regression-module"></a>线性回归模块
本文介绍 Azure 机器学习设计器中的模块。

使用此模块可以创建线性回归模型，以便在管道中使用。  线性回归尝试在一个或多个独立变量与数值结果或依赖变量之间建立线性关系。 

使用此模块可以定义线性回归方法，然后使用标记的数据集训练模型。 然后，可以使用训练的模型进行预测。

## <a name="about-linear-regression"></a>关于线性回归

线性回归是一种常用的统计方法，在机器学习中采用了这种方法，并使用许多新方法进行了改进，以适应线路和测量错误。 在最基本的意义上，回归是指预测数值目标。 当你需要简单的模型来实现基本预测任务时，线性回归仍是一个不错的选择。 线性回归还可以很好地处理缺乏复杂性的大规模稀疏数据集。

除了线性回归外，Azure 机器学习还支持各种回归模型。 但是，术语 "回归" 可进行松散解释，而其他工具中提供的一些回归类型则不受支持。

+ 典型回归问题涉及单个独立变量和依赖变量。 这称为*简单回归*。  此模块支持简单的回归。

+ *多个线性回归*涉及两个或更多独立于单个依赖变量的变量。 使用多个输入来预测单个数值结果的问题也称为*多元线性回归*。

    **线性回归**模块可以解决这些问题，这与大多数其他回归模块一样。

+ *多标签回归*是在单个模型中预测多个依赖变量的任务。 例如，在多标签逻辑回归中，可以将样本分配给多个不同的标签。 （这不同于在一个类变量中预测多个级别的任务。）

    Azure 机器学习不支持这种类型的回归。 若要预测多个变量，请为要预测的每个输出创建一个单独的学习器。

多年来，统计学家一直在开发日益先进的回归方法。 即使对于线性回归也是如此。 此模块支持以下两种方法来测量错误并调整回归线：一般最小二乘法方法和梯度下降。

- **梯度下降**是一种将模型定型过程中每个步骤的错误量减到最少的方法。 梯度下降存在许多变化，已广泛研究它对各种学习问题的优化。 如果为 "**解决方案" 方法**选择此选项，则可以设置各种参数以控制步骤大小、学习率等。 此选项还支持使用集成参数扫描。

- **一般最小二乘法**是线性回归中最常使用的一种方法。 例如，最小二乘法是用于 Microsoft Excel 的分析工具库中的方法。

    普通最小二乘法是指丢失函数，该函数将误差计算为实际值与预测线之间差值的平方和，通过最小化平方误差来拟合模型。 此方法假定输入与依赖变量之间存在强线性关系。

## <a name="configure-linear-regression"></a>配置线性回归

此模块支持使用两种方法来为回归模型提供不同的选项：

+ [使用在线梯度下降创建回归模型](#bkmk_GradientDescent)

    对于更加复杂的模型，或者在给定变量数的前提下具有极少训练数据的模型，梯度下降是较好的丢失函数。



+ [使用普通最小二乘法调整回归模型](#bkmk_OrdinaryLeastSquares)

    对于小型数据集，最好选择一般的最小二乘法。 这应该向 Excel 产生类似的结果。

## <a name="bkmk_OrdinaryLeastSquares"></a>使用普通最小二乘法创建回归模型

1. 在设计器中，将 "**线性回归模型**" 模块添加到管道。

    可以在 "**机器学习**" 类别中找到此模块。 展开 "**初始化模型**"，展开 "**回归**"，然后将 "**线性回归模型**" 模块拖到管道。

2. 在 "**属性**" 窗格的 "**解决方案方法**" 下拉列表中，选择 "**普通最小二乘法**"。 此选项指定用于查找回归线的计算方法。

3. 在**l2 正则化**中，键入要用作 L2 正则化权重的值。 建议使用非零值以避免过度拟合。

     若要详细了解正则化如何影响模型管接头，请参阅此文章： [L1 和 L2 正则化 for 机器学习](https://msdn.microsoft.com/magazine/dn904675.aspx)

4. 如果要查看截距的字词，请选择选项 "**包括截获字词**"。

    如果不需要查看回归公式，则取消选择此选项。

5. 对于**随机数种子**，可以选择性地键入一个值，以设定模型使用的随机数生成器的种子。

    如果要在同一管道的不同运行中保持相同的结果，则使用种子值很有用。 否则，默认情况下，使用系统时钟中的值。


7. 将[训练模型](./train-model.md)模块添加到管道，并连接标签的数据集。

8. 运行管道。

## <a name="results-for-ordinary-least-squares-model"></a>普通最小二乘法模型的结果

训练完成后：


+ 若要进行预测，请将训练的模型连接到 "[评分模型](./score-model.md)" 模块，同时将一个数据集连接到一个新值的数据集。 


## <a name="bkmk_GradientDescent"></a>使用在线梯度下降创建回归模型

1. 在设计器中，将 "**线性回归模型**" 模块添加到管道。

    可以在 "**机器学习**" 类别中找到此模块。 展开 "**初始化模型**"，展开 "**回归**"，然后将 "**线性回归模型**" 模块拖到管道

2. 在 "**属性**" 窗格的 "**解决方案方法**" 下拉列表中，选择 "**联机梯度下降**" 作为用于查找回归线的计算方法。

3. 对于 "**创建训练**人员" 模式，指示您是要使用一组预定义的参数来定型模型，还是要使用参数扫描来优化模型。

    + **单个参数**：如果你知道要如何配置线性回归网络，则可以提供一组特定值作为参数。

   
4. 对于 "**学习速率**"，请指定随机梯度下降优化器的初始学习速率。

5. 对于 "**定型时期数**"，键入一个值，该值指示算法循环访问示例的次数。 对于包含少量示例的数据集，此数字应该足够大，以达到收敛。

6. **规范化功能**：如果已规范化用于定型模型的数值数据，则可以取消选择此选项。 默认情况下，该模块将所有数值输入规范化为介于0到1之间的范围。

    > [!NOTE]
    > 
    > 请记住对用于评分的新数据应用相同的规范化方法。

7. 在**l2 正则化**中，键入要用作 L2 正则化权重的值。 建议使用非零值以避免过度拟合。

    若要详细了解正则化如何影响模型管接头，请参阅此文章： [L1 和 L2 正则化 for 机器学习](https://msdn.microsoft.com/magazine/dn904675.aspx)


9. 如果希望学习速率缩短为迭代进度，请选择 "**降低学习速率**" 选项。  

10. 对于**随机数种子**，可以选择性地键入一个值，以设定模型使用的随机数生成器的种子。 如果要在同一管道的不同运行中保持相同的结果，则使用种子值很有用。


12. 添加标记的数据集和定型模块之一。

    如果未使用参数扫描，则使用 "[训练模型](train-model.md)" 模块。

13. 运行管道。

## <a name="results-for-online-gradient-descent"></a>在线梯度下降结果

训练完成后：

+ 若要进行预测，请将定型模型与新输入数据一起连接到[评分模型](./score-model.md)模块。


## <a name="next-steps"></a>后续步骤

查看可用于 Azure 机器学习[的模块集](module-reference.md)。 