---
title: 在 Azure IoT Central 应用程序中创建并运行作业 | Microsoft Docs
description: Azure IoT 中心作业允许批量设备管理功能，例如更新属性或执行命令。
ms.service: iot-central
services: iot-central
author: sarahhubbard
ms.author: sahubbar
ms.date: 03/03/2020
ms.topic: how-to
manager: peterpr
ms.openlocfilehash: c9d5a0daa364b09e45699e898511c28d4b4d92ce
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/28/2020
ms.locfileid: "80157749"
---
# <a name="create-and-run-a-job-in-your-azure-iot-central-application"></a>在 Azure IoT Central 应用程序中创建并运行作业

可以使用 Microsoft Azure IoT Central 通过作业大规模地管理连接的设备。 作业允许您对设备属性执行批量更新并运行命令。 本文介绍如何在您自己的应用程序中开始使用作业。

## <a name="create-and-run-a-job"></a>创建并运行作业

此部分介绍如何创建并运行作业。 它演示如何为一组物流网关设备设置光阈值。

1. 从左侧窗格导航到**作业**。

2. 选择 **= 新建**以创建新作业：

    ![新建作业](./media/howto-run-a-job/createnewjob.png)

3. 输入用于标识所要创建的作业的名称和说明。

4. 选择要应用作业的目标设备组。 您可以在 **"摘要"** 部分查看作业配置应用于的设备数。

5. 接下来，选择**云属性**、**属性**或**命令**作为要配置的作业类型。 要设置**属性**作业配置，请选择属性并设置其新值。 要设置**命令**，请选择要运行的命令。 属性作业可以设置多个属性：

    ![配置作业](./media/howto-run-a-job/configurejob.png)

6. 创建作业后，选择 **"运行"** 或 **"保存**"。 该作业随即显示在“作业”主页上。**** 在此页上，您可以看到当前正在运行的作业以及以前运行或保存的任何作业的历史记录。 您可以随时再次打开已保存的作业以继续编辑或运行它：

    ![查看作业](./media/howto-run-a-job/viewjob.png)

    > [!NOTE]
    > 您可以查看以前运行的作业的 30 天历史记录。

7. 若要获取作业的概述，请从列表中选择要查看的作业。 此概述包含作业详细信息、设备和设备状态值。 在此概述中，您还可以选择 **"下载作业详细信息"** 以下载作业详细信息的 CSV 文件，包括设备及其状态值。 此信息可用于故障排除：

    ![查看设备状态](./media/howto-run-a-job/downloaddetails.png)

### <a name="manage-a-job"></a>管理作业

要停止正在运行的作业之一，请打开它并选择 **"停止**"。 作业状态将会更改，以反映该作业已停止。 "**摘要"** 部分显示哪些设备已完成、失败或仍处于挂起状态。

要运行当前已停止的作业，请选择它，然后选择"**运行**"。 作业状态将会更改，以反映该作业现已重新运行。 "**摘要"** 部分继续更新最新进度。

![管理作业](./media/howto-run-a-job/managejob.png)

## <a name="copy-a-job"></a>复制作业

要复制现有作业之一，请在**作业**页上选择它，然后选择 **"复制**"。 将打开作业配置的副本供编辑，并将 **"副本"** 追加到作业名称中。 您可以保存或运行新作业：

![复制作业](./media/howto-run-a-job/copyjob.png)

## <a name="view-the-job-status"></a>查看作业状态

创建作业后，“状态”列将会更新，包含作业的最新状态消息。**** 下表列出了可能的状态值：

| 状态消息       | 状态的含义                                          |
| -------------------- | ------------------------------------------------------- |
| 已完成            | 此作业已在所有设备上执行。              |
| 失败               | 此作业失败且未在设备上完全执行。  |
| 挂起的              | 此作业尚未在设备上开始执行。         |
| 正在运行              | 此作业当前正在设备上执行。             |
| 已停止              | 此作业已由用户手动停止。           |

状态消息后面是作业中设备的概述。 下表列出了可能的设备状态值：

| 状态消息       | 状态的含义                                                     |
| -------------------- | ------------------------------------------------------------------ |
| 已成功            | 已成功执行该作业的设备数。       |
| 失败               | 执行作业失败的设备数。       |

### <a name="view-the-device-status"></a>查看设备状态

要查看作业和所有受影响的设备的状态，打开该作业。 要下载包含作业详细信息（包括设备列表及其状态值）的 CSV 文件，请选择 **"下载作业详细信息**"。 每个设备名称的旁边显示了以下状态消息之一：

| 状态消息       | 状态的含义                                                                |
| -------------------- | ----------------------------------------------------------------------------- |
| 已完成            | 作业已在此设备上执行。                                     |
| 失败               | 作业在此设备上执行失败。 错误消息中显示了更多信息。  |
| 挂起的              | 作业尚未在此设备上执行。                                   |

> [!NOTE]
> 如果设备已被删除，则无法选择该设备。 它显示为已删除的设备 ID。

## <a name="next-steps"></a>后续步骤

了解如何在 Azure IoT Central 应用程序中创建作业后，接下来请学习：

- [管理设备](howto-manage-devices.md)
- [对设备模板进行版本控制](howto-version-device-template.md)
