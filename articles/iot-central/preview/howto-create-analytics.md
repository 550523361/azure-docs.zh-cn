---
title: 分析 Azure IoT Central 应用程序中的设备数据 |Microsoft Docs
description: 分析 Azure IoT Central 应用程序中的设备数据。
author: ankitgup
ms.author: ankitgup
ms.date: 10/17/2019
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: abjork
ms.openlocfilehash: 77ee15d581cfc17af01ae0fa53139edc331a4fea
ms.sourcegitcommit: cf36df8406d94c7b7b78a3aabc8c0b163226e1bc
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/09/2019
ms.locfileid: "73896003"
---
# <a name="how-to-use-analytics-to-analyze-device-data"></a>如何使用分析来分析设备数据

本文适用于操作员、构建者和管理员。

[!INCLUDE [iot-central-pnp-original](../../../includes/iot-central-pnp-original-note.md)]

Azure IoT Central 提供丰富的分析功能，用于分析历史趋势，并使各种 telemetries 与设备相关联。 若要开始，请访问左窗格中的 "**分析**"。

## <a name="understanding-the-analytics-ui"></a>了解分析 UI
分析用户界面由三个主要组件组成：
- **数据配置面板：** 在配置面板上，首先选择要为其分析数据的设备组。 接下来，选择要分析的遥测，并为每个遥测选择聚合方法。 "**按控件拆分**" 有助于使用设备属性作为维度对数据进行分组。

- **时间控件：** 时间控件用于选择要分析数据的持续时间。 您可以拖动时间滑块的任一端来选择时间跨度。 时间控制还具有一个 "**间隔大小**" 滑块，用于控制 bucket 或用于聚合数据的间隔大小。 

- **图表控件：** 图表控件将数据可视化为折线图。 您可以通过与图表图例交互来切换特定行的可见性。 


  ![分析 UI 概述](media/howto-create-analytics/analyticsui.png)


## <a name="querying-your-data"></a>查询数据

需要首先选择**设备组**，以及要分析的遥测。 完成后，选择 "**分析**" 开始可视化数据。

- **设备组：** [设备组](tutorial-use-device-groups.md)是用户定义的设备组。 例如，Oakland 中的所有冰箱或2.0 风涡轮机的所有版本。

- **遥测：** 选择要分析和浏览的遥测。 可以选择多个 telemetries 进行分析。 默认聚合方法设置为分别为字符串数据类型的数字和计数计算平均值。 数值数据类型支持的聚合方法是 Average、Maximum、Maximum、Count 和 Sum。  String 数据类型支持的聚合方法为 count。

- **拆分方式：** "拆分方式" 控件通过使用设备属性作为维度来帮助对数据进行分组。 设备和云属性的值与遥测数据一起联接，并在设备发送时使用。 如果云或设备属性已更新，则会在图表上看到按不同值分组的遥测数据。

    > [!TIP]
    > 若要单独查看每个设备的数据，请选择 "拆分方式" 控件中的 "设备 Id"。

## <a name="interacting-with-your-data"></a>与数据交互

查询数据后，可以开始在折线图上对数据进行可视化。 可以在数据网格中显示/隐藏遥测、更改持续时间和查看遥测数据。

- **时间编辑器面板：** 默认情况下，我们将检索过去一天中的数据。 您可以拖动时间滑块的任一端来更改时间段。 你还可以使用 "日历" 控件选择预定义的时间段之一或选择自定义时间范围。 时间控制还具有一个 "**间隔大小**" 滑块，用于控制 bucket 或用于聚合数据的间隔大小。

    ![时间编辑器](media/howto-create-analytics/timeeditorpanel.png)

    - **内部日期范围滑块工具**：通过将两个端点控件拖动到所需的时间范围内来使用。 此内部日期范围内受外部日期范围滑块控件约束。
    
   
    - **外部日期范围滑块控件**：使用端点控件选择外部日期范围，该范围将可用于内部日期范围控件。

    - **增加和减少日期范围按钮**：通过选择所需间隔的任一按钮，增加或减少时间跨度。

    - "**间隔大小" 滑块**：用于放大和缩小相同时间范围内的间隔。 通过此操作可更精确地控制较大时间片段之间的移动。 您可以使用它来查看数据的精细、高分辨率视图，甚至可查看以毫秒为单位的数据。 滑块的默认起始点设置为所选数据的最佳最佳视图，这会平衡分辨率、查询速度和粒度。
    
    - **日期范围选取器**：通过此 web 控件，可以轻松地选择所需的日期和时间范围。 还可以使用该控件在不同时区之间切换。 将更改应用到当前工作区后，请选择 "保存"。

    > [!TIP]
    > 间隔大小根据所选时间跨度动态确定。 时间跨度越小，就能将数据聚合到多达几秒钟的粒度间隔中。


- **图表图例：** 图表图例显示图表上所选的遥测数据。 您可以将鼠标悬停在图例上的每一项上，使其位于图表上。 使用 "Split By" 时，遥测按所选维度的相应值进行分组。 通过单击组名称，可以切换每个特定遥测或整个组的可见性。  


- **Y 轴格式控制：** y 轴模式可循环使用可用的 Y 轴视图选项。 仅当可视化不同的 telemetries 时，此控件才可用。 可以通过选择以下三种模式之一来设置 y 轴：

    - **堆积：** 每个遥测的图表都堆积，每个图形都有它们自己的 y 轴。 此模式设置为 "默认"。
    - **共享：** 每个遥测的图表都绘制在同一 y 轴上。
    - **重叠：** 使用它可在同一 y 轴上堆叠多行，并根据所选的行更改 y 轴数据。

  ![使用不同的可视化模式在 Y 轴上排列数据](media/howto-create-analytics/yaxiscontrol.png)

- **缩放控件：** 缩放可让你进一步钻取数据。 如果你在结果集中发现你要关注的时间段，请使用鼠标指针抓住该区域，然后将其拖到所选终结点。 然后右键单击所选区域，然后单击 "缩放"。

  ![放大数据](media/howto-create-analytics/zoom.png)

省略号下有更多的图表控件用于与数据进行交互。

- **显示网格：** 你的结果以表格格式提供，可让你查看每个数据点的特定值。

- **删除标记：** "拖放标记" 控件提供了一种在图表上定位某些数据点的方法。 当您尝试跨不同时间段比较多行的数据时，此方法非常有用。

  ![显示分析数据的网格视图](media/howto-create-analytics/additionalchartcontrols.png)