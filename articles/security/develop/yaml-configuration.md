---
title: 微软 Azure 安全代码分析任务自定义指南
description: 本文介绍了用于自定义 Microsoft 安全代码分析扩展中所有任务的 YAML 配置选项
author: vharindra
manager: sukhans
ms.author: terrylan
ms.date: 11/29/2019
ms.topic: article
ms.service: security
services: azure
ms.assetid: 521180dc-2cc9-43f1-ae87-2701de7ca6b8
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.openlocfilehash: 82802ceae8f9fdd24d1f5642d80d90ebfd8b92a3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/27/2020
ms.locfileid: "75460664"
---
# <a name="yaml-configuration-options-to-customize-the-build-tasks"></a>用于自定义生成任务的 YAML 配置选项

本文列出了每个生成任务中可用的所有 YAML 配置选项。 本文从安全代码分析工具的任务开始。 它以后处理任务结束。

## <a name="anti-malware-scanner-task"></a>反恶意软件扫描器任务

| **输入类型**      | **类型**     | **适用**            | **必需** | **默认值**             | **选项（用于选取列表）**                                   | **说明**                                                                                                                                                                                                                                                                                                                            |
|------------|---------------|-----------------------|----------|---------------------------|----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 输入类型 | 挑选列表 | 通用 | True | Basic | 基本，自定义 | 
| ScanType | 挑选列表 | 输入类型 = 基本 | True | 自定义扫描 | 自定义扫描、全系统扫描、快速扫描、配置扫描 | 用于反恶意软件扫描的扫描类型。
| 文件迪拉 | filePath | 扫描类型 = 自定义扫描 | True | $（生成.暂存目录） |  | 指示要扫描的文件或目录。
| 禁用修复 | boolean | 扫描类型 = 自定义扫描 | False | true |  | 选中时：1） 忽略文件排除项。 2） 扫描存档文件。 3） 检测后不应用操作。 4） 检测后不会写入事件日志条目。 5） 自定义扫描中的检测不会显示在用户界面中。 6） 控制台输出将显示来自自定义扫描的检测列表。
| 引导扇区扫描 | boolean | 扫描类型 = 自定义扫描 | False | false |  | 如果选中，它支持引导扇区扫描。
| 自变量 | 字符串 | 输入类型 = 自定义 | True | -扫描 - 扫描类型 3 -禁用修复 - 文件 $（生成.暂存目录） |  | 命令行参数，其中 -File 的参数是绝对路径，或生成代理上预定义的 $（Build.StagingDirectory） 的相对路径。 注意：如果您未提供 -File 作为最后一个参数的参数，则默认为 $（Build.StagingDirectory）。 您还可以提供 MpCmdRun.exe 工具允许的您自己的参数。<br/><br/>有关此工具的命令行参数的更多详细信息，请输入<strong>-h</strong>或<strong>-h？</strong> 在"参数"字段中并执行生成任务。
| 启用服务 | boolean | 通用 | True | false |  | 如果选中，它将尝试启用 Windows 更新所需的服务，以防它们被禁用。<br/>**注意**：请确保组策略不禁用服务，并且此生成下运行的帐户具有管理员权限。
| 支持登录错误 | boolean | 通用 | True | false |  | 如果选中，它将收集在发生错误时用于诊断的支持文件。 此过程可能需要几分钟时间。<br/>**注意**：请确保此生成运行的帐户具有管理员权限。
| 处理签名更新失败as | 挑选列表 | 通用 | True | 警告 | 错误， 标准， 警告 | 如果在运行时无法更新签名，则使用的日志级别。 当设置为**Error**时，更新签名失败将使生成任务失败。 请注意，签名更新在托管生成代理上失败很常见，即使签名可能相对最新（不到 3 小时）。
| 签名新鲜度 | 挑选列表 | 通用 | True | 截至 | 一天，三天，两天，更新 | 反恶意软件签名的最大允许年龄。 如果签名无法更新且早于此值，则生成任务将根据 **"验证签名年龄作为"** 字段中的选定值执行。 注意：如果您选择 **"最新"，** 则允许签名最多 3 小时。
| 治疗过时签名 | 挑选列表 | 通用 | True | 错误 | 错误， 标准， 警告 | 如果签名年龄早于所选**的反恶意软件签名年龄**，则使用的日志级别。 过期的签名可能会被视为**警告**或**信息，** 以继续反恶意软件扫描，但不建议这样做。

## <a name="binskim-task"></a>宾斯基任务

| **输入类型**      | **类型**     | **适用**            | **必需** | **默认值**             | **选项（用于选取列表）**                                   | **说明**                                                                                                                                                                                                                                                                                                                            |
|------------|---------------|-----------------------|----------|---------------------------|----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 输入类型 | 挑选列表 | 通用 | True | Basic | 基本，命令线 | 
| 参数 | 字符串 | 输入类型 = 命令行 | True |  |  | 要执行的标准 Binskim 命令行参数。 将删除并更换输出路径。<br>有关此工具的命令行参数的更多详细信息，请在"参数"字段中输入**帮助**并执行生成任务。
| 函数 | 挑选列表 | 输入类型 = 基本 | True | 分析 | 分析、转储、导出配置、导出规则 | 
| 分析目标 | filePath | 输入类型 = 基本 && 函数 = 分析 | True | $（生成.工件暂存\*目录） .dll;<br>$（生成.工件暂存\*目录） .exe |  | 一个或多个文件、目录或筛选器模式的指定者，该模式解析为一个或多个要分析的二进制文件。 （''''分离名单）
| 分析SymPath | 字符串 | 输入类型 = 基本 && 函数 = 分析 | False |  |  | 目标符号文件的路径。
| 分析配置路径 | 字符串 | 输入类型 = 基本 && 函数 = 分析 | False | default |  | 策略文件的路径，将用于配置分析。 传递"默认"值以使用内置设置。
| 分析插入路径 | 字符串 | 输入类型 = 基本 && 函数 = 分析 | False |  |  | 将针对分析集中的所有目标调用的插件路径。
| 分析重诅咒 | boolean | 输入类型 = 基本 && 函数 = 分析 | False | true |  | 在评估文件指定参数时，将重新诅咒为子目录。
| 分析韦尔博斯 | boolean | 输入类型 = 基本 && 函数 = 分析 | False | false |  | 发出冗长的输出。 由此产生的全面报告旨在为合规性方案提供适当的证据。
| 分析哈希斯 | boolean | 输入类型 = 基本 && 函数 = 分析 | False | false |  | 输出 SHA-256 分析目标哈希，当发出 SARIF 报告时。
| 分析统计 | boolean | 输入类型 = 基本 && 函数 = 分析 | False | false |  | 生成分析会话的计时和其他统计信息。
| 分析环境 | boolean | 输入类型 = 基本 && 函数 = 分析 | False | false |  | 日志计算机环境运行到输出文件的详细信息。 警告： 此选项将潜在敏感信息（如所有环境变量值）记录到任何已发出的日志。
| 导出规则输出类型 | 挑选列表 | 输入类型 = 基本 && 函数 = 导出规则 | False | 萨里夫 | 萨里夫， 声纳库贝 | 要输出的规则描述符文件的类型。 这将包含在发布安全分析日志生成任务发布的 BinSkim 日志文件夹中。
| 转储目标 | filePath | 输入类型 = 基本 && 函数 = 转储 | True | $（生成.工件暂存目录） |  | 一个或多个文件、目录或筛选器模式的指定者，该模式解析为一个或多个要分析的二进制文件。 （''''分离名单）
| 转储重新诅咒 | boolean | 输入类型 = 基本 && 函数 = 转储 | False | true |  | 在评估文件指定参数时，将重新诅咒为子目录。
| 转储韦尔博斯 | boolean | 输入类型 = 基本 && 函数 = 转储 | False | true |  | 发出冗长的输出。 由此产生的全面报告旨在为合规性方案提供适当的证据。
| 工具版本 | 挑选列表 | 通用 | False | 最新版本 | 1.5.0， 最新， 最新预发布 | 要运行的工具的版本。

## <a name="credential-scanner-task"></a>凭据扫描程序任务

| **输入类型**      | **类型**     | **适用**            | **必需** | **默认值**             | **选项（用于选取列表）**                                   | **说明**                                                                                                                                                                                                                                                                                                                            |
|------------|---------------|-----------------------|----------|---------------------------|----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| outputFormat | 挑选列表 | 通用 | False | pre | csv， 前， 茨夫 | 凭据扫描程序结果文件的输出格式。
| 工具版本 | 挑选列表 | 通用 | False | 最新版本 | 1.27.7， 最新， 最新发布 | 要运行的工具的版本。
| 扫描文件夹 | filePath | 通用 | False | $（生成.源目录） |  | 要扫描凭据的存储库中的文件夹。
| 搜索者文件类型 | 挑选列表 | 通用 | False | 默认 | 自定义、默认、默认和自定义 | 用于查找用于扫描的搜索器文件的选项。
| 搜索者文件 | filePath | 搜索者文件类型 = 自定义或搜索者文件类型 = 默认和自定义 | False |  |  | 凭据扫描程序搜索器配置文件的要执行的检查。 通过提供与逗号分隔的路径列表到凭据扫描程序搜索器文件，可以包含和使用多个值。
| 抑制文件 | filePath | 通用 | False |  |  | 凭据扫描程序抑制文件用于抑制输出日志中的问题。
| 抑制错误 | boolean | 通用 | False | false |  | 抑制的匹配将输出到输出文件 [-O] 匹配。[-f] 而不是默认的抑制输出文件 [-O] 抑制。[-f]。 （默认值为"False"）
| 详细输出 | boolean | 通用 | False | false |  | 输出详细信息。
| batchSize | 字符串 | 通用 | False |  |  | 用于并行运行凭据扫描器的并发线程数。 （默认为 20）<br/>值必须在 1-2147483647 的范围内。
| 正则表达式匹配时间以秒为单位 | 字符串 | 通用 | False |  |  | 放弃检查之前尝试搜索器匹配的时间（以秒为单位）。<br/>添加到``-Co RegexMatchTimeoutInSeconds=<Value>``命令行。
| 文件Scanread缓冲区大小 | 字符串 | 通用 | False |  |  | 读取以字节为单位的内容时的缓冲区大小。 （默认值为 524288）<br/>添加到``-Co FileScanReadBufferSize=<Value>``命令行。
| 最大文件扫描字节 | 字符串 | 通用 | False |  |  | 在内容分析期间，从给定文件读取的最大字节数。 （默认值为 104857600）<br/>添加到``-Co MaxFileScanReadBytes=<Value>``命令行。

## <a name="microsoft-security-risk-detection-task"></a>微软安全风险检测任务

| **输入类型**      | **类型**     | **适用**            | **必需** | **默认值**             | **选项（用于选取列表）**                                   | **说明**                                                                                                                                                                                                                                                                           |
|------------|---------------|-----------------------|----------|---------------------------|----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 服务终结点名称 | 连接的服务：通用 | 通用 | True |  |  | 存储 MSRD 实例 URL（已已加入）和 REST API 访问令牌（从您的帐户设置页生成并允许完全访问您的帐户）的 VSTS 项目中的预配置服务终结点（通用类型）的名称。
| AccountId | 字符串 | 通用 | True |  |  | 识别帐户的 GUID。 可以从帐户 URL 检索它。
| 二进制 URL | 字符串 | 通用 | True |  |  | 模糊计算机用于下载二进制文件的 URL 的分号分隔列表。 确保 URL 是公开的。
| 种子URL | 字符串 | 通用 | False |  |  | 模糊机用于下载种子的 URL 的分号分隔列表。 确保 URL 是公开的。
| OSPlatform类型 | 挑选列表 | 通用 | True | Windows | Linux、Windows | 要运行模糊作业的操作系统平台类型的计算机。
| 视窗版 | 字符串 | OSPlatform 类型 + 窗口 | True | Server 2008 R2 |  | 运行模糊作业的操作系统版本的计算机。
| LinuxEdition | 字符串 | OSPlatform类型 + Linux | True | Redhat |  | 运行模糊作业的操作系统版本的计算机。
| 预提交命令 | 字符串 | 通用 | False |  |  | 在提交模糊作业之前，需要在测试计算机上运行以安装测试目标程序及其依赖项的脚本。
| 种子目录 | 字符串 | 通用 | True |  |  | 包含种子的模糊计算机上目录的路径。 有关详细信息，请参阅[种子文件目录](https://docs.microsoft.com/security-risk-detection/how-to/submit-windows-fuzzing-job/03-choose-seed-files#seed-file-directory)。
| 种子扩展 | 字符串 | 通用 | True |  |  | 种子的文件扩展名。
| 测试驱动程序可执行 | 字符串 | 通用 | True |  |  | 到模糊计算机上的目标可执行文件的路径。 有关详细信息[，请参阅 EPE 的完整路径](https://docs.microsoft.com/security-risk-detection/how-to/submit-windows-fuzzing-job/02-choose-exe#full-path-to-the-epe)。
| 测试驱动程序Exe类型 | 挑选列表 | 通用 | True | x86 | amd64， x86 | 目标可执行文件体系结构。
| 测试驱动程序参数 | 字符串 | 通用 | True | "%测试文件%" |  | 传递给测试目标可执行文件的命令行参数。 请注意 **，"%testfile%"** 符号（包括双引号）将自动替换为测试驱动程序要解析的目标文件的完整路径，并且是必需的。 有关详细信息，请参阅[命令行参数](https://docs.microsoft.com/security-risk-detection/how-to/submit-windows-fuzzing-job/02-choose-exe#command-line-arguments)。
| 关闭自身 | boolean | 通用 | True | true |  | 检查测试驱动程序是否在完成时自行终止（例如，测试驱动程序解析输入文件并立即退出）;取消选中是否需要强制关闭测试驱动程序（例如，测试驱动程序是一个 GUI 应用程序，其主窗口在分析输入后保持打开状态）。 有关详细信息[，请参阅自终止](https://docs.microsoft.com/security-risk-detection/how-to/submit-windows-fuzzing-job/05-scope-exe-lifetime#self-termination)。
| 最大持续时间（秒） | 字符串 | 通用 | True | 5 |  | 测试驱动程序的最大持续时间（以秒为单位）。 提供目标程序解析输入文件所需的最长合理预期时间的估计。 此估计越准确，模糊运行的效率就越高。 有关详细信息，请参阅[最大预期执行持续时间](https://docs.microsoft.com/security-risk-detection/how-to/submit-windows-fuzzing-job/05-scope-exe-lifetime#maximum-expected-execution-duration)。
| 坎伦重复 | boolean | 通用 | True | true |  | 检查测试驱动程序是否可以重复运行，而无需根据持久/共享的全局状态运行。 有关详细信息，请参阅[从头开始运行](https://docs.microsoft.com/security-risk-detection/how-to/submit-windows-fuzzing-job/04-describe-exe-characteristics#runs-from-scratch)。
| 可测试驱动程序重新命名 | boolean | 通用 | True | false |  | 检查测试驱动程序可执行文件是否可以重命名，并且是否仍可以正常工作。 有关详细信息[，请参阅可重命名和并行化](https://docs.microsoft.com/security-risk-detection/how-to/submit-windows-fuzzing-job/04-describe-exe-characteristics#can-be-renamed-and-parallelized)。
| 单一程序 | boolean | 通用 | True | false |  | 检查测试驱动程序是否在单个操作系统进程下运行;如果测试驱动程序在单个操作系统进程下运行。取消选中测试驱动程序是否生成其他进程。 有关详细信息，请参阅[单一进程](https://docs.microsoft.com/security-risk-detection/how-to/submit-windows-fuzzing-job/04-describe-exe-characteristics#single-process)。

## <a name="roslyn-analyzers-task"></a>罗斯林分析器任务

| **输入类型**      | **类型**     | **适用**            | **必需** | **默认值**             | **选项（用于选取列表）**                                   | **说明**                                                                                                                                                                                                                                                                                                                   |
|------------|---------------|-----------------------|----------|---------------------------|----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用户提供构建信息 | 挑选列表 | 通用 | True | auto | 自动， msBuildInfo | 用户提供 MSBuild 版本、MSBuild 体系结构和构建命令行以进行 Roslyn 分析的选项。 如果选择了 **"自动"，** 则此任务将从同一管道中的上一个**MSBuild** **、VSBuild**和/或 **.NET Core（** 用于生成）任务中检索生成信息。
| msBuildVersion | 挑选列表 | 用户提供构建信息 = ms 构建信息 | True | 16.0 | 15.0, 16.0 | MSBuild 版本。
| ms 构建架构 | 挑选列表 | 用户提供构建信息 = ms 构建信息 | True | x86 | 点网核心， x64， x86 | MSBuild 体系结构。 注意：如果生成命令行调用**dotnet.exe 生成**，请选择**Via .Net Core**选项。
| ms 构建命令线 | 字符串 | 用户提供构建信息 = ms 构建信息 | True |  |  | 用于编译解决方案或项目的完整生成命令线。<br/><br/>注意：命令行应以**MSBuild.exe**或**dotnet.exe**的完整路径开头。<br/>该命令将以 $（生成.SourcesDirectory） 作为工作目录运行。
| 规则集名称 | 挑选列表 | 通用 | False | 建议 | 自定义，无，推荐，必需 | 要使用的命名规则集。<br/><br/>如果`Ruleset Configured In Your Visual Studio Project File(s)`选择，将使用在 VS 项目文件中预配置的规则集。 如果`Custom`选择，则可以设置自定义规则集路径选项。
| 规则集版本 | 挑选列表 | 规则集名称 = 必需或规则集名称 = 推荐 | False | 最新版本 | 8.0， 8.1， 8.2， 最新， 最新发布 | 所选 SDL 规则集的版本。
| 自定义规则集 | 字符串 | 规则集名称 = 自定义 | False |  |  | 要使用的规则集的可访问路径。 相对路径将规范化为源存储库的根目录 （`$(Build.SourcesDirectory)`。<br/><br/>如果规则集指定`Rules`设置为`Actions` `Error`，则生成任务将失败。 要使用这样做的规则集，请签入`Continue on error`生成任务的 。 `Control Options`
| 微软分析器版本 | 挑选列表 | 通用 | False | 最新版本 | 2.9.3， 2.9.4， 2.9.6， 最新， 最新发布 | 要运行的[微软.代码分析.FxCopAnalyzers](https://www.nuget.org/packages/Microsoft.CodeAnalysis.FxCopAnalyzers)软件包的版本。
| 抑制文件编译器警告 | filePath | 通用 | False |  |  | 禁止显示 C# 和 VB 编译器警告的抑制文件。<br/><br/>带有每个警告 ID 的纯文本文件列出了一条单独的行。<br/>对于编译器警告，请仅指定警告标识符的数字部分。 例如，1018 将抑制 CS1018，CA1501 将抑制 CA1501。<br/><br/>相对文件路径将追加到源存储库的根目录 （`$(Build.SourcesDirectory)`。

## <a name="tslint-task"></a>TSLint 任务

| **输入类型**      | **类型**     | **适用**            | **必需** | **默认值**             | **选项（用于选取列表）**                                   | **说明**                                                                                                                                                                                                                                                                                                                            |
|------------|---------------|-----------------------|----------|---------------------------|----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 规则库 | 挑选列表 | 通用 | True | 茨林特 | 自定义， 微软， 茨林特 | 所有结果都包括与所选版本的 TSLint（**仅限基本版本**）一起提供的规则。<br/><br/>**仅底座 -** 只有 TSLint 附带的规则。<br/><br/>**包括微软规则 -** 下载[tslint-microsoft-contrib，](https://github.com/Microsoft/tslint-microsoft-contrib)并包括其规则，可用于 TSLint 运行。 选择此选项将隐藏`Type Checking`复选框，因为它是 Microsoft 规则要求并将自动使用的复选框。 它还取消隐藏`Microsoft Contribution Version`字段，允许`tslint-microsoft-contrib`从[npm](https://www.npmjs.com/package/tslint-microsoft-contrib)中选择 版本。<br/><br/>**包括自定义规则 -** 取消隐藏`Rules Directory`字段，该字段接受 TSLint 规则目录的可访问路径，可用于 TSLint 运行。<br/><br/>**注：** 默认值已更改为 tslint，因为许多用户在配置 Microsoft 规则集时遇到问题。 有关特定版本配置，请参阅[GitHub 上的 tslint-microsoft-contrib。](https://github.com/microsoft/tslint-microsoft-contrib)
| 规则目录 | 字符串 | 规则库 = 自定义 | True |  |  | 包含其他 TSLint 规则的可访问目录，可用于 TSLint 运行。
| 规则集 | 挑选列表 | 规则库 ！= 微软 | True | ts推荐 | 自定义， tslatest， ts推荐 | 定义要针对 TypeScript 文件运行的规则。<br/><br/>**[茨林特：最新](https://github.com/palantir/tslint/blob/master/src/configs/latest.ts) -** 扩展`tslint:recommended`并不断更新，以在每个 TSLint 版本中包括最新规则的配置。 由于启用了导致代码中绒毛故障的新规则，使用此配置可能会跨次要版本引入重大更改。 当 TSLint 达到主要版本凹凸`tslint:recommended`时，将更新为 与`tslint:latest`相同。<br/><br/>**[茨林特：推荐](https://github.com/palantir/tslint/blob/master/src/configs/recommended.ts) -** TSLint 鼓励一套稳定、有点有意见的规则来编程一般 TypeScript 编程。 此配置遵循`semver`，因此*不会在*次要版本或修补程序版本中有重大更改。
| 规则集微软 | 挑选列表 | 规则库 = 微软 | True | mssdl 要求 | 自定义， 推荐， mssdl 推荐， mssdl 要求， tssdl， tslatest， ts 推荐 | 定义要针对 TypeScript 文件运行的规则。<br/><br/>**[微软：需要](https://github.com/Microsoft/tslint-microsoft-contrib/wiki/TSLint-and-the-Microsoft-Security-Development-Lifecycle) -sdl**运行 tslint 和 tslint-microsoft-contrib 规则提供的所有可用检查，以满足*所需的*[安全开发生命周期 （SDL）](https://www.microsoft.com/sdl/)策略。<br/><br/>**[微软：sdl 推荐](https://github.com/Microsoft/tslint-microsoft-contrib/wiki/TSLint-and-the-Microsoft-Security-Development-Lifecycle) -** 运行 tslint 和 tslint-microsoft-contrib 规则提供的所有可用检查，这些检查满足*所需的和推荐*[的安全开发生命周期 （SDL）](https://www.microsoft.com/sdl/)策略。<br/><br/>**[微软：推荐](https://github.com/Microsoft/tslint-microsoft-contrib/blob/master/recommended_ruleset.js) -** tslint-microsoft-contrib 规则的创建者推荐的所有检查。 这包括安全和非安全检查。<br/><br/>**[茨林特：最新](https://github.com/palantir/tslint/blob/master/src/configs/latest.ts) -** 扩展`tslint:recommended`并不断更新，以在每个 TSLint 版本中包括最新规则的配置。 由于启用了导致代码中绒毛故障的新规则，使用此配置可能会跨次要版本引入重大更改。 当 TSLint 达到主要版本凹凸`tslint:recommended`时，将更新为 与`tslint:latest`相同。<br/><br/>**[茨林特：推荐](https://github.com/palantir/tslint/blob/master/src/configs/recommended.ts) -** TSLint 鼓励一套稳定、有点有意见的规则来编程一般 TypeScript 编程。 此配置遵循`semver`，因此*不会在*次要版本或修补程序版本中有重大更改。
| 规则集文件 | 字符串 | 规则集 = 自定义或规则集微软 = 自定义 | True |  |  | 指定要运行的规则的[配置文件](https://palantir.github.io/tslint/usage/cli/)。<br/><br/>配置的路径将添加为[自定义规则的](https://palantir.github.io/tslint/develop/custom-rules/)路径。
| 文件选择类型 | 挑选列表 | 通用 | True | 文件Glob | 文件Glob，项目文件 | 
| 文件 | 字符串 | 文件选择类型 = 文件 Glob | True | **\*.ts |  | 决定要处理的文件的 file [glob。](https://www.npmjs.com/package/glob) 路径与`Build.SourcesDirectory`值相关。<br/><br/>Microsoft 的"贡献"库需要使用项目文件。 如果将 Microsoft 的"贡献"库与`File Glob Pattern`选项一起使用，将为您生成项目文件。
| ECMAScript 版本 | 挑选列表 | 文件选择类型 = 文件Glob && 规则库 = 微软 | True | ES3 | ES2015、 ES2016、 ES2017、 ES3、 ES5、 ES6、 ESNext | 使用 TypeScript 编译器配置的 ECMAScript 的目标版本。 使用项目文件时，这是 TypeScript tsconfig.json 文件的编译器选项.target 字段。
| Project | 字符串 | 文件选择类型 = 项目文件 | True |  |  | 指定要运行 TSLint 的 TypeScript 文件的[tsconfig.json](http://www.typescriptlang.org/docs/handbook/tsconfig-json.html)文件的路径。 路径与`Build.SourcesDirectory`值相关。
| 类型检查 | boolean | 规则库 ！= 微软 && 文件选择类型 = 项目文件 | False | true |  | 运行林排规则时启用类型检查器。
| 排除文件 | 字符串 | 通用 | False |  |  | 一个[glob，](https://www.npmjs.com/package/glob)指示要从林丁中排除的文件。 路径与`Build.SourcesDirectory`值相关。 可以用分号分隔多个值。
| OutputFormat | 挑选列表 | 通用 | True | json | 检查风格， 代码框架， 文件列表， json， msbuild， pmd， 散文， 时尚， 冗长， vso | 用于生成输出[的要用的事项](https://palantir.github.io/tslint/formatters/)。 请注意，JSON 格式与后分析兼容。
| 节点内存 | 字符串 | 通用 | False |  |  | 用于运行 TSLint 的 MB 中用于分配到节点的显式内存量。 示例： 8000<br/><br/>映射到节点的`--max_old_space=<value>`CLI 选项，该选项为`v8 option`。
| 工具版本 | 挑选列表 | 规则库 ！= 微软 | True | 最新 | 4.0.0、 4.0.1、 4.0.2、 4.1.0、 4.1.1、 4.2.0、 4.3.0、 4.3.1、 4.4.0、 4.4.1、 4.4.2、 4.5.0、 4.5.1、 5.0.0、 5.1.0、 5.2.0、 5.3.0、 5.4.2、 5.4.1、 5.4.2、 5.4.3、 5.5.0、 5.5.0、 5.4.0、 5.4.0、 5.4.1、 5.4.0、 5.4.0、 5.4.1、 5.4.0、 5.4.3、 5.5.0、 | 要下载并运行的 TSLint[版本](https://github.com/palantir/tslint/releases)。
| 类型脚本版本 | 挑选列表 | 通用 | True | 最新 | 0.8.0, 0.8.1, 0.8.2, 0.8.3, 0.9.0, 0.9.1, 0.9.5, 0.9.7, 1.0.0, 1.0.1, 1.3.0, 1.4.1, 1.5.3, 1.6.2, 1.7.3, 1.7.5, 1.8.0, 1.8.10, 1.8.2, 1.8.5, 1.8.6, 1.8.7, 1.8.9, 1.9.0, 2.0.0, 2.0.10, 2.0.2, 2.0.3, 2.0.6, 2.0.7, 2.0.8, 2.0.9, 2.1.1, 2.1.4, 2.1.5, 2.1.6, 2.2.0,2.2.1， 自定义， 最新 | 要下载和使用[的类型记的版本](https://www.npmjs.com/package/typescript)。<br/>**注：** 这必须是与编译代码所用的 TypeScript 版本相同。
| 类型脚本版本自定义 | 字符串 | 类型脚本版本 = 自定义 | True | 最新 |  | 要下载和使用[的类型记的版本](https://www.npmjs.com/package/typescript)。<br/>**注：** 这必须是与编译代码所用的 TypeScript 版本相同。
| 微软公司 | 挑选列表 | 规则库 = 微软 |  | 最新 | 4.0.0、 4.0.1、 5.0.0、 5.0.1， 最新 | 要下载和使用[tslint-microsoft-contrib（SDL](https://www.npmjs.com/package/tslint-microsoft-contrib)规则）的版本。</br>**注：**[将](https://www.npmjs.com/package/tslint)选择与为 tslint-microsoft-contrib 选择的版本兼容的版本。 此生成任务将封闭对 tslint-microsoft-contrib 的更新，直到可以进行一段时间的测试。

## <a name="publish-security-analysis-logs-task"></a>发布安全分析日志任务

| **输入类型**      | **类型**     | **适用**            | **必需** | **默认值**             | **选项（用于选取列表）**                                   | **说明**                                                                                                                                                                                                                                                                                                                            |
|------------|---------------|-----------------------|----------|---------------------------|----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 项目名称 | 字符串 | 通用 | True | 代码分析日志 |  | 要创建的项目的名称。
| 项目类型 | 挑选列表 | 通用 | True | 容器 | 容器，文件路径 | 要创建的项目的类型。
| TargetPath | 字符串 | 项目类型 = 文件路径 | False | \\我的共享\$（生成.定义名称）<br>\$（生成.生成编号） |  | 要复制到的文件共享
| 所有工具 | boolean | 通用 | True | true |  | 发布由所有安全开发工具生成任务生成的结果。
| 反恶意软件 | boolean | 所有工具 = 错误 | True | true |  | 发布由反恶意软件生成任务生成的结果。
| 宾斯基姆 | boolean | 所有工具 = 错误 | True | true |  | 发布由 BinSkim 生成任务生成的结果。
| 克雷斯坎 | boolean | 所有工具 = 错误 | True | true |  | 发布由凭据扫描程序生成任务生成的结果。
| MSRD | boolean | 所有工具 = 错误 | True | true |  | 发布 MSRD 生成任务启动的 MSRD 作业的作业信息和作业 URL。 MSRD 作业运行时间长，并提供单独的报告。
| 罗斯林分析器 | boolean | 所有工具 = 错误 | True | false |  | 发布由罗斯林分析器生成任务生成的结果。
| 茨林特 | boolean | 所有工具 = 错误 | True | true |  | 发布由 TSLint 生成任务生成的结果。 请注意，报表仅支持 JSON 格式的 TSLint 日志。 如果您选择了其他格式，请相应地更新您的 TSLint 生成任务。
| 工具日志未找到操作 | 挑选名单 | 通用 | True | Standard | 错误， 无， 标准， 警告 | 找不到所选工具的日志时执行的操作（如果选中了所有工具，则执行任何工具），这意味着该工具未运行。<br/><br/>**选项：**<br/>**无：** 消息写入详细输出流，只能通过将 VSTS 变量**系统设置为** **true**来访问。<br/>**标准：（** 默认）写入一个标准输出消息，该消息未找到该工具的日志。<br/>**警告：** 写入一条黄色警告消息，指出该工具未找到日志，该工具在生成摘要页上显示为警告。<br/>**错误：** 写入红色错误消息并引发异常，破坏生成。 使用此选项可确保使用单个工具选项来确保运行哪些工具。

## <a name="security-report-task"></a>安全报告任务

| **输入类型**      | **类型**     | **适用**            | **必需** | **默认值**             | **选项（用于选取列表）**                                   | **说明**                                                                                                                                                                                                                                                                                                                            |
|------------|---------------|-----------------------|----------|---------------------------|----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| VstsConsole | boolean | 通用 | False | true |  | 将结果写入管道控制台。
| 茨夫文件 | boolean | 通用 | False | true |  | 生成 tsv 文件（选项卡分隔值），每个找到的结果有一行，并生成分隔结果信息的选项卡。
| HtmlFile | boolean | 通用 | False | true |  | 生成 html 报告文件。
| 所有工具 | boolean | 通用 | True | false |  | 报告由所有安全开发工具生成任务生成的结果。
| 宾斯基姆 | boolean | 所有工具 = 错误 | True | false |  | 报告 BinSkim 生成任务生成的结果。
| 宾斯基基·鲁蒙 | 挑选列表 | 所有工具 = 真或 BinSkim = true | True | 错误 | 错误，警告上方 | 要报告的结果级别。
| 克雷斯坎 | boolean | 所有工具 = 错误 | True | false |  | 报告由凭据扫描程序生成任务生成的结果。
| MSRD | boolean | 所有工具 = 错误 | True | false |  | 报告 MSRD 生成任务启动的 MSRD 作业的作业信息和作业 URL。 MSRD 作业运行时间长，并提供单独的报告。
| 罗斯林分析器 | boolean | 所有工具 = 错误 | True | false |  | 报告由罗斯林分析器生成任务生成的结果。
| 罗斯林分析器突破 | 挑选列表 | 所有工具 = 真或罗斯林分析器 = 真 | True | 错误 | 错误，警告上方 | 要报告的结果级别。
| 茨林特 | boolean | 所有工具 = 错误 | True | false |  | 报告由 TSLint 生成任务生成的结果。 请注意，报表仅支持 JSON 格式的 TSLint 日志。 如果您选择了其他格式，请相应地更新您的 TSLint 生成任务。
| 茨林特·萨隆 | 挑选列表 | 所有工具 = 真或 TSlint = 真 | True | 错误 | 错误，警告上方 | 要报告的结果级别。
| 工具日志未找到操作 | 挑选名单 | 通用 | True | Standard | 错误， 无， 标准， 警告 | 找不到所选工具的日志时执行的操作（如果选中了所有工具，则执行任何工具），这意味着该工具未运行。<br/><br/>**选项：**<br/>**无：** 消息写入详细输出流，只能通过将 VSTS 变量**系统设置为** **true**来访问。<br/>**标准：（** 默认）写入一个标准输出消息，该消息未找到该工具的日志。<br/>**警告：** 写入一条黄色警告消息，指出该工具未找到日志，该工具在生成摘要页上显示为警告。<br/>**错误：** 写入红色错误消息并引发异常，破坏生成。 使用此选项可确保使用单个工具选项来确保运行哪些工具。
| 自定义日志文件夹 | 字符串 | 通用 | False |  |  | 分析工具日志所在的基本文件夹;在此路径下，各个日志文件将位于以每个工具命名的子文件夹中。

## <a name="post-analysis-task"></a>分析后任务

| **输入类型**      | **类型**     | **适用**            | **必需** | **默认值**             | **选项（用于选取列表）**                                   | **说明**                                                                                                                                                                                                                                                                                                                            |
|------------|---------------|-----------------------|----------|---------------------------|----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 所有工具 | boolean | 通用 | True | false |  | 如果任何 Microsoft 安全代码分析生成任务发现任何问题，则中断生成。
| 宾斯基姆 | boolean | 所有工具 = 错误 | True | false |  | 根据您选择的"中断打开"选项，如果发现任何 BinSkim 问题，则中断生成。
| 宾斯基基·鲁蒙 | 挑选列表 | 所有工具 = 真或 BinSkim = true | True | 错误 | 错误，警告上方 | 要中断生成的问题级别。
| 克雷斯坎 | boolean | 所有工具 = 错误 | True | false |  | 如果发现任何凭据扫描程序问题，则中断生成。
| 罗斯林分析器 | boolean | 所有工具 = 错误 | True | false |  | 如果发现任何罗斯林分析器问题，则中断生成。
| 罗斯林分析器突破 | 挑选列表 | 所有工具 = 真或罗斯林分析器 = 真 | True | 错误 | 错误，警告上方 | 要中断生成的问题级别。
| 茨林特 | boolean | 所有工具 = 错误 | True | false |  | 如果发现任何 TSLint 问题，则中断生成。 请注意，只有 JSON 格式的 TSLint 日志支持用于后期分析。 如果您选择了其他格式，请相应地更新您的 TSLint 生成任务。
| 茨林特·萨隆 | 挑选列表 | 所有工具 = 真或 TSlint = 真 | True | 错误 | 错误，警告上方 | 要中断生成的问题级别。
| VstsConsole | boolean | 通用 | False | true |  | 将结果写入管道控制台。
| 工具日志未找到操作 | 挑选名单 | 通用 | True | Standard | 错误， 无， 标准， 警告 | 找不到所选工具的日志时执行的操作（如果选中了所有工具，则执行任何工具），这意味着该工具未运行。<br/><br/>**选项：**<br/>**无：** 消息写入详细输出流，只能通过将 VSTS 变量**系统设置为** **true**来访问。<br/>**标准：（** 默认）写入一个标准输出消息，该消息未找到该工具的日志。<br/>**警告：** 写入一条黄色警告消息，指出该工具未找到日志，该工具在生成摘要页上显示为警告。<br/>**错误：** 写入红色错误消息并引发异常，破坏生成。 使用此选项可确保使用单个工具选项来确保运行哪些工具。

## <a name="next-steps"></a>后续步骤

如果您对安全代码分析扩展和所提供的工具有任何疑问，请查看[我们的常见问题页面](security-code-analysis-faq.md)。