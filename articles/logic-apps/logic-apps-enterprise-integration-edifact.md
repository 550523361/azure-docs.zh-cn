---
title: "企业集成与 EDIFACT | Microsoft Docs"
description: "了解如何使用 EDIFACT 协议创建逻辑应用"
services: logic-apps
documentationcenter: .net,nodejs,java
author: jeffhollan
manager: anneta
editor: cgronlun
ms.assetid: 2257d2c8-1929-4390-b22c-f96ca8b291bc
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2016
ms.author: jonfan
translationtype: Human Translation
ms.sourcegitcommit: dc8c9eac941f133bcb3a9807334075bfba15de46
ms.openlocfilehash: 30c26d1fb2dfb7c458789e70f4f8d1a6c39cd0ca


---
# <a name="enterprise-integration-with-edifact"></a>企业集成与 EDIFACT
> [!NOTE]
> 此页介绍逻辑应用的 EDIFACT 功能。 有关详细信息，请参阅 [X12](logic-apps-enterprise-integration-x12.md)。
> 
> 

## <a name="create-an-edifact-agreement"></a>创建 EDIFACT 协议
首先需要创建 EDIFACT 协议并将它存储在集成帐户中，然后才能交换 EDIFACT 消息。 以下步骤将逐步引导你完成创建 EDIFACT 协议的过程。

### <a name="heres-what-you-need-before-you-get-started"></a>以下是开始之前需要满足的条件
* 在 Azure 订阅中定义了[集成帐户](../logic-apps/logic-apps-enterprise-integration-accounts.md)  
* 已在集成帐户中定义了至少两个[合作伙伴](logic-apps-enterprise-integration-partners.md)  

> [!NOTE]
> 创建协议时，你与合作伙伴之间接收/发送的消息中的内容必须与协议类型匹配。    
> 
> 

[创建了集成帐户](../logic-apps/logic-apps-enterprise-integration-accounts.md)并[添加了合作伙伴](logic-apps-enterprise-integration-partners.md)之后，可以通过执行以下步骤来创建 EDIFACT 协议：  

### <a name="from-the-azure-portal-home-page"></a>在 Azure 门户主页中
登录到 [Azure 门户](http://portal.azure.com "Azure 门户")之后：  

1. 从左侧菜单中选择“浏览”。  

> [!TIP]
> 如果看不到“浏览”链接，则可能需要先展开菜单。 可通过选择位于折叠菜单左上角的“显示菜单”链接来执行此操作。  
> 
> 

![](./media/logic-apps-enterprise-integration-edifact/edifact-0.png)    

1. 在筛选器搜索框中输入“集成”，然后从结果列表中选择“集成帐户”。       
   ![](./media/logic-apps-enterprise-integration-edifact/edifact-1-3.png)    
2. 在打开的“集成帐户”边栏选项卡中，选择将在其中创建协议的集成帐户。 如果看不到任何集成帐户列表，请[首先创建一个](../logic-apps/logic-apps-enterprise-integration-accounts.md "All about integration accounts")。  
   ![](./media/logic-apps-enterprise-integration-edifact/edifact-1-4.png)  
3. 选择“协议”磁贴。 如果看不到磁贴协议，请首先添加它。   
   ![](./media/logic-apps-enterprise-integration-edifact/edifact-1-5.png)     
4. 在打开的“协议”边栏选项卡中，选择“添加”按钮。  
   ![](./media/logic-apps-enterprise-integration-edifact/edifact-agreement-2.png)  
5. 在打开的“协议”边栏选项卡，为协议输入“名称”，然后选择 EDIFACT 的“协议类型”、“主机合作伙伴”、“主机标识”、“来宾合作伙伴”、“来宾标识”。  
   ![](./media/logic-apps-enterprise-integration-edifact/edifact-1.png)  
6. 设置协议属性之后，选择“接收设置”以配置通过此协议收到的消息的处理方式。  
7. “接收设置”控件划分为以下部分，包括“标识符”、“确认”、“架构”、“控制编号”、“验证”、“内部设置”和“批处理”。 基于你将与之交换消息的合作伙伴与你之间的协议来配置这些属性。 下面是这些控件的视图，请基于你希望此协议如何处理标识和处理传入消息来配置它们：  
   ![](./media/logic-apps-enterprise-integration-edifact/edifact-2.png)  
8. 选择“确定”按钮以保存设置。  

### <a name="identifiers"></a>标识符
| 属性 | 说明 |
| --- | --- |
| UNB6.1 (收件人引用密码) |输入范围在 1 到 14 个字符之间的字母数字值。 |
| UNB6.2 (收件人引用限定符) |输入包含最少一个字符且最多二个字符的字母数字值。 |

### <a name="acknowledgments"></a>致谢
| 属性 | 说明 |
| --- | --- |
| 接收消息(CONTRL) |选中此复选框可向交换发送方返回技术 (CONTRL) 确认。 该确认会基于协议的“发送设置”发送给交换发送方。 |
| 确认(CONTRL) |选中此复选框可向交换发送方返回功能 (CONTRL) 确认。该确认会基于协议的“发送设置”发送给交换发送方。 |

### <a name="schemas"></a>架构
| 属性 | 说明 |
| --- | --- |
| UNH2.1 (类型) |选择事务集类型。 |
| UNH2.2 (版本) |输入消息版本号。 （最少一个字符；最多三个字符）。 |
| UNH2.3 (发布) |输入消息发布号。 （最少一个字符；最多三个字符）。 |
| UNH2.5 (协会分配的代码) |输入分配的代码。 （最多六个字符。 必须是字母数字）。 |
| UNG2.1 (应用发送方 ID) |输入包含最少一个字符且最多 35 个字符的字母数字值。 |
| UNG2.2 (应用发送方代码限定符) |输入包含最多四个字符的字母数字值。 |
| 架构 |从关联集成帐户中选择要使用的以前上传的架构。 |

### <a name="control-numbers"></a>控制编号
| 属性 | 说明 |
| --- | --- |
| 不允许交换控制编号重复项 |选中此复选框可阻止重复交换。 如果选中，则 EDIFACT 解码操作会检查收到的交换的交换控制编号 (UNB5) 是否与以前处理的交换控制编号不匹配。 如果检测到匹配项，则不处理交换。 |
| 检查重复的 UNB5 的时间间隔为每(天) |如果选择不允许重复的交换控制编号，则可以通过为“检查重复的 UNB5 的时间间隔为每(天)”选项提供适当的值，来指定执行检查的间隔天数。 |
| 不允许组合控制编号重复项 |选中此复选框可阻止具有重复组控制编号 (UNG5) 的交换。 |
| 不允许事务集控制编号重复项 |选中此复选框可阻止具有重复事务集控制编号 (UNH1) 的交换。 |
| EDIFACT 确认控制编号 |若要指定要在确认中使用的事务集引用编号，请为前缀、引用编号的范围和后缀输入值。 |

### <a name="validations"></a>验证
| 属性 | 说明 |
| --- | --- |
| 消息类型 |指定消息类型。 完成每个验证行时，会自动添加另一行。 如果未指定任何规则，则标记为默认值的行会用于进行验证。 |
| EDI 验证 |选中此复选框可按照架构的 EDI 属性、长度限制、空数据元素和尾部分隔符的定义，对数据类型执行 EDI 验证。 |
| 扩展验证 |选中此复选框可启用从交换发送方接收的交换的扩展 (XSD) 验证。 这包括验证字段长度、可选性和重复次数的验证以及 XSD 数据类型验证。 |
| 允许前导零/尾随零 |选择“允许”可允许前导/尾随零；选择“禁止”可禁止前导/尾随零，选择“剪裁”可剪裁前导和尾随零。 |
| 剪裁前导零/尾随零 |选中此复选框可剪裁任何前导或尾随零 |
| 尾部分隔符策略 |如果不希望在从交换发送方接收的交换中允许尾部分隔符，则选择“不允许”。 如果交换包含尾部分隔符，则会将它声明为无效。 选择“可选”可接受包含或不包含尾部分隔符的交换。 如果收到的交换必须包含尾部分隔符，则选择“强制”。 |

### <a name="internal-settings"></a>内部设置
| 属性 | 说明 |
| --- | --- |
| 如果允许尾随分隔符，请创建空的 XML 标记 |选中此复选框可使交换发送方包含用于尾随分隔符的空 XML 标记。 |
| 入站批处理 |选项包括：</br></br>**将交换拆分为事务集 - 出错时挂起事务集**：通过向事务集应用相应信封，将交换中的每个事务集分析为单独 XML 文档。 使用此选项时，如果交换中的一个或多个事务集未能通过验证，则只挂起这些事务集。 将交换拆分为事务集 - 出错时挂起交换：通过应用相应信封，将交换中的每个事务集分析为单独 XML 文档。 使用此选项时，如果交换中的一个或多个事务集未能通过验证，则挂起整个交换。</br></br>**保留交换 - 出错时挂起事务集**：使交换保持不变，从而为整个批处理交换创建 XML 文档。 使用此选项时，如果交换中的一个或多个事务集未能通过验证，则只挂起这些事务集，同时处理所有其他事务集。</br></br>**保留交换 - 出错时挂起交换**：使交换保持不变，从而为整个批处理交换创建 XML 文档。 使用此选项时，如果交换中的一个或多个事务集未能通过验证，则挂起整个交换。 |

协议已准备好处理符合所选设置的传入消息。

配置用于处理发送给合作伙伴的消息的设置：  

1. 选择“发送设置”以配置通过此协议发送的消息的处理方式。  

“发送设置”控件划分为以下部分，包括“标识符”、“确认”、“架构”、“信封”、“字符集和分隔符”、“控制编号”和“验证”。 

下面是这些控件的视图。 基于你希望如何处理通过此协议发送给合作伙伴的消息来进行选择：   
![](./media/logic-apps-enterprise-integration-edifact/edifact-3.png)    

1. 选择“确定”按钮以保存设置。  

### <a name="identifiers"></a>标识符
| 属性 | 说明 |
| --- | --- |
| UNB1.2 (语法版本) |选择介于 **1** 和 **4** 之间的值。 |
| UNB2.3 (发件人反向路由地址) |输入包含最少一个字符且最多 14 个字符的字母数字值。 |
| UNB3.3 (收件人反向路由地址) |输入包含最少一个字符且最多 14 个字符的字母数字值。 |
| UNB6.1 (收件人引用密码) |输入包含最少一个字符且最多 14 个字符的字母数字值。 |
| UNB6.2 (收件人引用限定符) |输入包含最少一个字符且最多二个字符的字母数字值。 |
| UNB7 (应用程序引用 ID) |输入包含最少一个字符且最多 14 个字符的字母数字值 |

### <a name="acknowledgment"></a>确认
| 属性 | 说明 |
| --- | --- |
| 接收消息(CONTRL) |如果主机合作伙伴期望收到技术 (CONTRL) 确认，则选中此复选框。 此设置指定发送消息的主机合作伙伴从来宾合作伙伴请求确认。 |
| 确认(CONTRL) |如果主机合作伙伴期望收到功能 (CONTRL) 确认，则选中此复选框。 此设置指定发送消息的主机合作伙伴从来宾合作伙伴请求确认。 |
| 为已接受的事务集生成 SG1/SG4 循环 |如果选择请求功能确认，则选中此复选框可强制为已接受的事务集在功能 CONTRL 确认中生成 SG1/SG4 循环。 |

### <a name="schemas"></a>架构
| 属性 | 说明 |
| --- | --- |
| UNH2.1 (类型) |选择事务集类型。 |
| UNH2.2 (版本) |输入消息版本号。 |
| UNH2.3 (发布) |输入消息发布号。 |
| 架构 |选择要使用的架构。 架构位于集成帐户中。 若要访问架构，请先将集成帐户链接到逻辑应用。 |

### <a name="envelopes"></a>信封
| 属性 | 说明 |
| --- | --- |
| UNB8 (Processing Priority Code) |输入长度不超过一个字符的字母数字值。 |
| UNB10 (通信协议) |输入包含最少一个字符且最多 40 个字符的字母数字值。 |
| UNB11 (测试指示器) |选中此复选框可指示生成的交换是测试数据 |
| 应用 UNA 段(服务字符串建议) |选中此复选框可为要发送的交换生成 UNA 段。 |
| 应用 UNG 段(功能组标头) |选中此复选框可在发送给来宾合作伙伴的消息的功能组标头中创建分组段。 以下值用于创建 UNG 段：</br></br>对于“UNG1”，输入包含最少一个字符且最多六个字符的字母数字值。</br></br>对于“UNG2.1”，输入包含最少一个字符且最多 35 个字符的字母数字值。</br></br>对于“UNG2.2”，输入包含最多四个字符的字母数字值。</br></br>对于“UNG3.1”，输入包含最少一个字符且最多 35 个字符的字母数字值。</br></br>对于“UNG3.2”，输入包含最多四个字符的字母数字值。</br></br>对于“UNG6”，输入包含最少一个字符且最多三个字符的字母数字值。</br></br>对于“UNG7.1”，输入包含最少一个字符且最多三个字符的字母数字值。</br></br>对于“UNG7.2”，输入包含最少一个字符且最多三个字符的字母数字值。</br></br>对于“UNG7.3”，输入包含最少 1 个字符且最多 6 个字符的字母数字值。</br></br>对于“UNG8”，输入包含最少一个字符且最多 14 个字符的字母数字值。 |

### <a name="character-sets-and-separators"></a>字符集和分隔符
除了字符集，可以输入要用于每种消息类型的不同分隔符集。 如果没有为给定消息架构指定字符集，则使用默认字符集。

| 属性 | 说明 |
| --- | --- |
| UNB1.1 (系统标识符) |选择要应用于传出交换的 EDIFACT 字符集。 |
| 架构 |从下拉列表中选择架构。 每行完成时，会添加一个新行。 对于所选架构，选择要使用的分隔符集：</br></br>**组件元素分隔符** – 输入单个字符以分隔复合数据元素。</br></br>**数据元素分隔符** – 输入单个字符以分隔复合数据元素中的简单数据元素。</br></br></br></br>**替换字符** – 如果有效负载数据包含还用作数据、段或组件分隔符的字符，则选中此复选框。 随后可以输入替换字符。 生成出站 EDIFACT 消息时，有效负载数据中分隔符的所有实例都会替换为指定字符。</br></br>**段终止符** – 输入单个字符以指示 EDI 段的结尾。</br></br>**后缀** – 选择与段标识符一起使用的字符。 如果指定了后缀，则段终止符数据元素可以为空。 如果段终止符保留为空，则必须指定后缀。 |

### <a name="control-numbers"></a>控制编号
| 属性 | 说明 |
| --- | --- |
| UNB5 (交换控制编号) |输入前缀、交换控制编号的值范围和后缀。 这些值用于生成传出交换。 前缀和后缀是可选的；控制编号是必需的。 控制编号对于每个新消息递增；前缀和后缀保持不变。 |
| UNG5 (组控制编号) |输入前缀、交换控制编号的值范围和后缀。 这些值用于生成组控制编号。 前缀和后缀是可选的；控制编号是必需的。 控制编号对于每个新消息递增，直到达到最大值；前缀和后缀保持不变。 |
| UNH1 (消息标头引用编号) |输入前缀、交换控制编号的值范围和后缀。 这些值用于生成消息标头引用编号。 前缀和后缀是可选的；引用编号是必需的。 引用编号对于每个新消息递增；前缀和后缀保持不变。 |

### <a name="validations"></a>验证
| 属性 | 说明 |
| --- | --- |
| 消息类型 |选择此选项可对交换接收方启用验证。 此验证对事务集数据元素执行 EDI 验证，会验证数据类型、长度限制以及空数据元素和尾部分隔符。 |
| EDI 验证 |选中此复选框可按照架构的 EDI 属性、长度限制、空数据元素和尾部分隔符的定义，对数据类型执行 EDI 验证。 |
| 扩展验证 |选择此选项可启用从交换发送方接收的交换的扩展验证。 这包括验证字段长度、可选性和重复次数的验证以及 XSD 数据类型验证。 可以在未启用 EDI 验证的情况下启用扩展验证，反之亦然。 |
| 允许前导零/尾随零 |选择此选项可指定，如果 EDI 交换中的数据元素由于尾随空格而不符合其长度要求，但是在删除它们之后会符合其长度要求，则从某方收到的 EDI 交换会通过验证。 |
| 剪裁前导零/尾随零 |选择此选项会剪裁前导零和尾随零。 |
| 尾部分隔符 |选择此选项可指定，如果 EDI 交换中的数据元素由于前导（或尾随）零或尾随空格而不符合其长度要求，但是在删除它们之后会符合其长度要求，则从某方收到的 EDI 交换会通过验证。</br></br>如果不希望在从交换发送方接收的交换中允许尾部分隔符，则选择“不允许”。 如果交换包含尾部分隔符，则会将它声明为无效。</br></br>选择“可选”可接受包含或不包含尾部分隔符的交换。</br></br>如果收到的交换必须包含尾部分隔符，则选择“强制”。 |

在打开的边栏选项卡上选择“确定”之后：  

1. 在“集成帐户”边栏选项卡上选择“协议”磁贴，会看到列出新添加的协议。  
   ![](./media/logic-apps-enterprise-integration-edifact/edifact-4.png)   

## <a name="learn-more"></a>了解详细信息
* [了解有关 Enterprise Integration Pack 的详细信息](logic-apps-enterprise-integration-overview.md "了解 Enterprise Integration Pack")  




<!--HONumber=Jan17_HO3-->


