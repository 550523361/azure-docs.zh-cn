---
title: "X12 和 Enterprise Integration Pack 概述 | Microsoft Docs"
description: "了解如何使用 X12 协议创建逻辑应用"
services: logic-apps
documentationcenter: .net,nodejs,java
author: msftman
manager: anneta
editor: cgronlun
ms.assetid: 7422d2d5-b1c7-4a11-8c9b-0d8cfa463164
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/08/2016
ms.author: deonhe
translationtype: Human Translation
ms.sourcegitcommit: dc8c9eac941f133bcb3a9807334075bfba15de46
ms.openlocfilehash: 0d4e716242ce2474e0d8097cfbaa4bb546004ed9


---
# <a name="enterprise-integration-with-x12"></a>企业集成与 X12
> [!NOTE]
> 此页介绍逻辑应用的 X12 功能。 有关 EDIFACT 的信息，请单击[此处](../logic-apps/logic-apps-enterprise-integration-edifact.md)。
> 
> 

## <a name="create-an-x12-agreement"></a>创建 X12 协议
首先需要创建 X12 协议并将它存储在集成帐户中，然后才能交换 X12 消息。 以下步骤将逐步引导你完成创建 X12 协议的过程。

### <a name="heres-what-you-need-before-you-get-started"></a>以下是开始之前需要满足的条件
* 在 Azure 订阅中定义了[集成帐户](../logic-apps/logic-apps-enterprise-integration-accounts.md)  
* 已在集成帐户中定义了至少两个[合作伙伴](../logic-apps/logic-apps-enterprise-integration-partners.md)  

> [!NOTE]
> 创建协议时，协议文件中的内容必须与协议类型匹配。    
> 
> 

[创建了集成帐户](../logic-apps/logic-apps-enterprise-integration-accounts.md)并[添加了合作伙伴](../logic-apps/logic-apps-enterprise-integration-partners.md)之后，可以通过执行以下步骤来创建 X12 协议：  

### <a name="from-the-azure-portal-home-page"></a>在 Azure 门户主页中
登录到 [Azure 门户](http://portal.azure.com "Azure 门户")之后：  

1. 从左侧菜单中选择“浏览”。  

> [!TIP]
> 如果看不到“浏览”链接，则可能需要先展开菜单。 可通过选择位于折叠菜单左上角的“显示菜单”链接来执行此操作。  
> 
> 

![](./media/logic-apps-enterprise-integration-overview/overview-1.png)    

1. 在筛选器搜索框中输入“集成”，然后从结果列表中选择“集成帐户”。       
   ![](./media/logic-apps-enterprise-integration-x12/x12-1-3.png)    
2. 在打开的“集成帐户”边栏选项卡中，选择将在其中创建协议的集成帐户。 如果看不到任何集成帐户列表，请[首先创建一个](../logic-apps/logic-apps-enterprise-integration-accounts.md "All about integration accounts")。  
   ![](./media/logic-apps-enterprise-integration-x12/x12-1-4.png)  
3. 选择“协议”磁贴。 如果看不到磁贴协议，请首先添加它。   
   ![](./media/logic-apps-enterprise-integration-x12/x12-1-5.png)     
4. 在打开的“协议”边栏选项卡中，选择“添加”按钮。  
   ![](./media/logic-apps-enterprise-integration-agreements/agreement-2.png)  
5. 在打开的“协议”边栏选项卡，为协议输入“名称”，然后选择“协议类型”、“主机合作伙伴”、“主机标识”、“来宾合作伙伴”、“来宾标识”。  
   ![](./media/logic-apps-enterprise-integration-x12/x12-1.png)  
6. 设置接收设置属性之后，选择“确定”按钮  
   让我们继续：  
7. 选择“接收设置”以配置通过此协议收到的消息的处理方式。  
8. “接收设置”控件划分为以下部分，包括“标识符”、“确认”、“架构”、“信封”、“控制编号”、“验证”和“内部设置”。 基于你将与之交换消息的合作伙伴与你之间的协议来配置这些属性。 下面是这些控件的视图，请基于你希望此协议如何处理标识和处理传入消息来配置它们：  
   ![](./media/logic-apps-enterprise-integration-x12/x12-2.png)  

![](./media/logic-apps-enterprise-integration-x12/x12-3.png)  

1. 选择“确定”按钮以保存设置。  

### <a name="identifiers"></a>标识符
| 属性 | 说明 |
| --- | --- |
| ISA1 (授权限定符) |从下拉列表中选择授权限定符值。 |
| ISA2 |可选。 输入授权信息值。 如果为 ISA1 输入的值不是 00，请输入最少一个字母数字字符，最多 10 个字符。 |
| ISA3 (安全限定符) |从下拉列表中选择安全限定符值。 |
| ISA4 |可选。 输入安全信息值。 如果为 ISA3 输入的值不是 00，请输入最少一个字母数字字符，最多 10 个字符。 |

### <a name="acknowledgments"></a>致谢
| 属性 | 说明 |
| --- | --- |
| 预期的 TA1 |选中此复选框可向交换发送方返回技术 (TA1) 确认。 这些确认会基于协议的“发送设置”发送给交换发送方。 |
| 预期的 FA |选中此复选框可向交换发送方返回功能 (FA) 确认。 然后基于所使用的架构版本来选择是需要 997 还是 999 确认。 这些确认会基于协议的“发送设置”发送给交换发送方。 |
| 包括 AK2/IK2 循环 |选中此复选框可为接受的事务集在功能确认中启用 AK2 循环的生成。注意：仅当选中了“预期的 FA”复选框时，才会启用此复选框。 |

### <a name="schemas"></a>架构
为每种事务类型 (ST1) 和发送程序应用程序 (GS2) 选择架构。 接收管道会通过将传入消息中 ST1 和 GS2 的值与此处设置的值进行匹配，并将传入消息的架构与此处设置的架构进行匹配，来分解传入消息。

| 属性 | 说明 |
| --- | --- |
| 版本 |选择 X12 版本 |
| 事务类型(ST01) |选择事务类型 |
| 发送程序应用程序(GS02) |选择发送程序应用程序 |
| 架构 |选择要使用的架构文件。 架构文件位于集成帐户中。 |

### <a name="envelopes"></a>信封
| 属性 | 说明 |
| --- | --- |
| ISA11 用法 |使用此字段可在事务集中指定分隔符：</br></br>选择标准标识符可在 EDI 接收管道中使用“.”的十进制符号， 而不是传入文档的十进制符号。</br></br>选择重复分隔符可为简单数据元素或重复数据结构的重复出现指定分隔符。 例如，(^) 通常用作重复分隔符。 对于 HIPAA 架构，只能使用 (^)。 |

### <a name="control-numbers"></a>控制编号
| 属性 | 说明 |
| --- | --- |
| 不允许交换控制编号重复项 |选中此选项可阻止重复交换。 如果选中，则 BizTalk 服务门户会检查收到的交换的交换控制编号 (ISA13) 是否与交换控制编号不匹配。 如果检测到匹配项，则接收管道不处理交换。<br/>如果选择不允许重复的交换控制编号，则可以通过为“每 x 天检查重复的 ISA13”提供适当的值，来指定执行检查的间隔天数。 |
| 不允许组合控制编号重复项 |选中此选项可阻止具有重复组控制编号的交换。 |
| 不允许事务集控制编号重复项 |选中此选项可阻止具有重复事务集控制编号的交换。 |

### <a name="validations"></a>验证
| 属性 | 说明 |
| --- | --- |
| 消息类型 |EDI 消息类型，如“850-采购订单”或“999-实现确认”。 |
| EDI 验证 |按照架构的 EDI 属性、长度限制、空数据元素和尾部分隔符的定义，对数据类型执行 EDI 验证。 |
| 扩展验证 |如果数据类型不是 EDI，则验证会基于数据元素要求，以及允许重复、枚举和数据元素长度验证（最小/最大）。 |
| 允许前导零/尾随零 |保留前导或尾随的任何额外空格和零字符。 不删除它们。 |
| 尾部分隔符策略 |在收到的交换中生成尾部分隔符。 选项包括“禁止”、“可选”和“强制”。 |

### <a name="internal-settings"></a>内部设置
| 属性 | 说明 |
| --- | --- |
| 将隐式小数格式 Nn 转换为十进制数值 |在 BizTalk 服务门户中，在中间 XML 中将使用格式 Nn 指定的 EDI 数字转换为以十进制数值。 |
| 如果允许尾随分隔符，请创建空的 XML 标记 |选中此复选框可使交换发送方包含用于尾随分隔符的空 XML 标记。 |
| 入站批处理 |将交换拆分为事务集 - 出错时挂起事务集：通过向事务集应用相应信封，将交换中的每个事务集分析为单独 XML 文档。 使用此选项时，如果交换中的一个或多个事务集未能通过验证，则 BizTalk 服务只挂起这些事务集。 </br></br>将交换拆分为事务集 - 出错时挂起交换：通过应用相应信封，将交换中的每个事务集分析为单独 XML 文档。 使用此选项时，如果交换中的一个或多个事务集未能通过验证，则 BizTalk 服务会挂起整个交换。</br></br>保留交换 - 出错时挂起事务集：使交换保持不变，从而为整个批处理交换创建 XML 文档。 使用此选项时，如果交换中的一个或多个事务集未能通过验证，则 BizTalk 服务只挂起这些事务集，同时继续处理所有其他事务集。</br></br>保留交换 - 出错时挂起交换：使交换保持不变，从而为整个批处理交换创建 XML 文档。 使用此选项时，如果交换中的一个或多个事务集未能通过验证，则 BizTalk 服务会挂起整个交换。</br></br> |

协议已准备好处理符合所选架构的传入消息。

配置用于处理发送给合作伙伴的消息的设置：  

1. 选择“发送设置”以配置通过此协议发送的消息的处理方式。  

“发送设置”控件划分为以下部分，包括“标识符”、“确认”、“架构”、“信封”、“控制编号”、“字符集和分隔符”和“验证”。 

下面是这些控件的视图。 基于你希望如何处理通过此协议发送给合作伙伴的消息来进行选择：   
![](./media/logic-apps-enterprise-integration-x12/x12-4.png)  

![](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

![](./media/logic-apps-enterprise-integration-x12/x12-6.png)  

1. 选择“确定”按钮以保存设置。  

### <a name="identifiers"></a>标识符
| 属性 | 说明 |
| --- | --- |
| 授权限定符(ISA1) |从下拉列表中选择授权限定符值。 |
| ISA2 |输入授权信息值。 如果此值不是 00，请输入最少一个字母数字字符，最多 10 个字符。 |
| 安全限定符(ISA3) |从下拉列表中选择安全限定符值。 |
| ISA4 |输入安全信息值。 如果对于“值(ISA4)”文本框，此值不是 00，请输入最少一个字母数字值，最多 10 个。 |

### <a name="acknowledgment"></a>确认
| 属性 | 说明 |
| --- | --- |
| 预期的 TA1 |选中此复选框可向交换发送方返回技术 (TA1) 确认。 此设置指定发送消息的主机合作伙伴从协议中的来宾合作伙伴请求确认。 主机合作伙伴基于协议的接收设置需要这些确认。 |
| 预期的 FA |选中此复选框可向交换发送方返回功能 (FA) 确认，然后基于所使用的架构版本来选择是需要 997 还是 999 确认。 主机合作伙伴基于协议的接收设置需要这些确认。 |
| FA 版本 |选择 FA 版本 |

### <a name="schemas"></a>架构
| 属性 | 说明 |
| --- | --- |
| 版本 |选择 X12 版本 |
| 事务类型(ST01) |选择事务类型 |
| 架构 |选择要使用的架构。 架构位于集成帐户中。 若要访问架构，请先将集成帐户链接到逻辑应用。 |

### <a name="envelopes"></a>信封
| 属性 | 说明 |
| --- | --- |
| ISA11 用法 |使用此字段可在事务集中指定分隔符：</br></br>选择标准标识符可在 EDI 接收管道中使用“.”的十进制符号， 而不是传入文档的十进制符号。</br></br>选择重复分隔符可为简单数据元素或重复数据结构的重复出现指定分隔符。 例如，(^) 通常用作重复分隔符。 对于 HIPAA 架构，只能使用 (^)。</br> |
| 重复分隔符 |输入重复分隔符 |
| 控制版本号(ISA12) |选择 BizTalk 服务门户用于生成传出交换的 X12 标准的版本。 |
| 用法指示符(ISA15) |输入交换的上下文是信息 (I)、生产数据 (P) 还是测试数据 (T)。 EDI 接收管道会将此属性提升到上下文。 |
| 架构 |可以输入 BizTalk 服务门户为发送到发送管道的 X12 编码交换生成 GS 和 ST 段的方式。</br></br>可以将 GS1、GS2、GS3、GS4、GS5、GS7 和 GS8 数据元素值与事务类型和版本/发行版数据元素的值相关联。 BizTalk 服务门户确定 XML 消息在网格的一行中为事务类型和版本/发行版元素设置了值时，它会使用来自网格的同一行的值填充传出交换信封中的 GS1、GS2、GS3、GS4、GS5、GS7 和 GS8 数据元素。 事务类型和版本/发行版元素的值必须是唯一的。</br></br>可选。 对于 GS1，从下拉列表中为功能代码选择值。</br></br>必需。 对于 GS2，为应用程序发送方输入包含最少两个字符且最多 15 个字符的字母数字值。</br></br>必需。 对于 GS3，为应用程序接收方输入包含最少两个字符且最多 15 个字符的字母数字值。</br></br>可选。 对于 GS4，选择 CCYYMMDD 或 YYMMDD。</br></br>可选。 对于 GS5，选择 HHMM、HHMMSS 或 HHMMSSdd。</br></br>可选。 对于 GS7，从下拉列表中为负责代理选择值。</br></br>可选。 对于 GS8，为标识的文档输入包含最少一个字符且最多 12 个字符的字母数字值。</br></br>**注意**：如果同一行中的事务类型和版本/发行版元素是与交换关联的对象的匹配项，则这些是 BizTalk 服务门户在构建的交换的 GS 字段中输入的值。 |

### <a name="control-numbers"></a>控制编号
| 属性 | 说明 |
| --- | --- |
| 交换控制编号(ISA13) |必需。 为 BizTalk 服务门户用于生成传出交换的交换控制编号输入值范围。 输入最小值 1 且最大值为 999999999 的数值。 |
| 组控制编号(GS06) |必需。 输入 BizTalk 服务门户应该用于组控制编号的数字的范围。 输入包含最少一个字符且最多九个字符的数值。 |
| 事务集控制编号(ST02) |对于事务集控制编号 (ST02)，为必需的中间字段输入数值的范围，并为可选的前缀和后缀输入字母数字值。 所有四个字段的最大长度是九个字符。 |
| 前缀 |若要指定确认中使用的事务集控制编号的范围，请在“ACK 控制编号(ST02)”字段中输入值。 为中间两个字段输入数值，并为前缀和后缀字段输入字母数字值（如果需要）。 中间字段是必需的，包含控制编号的最小和最大值；前缀和后缀是可选的。 所有三个字段的最大长度是九个字符。 |
| 后缀 |若要指定确认中使用的事务集控制编号的范围，请在“ACK 控制编号(ST02)”字段中输入值。 为中间两个字段输入数值，并为前缀和后缀字段输入字母数字值（如果需要）。 中间字段是必需的，包含控制编号的最小和最大值；前缀和后缀是可选的。 所有三个字段的最大长度是九个字符。 |

### <a name="character-sets-and-separators"></a>字符集和分隔符
除了字符集，可以输入要用于每种消息类型的不同分隔符集。 如果没有为给定消息架构指定字符集，则使用默认字符集。

| 属性 | 说明 |
| --- | --- |
| 要使用的字符集 |选择 X12 字符集以验证为协议输入的属性。</br></br>**注意**：BizTalk 服务门户仅使用此设置验证为相关协议属性输入的值。 接收管道或发送管道在执行运行时处理时会忽略此字符集属性。 |
| 架构 |选择 (+) 符号，然后从下拉列表中选择架构。 对于所选架构，选择要使用的分隔符集：</br></br>组件元素分隔符 – 输入单个字符以分隔复合数据元素。</br></br>数据元素分隔符 – 输入单个字符以分隔复合数据元素中的简单数据元素。</br></br></br></br>替换字符 – 如果有效负载数据包含还用作数据、段或组件分隔符的字符，则选中此复选框。 随后可以输入替换字符。 生成出站 X12 消息时，有效负载数据中分隔符的所有实例都会替换为指定字符。</br></br>段终止符 – 输入单个字符以指示 EDI 段的结尾。</br></br>后缀 – 选择与段标识符一起使用的字符。 如果指定了后缀，则段终止符数据元素可以为空。 如果段终止符保留为空，则必须指定后缀。 |

### <a name="validation"></a>验证
| 属性 | 说明 |
| --- | --- |
| 消息类型 |选择此选项可对交换接收方启用验证。 此验证对事务集数据元素执行 EDI 验证，会验证数据类型、长度限制以及空数据元素和尾部分隔符。 |
| EDI 验证 | |
| 扩展验证 |选择此选项可启用从交换发送方接收的交换的扩展验证。 这包括验证字段长度、可选性和重复次数的验证以及 XSD 数据类型验证。 可以在未启用 EDI 验证的情况下启用扩展验证，反之亦然。 |
| 允许前导零/尾随零 |选择此选项可指定，如果 EDI 交换中的数据元素由于尾随空格而不符合其长度要求，但是在删除它们之后会符合其长度要求，则从某方收到的 EDI 交换会通过验证。 |
| 尾部分隔符 |选择此选项可指定，如果 EDI 交换中的数据元素由于前导（或尾随）零或尾随空格而不符合其长度要求，但是在删除它们之后会符合其长度要求，则从某方收到的 EDI 交换会通过验证。</br></br>如果不希望在从交换发送方接收的交换中允许尾部分隔符，则选择“不允许”。 如果交换包含尾部分隔符，则会将它声明为无效。</br></br>选择“可选”可接受包含或不包含尾部分隔符的交换。</br></br>如果收到的交换必须包含尾部分隔符，则选择“强制”。 |

在打开的边栏选项卡上选择“确定”之后：  

1. 在“集成帐户”边栏选项卡上选择“协议”磁贴，会看到列出新添加的协议。  
   ![](./media/logic-apps-enterprise-integration-x12/x12-7.png)   

## <a name="learn-more"></a>了解详细信息
* [了解有关 Enterprise Integration Pack 的详细信息](../logic-apps/logic-apps-enterprise-integration-overview.md "了解 Enterprise Integration Pack")  




<!--HONumber=Jan17_HO3-->


