<properties
   pageTitle="SQL 数据仓库服务特征 | Microsoft Azure"
   description="SQL 数据仓库的连接、查询、Transact-SQL DDL 和 DML，以及系统视图的最大值。"
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="barbkess"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.date="02/11/2016"
   wacn.date=""/>

# SQL 数据仓库服务特征

这些特征包括 Azure SQL 数据仓库已建立的一些最大值，这些最大值可支持大部分所需的分析工作负荷，以及可同时确保每个单独查询具有获取最佳性能所需的资源。

## 连接

| 类别 | 说明 | 最大值 |
| :---------------- | :------------------------------------------- | :----------------- |
| 会话 | 并发打开的会话 | 1024<br/><br/>我们支持 1024 个并发连接，并且可以将所有并发连接请求提交到数据仓库。请注意，可并发执行的查询数量是有限制的。当超出限制时，请求进入内部队列等待处理。|
| 会话 | 预处理语句的最大内存 | 20 MB |
| 登录 | 每个 SQL 服务器的登录用户数。 | 500,000 |


## 查询处理

| 类别 | 说明 | 最大值 |
| :---------------- | :------------------------------------------- | :----------------- |
| 查询 | 用户表的并发查询数。 | 32<br/><br/>其他查询将转到内部队列等待处理。无论同时执行的查询数量有多少，都会优化每个查询来充分利用大规模并行处理的体系结构。|
| 查询 | 用户表的排队查询数。 | 1000 |
| 查询 | 系统视图的并发查询数。 | 100 |
| 查询 | 系统视图的排队查询数。 | 1000 |
| 查询 | 最大值参数 | 2098 |
| 批处理 | 最大大小 | 65,536*4096 |


## 数据定义语言 (DDL)

| 类别 | 说明 | 最大值 |
| :---------------- | :------------------------------------------- | :----------------- |
| 表 | 每个数据库的表数 | 20 亿 |
| 表 | 每个表的列数 | 1024 个列 |
| 表 | 每个列的字节数 | 8000 字节 |
| 表 | 每行的字节数，定义的大小 | 8060 字节<br/><br/>每行字节数的计算方式与 SQL Server 的页面压缩计算方式相同。此值不能超过 8060 字节。要估计行大小，请参阅 MSDN 上的[估计聚集索引的大小](https://msdn.microsoft.com/library/ms178085.aspx)中的行大小计算。<br/><br/>有关 SQL 数据仓库的数据类型大小的列表，请参阅 [CREATE TABLE（Azure SQL 数据仓库）](https://msdn.microsoft.com/library/mt203953.aspx)。 |
| 表 | 每个表的分区数 | 15,000<br/><br/>为了实现高性能，我们建议在满足你的业务需求的情况下尽量减少所需的分区数。随着分区数目的增长，DDL 和 DML 操作的开销也增长，并导致性能下降。|
| 表 | 每个分区边界值的字符数。| 4000 |
| 索引 | 每个表的非聚集索引数。 | 999<br/><br/>仅适用于行存储表。|
| 索引 | 每个表的聚集索引数。 | 1<br><br/>适用于行存储和列存储表。|
| 索引 | 列存储索引行组中的行数 | 1,024<br/><br/>将每个列存储索引实现为多个列存储索引。请注意，如果在 SQL 数据仓库列存储索引中插入 1,024 行，那么这些行并不都在同一行组。|
| 索引 | 聚集列存储索引的并发生成数。 | 32<br/><br/>当所有聚集列存储索引均在不同表中生成时适用。每个表只允许 1 个聚集列存储索引生成。其他请求将在队列中等待。|
| 索引 | 索引键大小。 | 900 字节。<br/><br/>仅适用于行存储索引。<br/><br/>如果创建索引时列中的现有数据未超过 900 字节，那么可以创建最大值超过 900 字节的 varchar 列上的索引。但是，以后导致总大小超过 900 字节的对列的 INSERT 或 UPDATE 操作将失败。|
| 索引 | 每个索引的键列数。 | 16<br/><br/>仅适用于行存储索引。聚集列存储索引包括所有列。|
| 统计信息 | 组合的列值的大小。 | 900 字节。 |
| 统计信息 | 每个统计对象的列数。 | 32 |
| 统计信息 | 每个表的列上创建的统计信息条数。 | 30,000 |
| 存储过程 | 最大嵌套级数。 | 8 |
| 查看 | 每个视图的列数 | 1,024 |


## 数据操作语言 (DML)

| 类别 | 说明 | 最大值 |
| :---------------- | :------------------------------------------- | :----------------- |
| SELECT 结果 | 每个行的列数 | 4096<br/><br/>在 SELECT 结果中每行的列数始终不得超过 4096。无法保证最大值始终为 4096。如果查询计划需要一个临时表，那么将应用每个表最多 1024 列的最大值。|
| SELECT 结果 | 每行的字节数 | > 8060<br/><br/>SELECT 结果中每行的字节数可以超过表行所允许的最大值 8060 字节。如果 SELECT 语句的查询计划需要一个临时表，那么将应用 8060 字节的表行最大值。|
| SELECT 结果 | 每个列的字节数 | > 8000<br/><br/>SELECT 结果中每列的字节数可以超过表列所允许的最大值 8000 字节。如果 SELECT 语句的查询计划需要一个临时表，那么将应用 8000 字节的表列最大值。|
| SELECT | 嵌套子查询 | 32<br/><br/>在 SELECT 语句中的嵌套子查询数始终不得超过 32 个。无法保证最大值始终为 32 个。例如，JOIN 可以将子查询引入查询计划。还可以通过可用内存来限制子查询的数量。|
| SELECT | 每个 JOIN 的列数 | 1024 列<br/><br/>JOIN 中的列数始终不得超过 1024。无法保证最大值始终为 1024。如果 JOIN 计划需要列数多于 JOIN 结果的临时表，那么将 1024 限制应用于此临时表。 |
| SELECT | 每个 GROUP BY 列的字节数。 | 8060<br/><br/>GROUP BY 子句中的列的字节数最大为 8060 字节。|
| SELECT | 每个 ORDER BY 列的字节数 | 8060 字节。<br/><br/>ORDER BY 子句中的列的字节数最大为 8060 字节。|
| INSERT | 每列字节数，固定和可变宽度。 | 8000 字节。试图为列插入超出定义的字节数将导致错误。|
| INSERT | 每行字节数，可变宽度列。 | >8060 字节。超过 8060 字节的数据将置于溢出存储区中。|
| UPDATE | 每列字节数，固定和可变宽度。 | 8000 字节。试图将列更新到一个值，如果此值需要的字节数超出了为此列定义的字节数，则将导致错误。|
| 每个语句的标识符和常量数 | 被引用的标识符和常量的数量。 | 65,535<br/><br/>SQL 数据仓库限制一条查询的单个表达式中可包含的标识符和常量数。此限制为 65,535。超过此数字将导致 SQL Server 错误 8632。有关详细信息，请参阅[内部错误：已达到表达式服务限制](http://support.microsoft.com/kb/913050/)。|

## 系统视图

| 系统视图 | 最大行数 |
| :--------------------------------- | :------------|
| sys.dm\_pdw\_component\_health\_alerts | 10,000 |
| sys.dm\_pdw\_dms\_cores | 100 |
| sys.dm\_pdw\_dms\_workers | 最近 1000 个 SQL 请求的 DMS 辅助角色的总数。 |
| sys.dm\_pdw\_dms\_worker\_pairs | 10,000 |
| sys.dm\_pdw\_errors | 10,000 |
| sys.dm\_pdw\_exec\_requests | 10,000 |
| sys.dm\_pdw\_exec\_sessions | 10,000 |
| sys.dm\_pdw\_request\_steps | sys.dm\_pdw\_exec\_requests 中存储的最近 1000 个 SQL 请求的步骤总数。 |
| sys.dm\_pdw\_os\_event\_logs | 10,000 |
| sys.dm\_pdw\_sql\_requests | sys.dm\_pdw\_exec\_requests 中存储的最近 1000 个 SQL 请求。 |

## 后续步骤
有关更多参考信息，请参阅 [SQL 数据仓库参考概述][]。

<!--Image references-->

<!--Article references-->
[SQL 数据仓库参考概述]: /documentation/articles/sql-data-warehouse-overview-reference

<!--MSDN references-->

<!---HONumber=Mooncake_0307_2016-->