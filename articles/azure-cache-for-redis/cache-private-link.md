---
title: '适用于 Redis 的 azure Cache 与 Azure Private Link (预览版) '
description: Azure 专用终结点是一个网络接口，该接口将你私下并安全地连接到 Azure 缓存，以供 Azure 专用链接提供支持的 Redis。 在本文中，你将了解如何使用 Azure 门户创建 Azure 缓存、Azure 虚拟网络和专用终结点。
author: curib
ms.author: cauribeg
ms.service: cache
ms.topic: conceptual
ms.date: 09/22/2020
ms.openlocfilehash: 1bf204cb1eddb86daee604f791601bbf44884d50
ms.sourcegitcommit: a0c4499034c405ebc576e5e9ebd65084176e51e4
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/29/2020
ms.locfileid: "91460061"
---
# <a name="azure-cache-for-redis-with-azure-private-link-public-preview"></a>适用于 Redis 的 azure Cache for Azure Private Link (公共预览版) 
在本文中，你将了解如何使用 Azure 门户通过专用终结点为 Redis 实例创建虚拟网络和 Azure Cache。 你还将了解如何将专用终结点添加到现有 Azure Cache for Redis 实例。

Azure 专用终结点是一个网络接口，该接口将你私下并安全地连接到 Azure 缓存，以供 Azure 专用链接提供支持的 Redis。 

## <a name="prerequisites"></a>先决条件
* Azure 订阅- [免费创建一个](https://azure.microsoft.com/free/)

> [!NOTE]
> 此功能目前在公共预览版中适用于有限区域。 如果你没有创建专用终结点的[选项，请联系我们。](mailto:azurecache@microsoft.com) 若要使用专用终结点，需要在2020年7月28日后创建用于 Redis 的 Azure 缓存实例。
>
> 具有公共预览版访问权限的区域当前：美国中部、美国中北部、美国西部、美国西部2、美国东部、美国东部2、挪威东部、挪威西部、欧洲北部、欧洲西部、亚洲东部、日本东部、瑞士北部、印度中部、阿拉伯联合酋长国中部、韩国中部、英国南部、南非北部、美国中部、美国东部、加拿大中部、美国东部、美国东部、澳大利亚德国北部东部、美国东部和巴西南部。
>

## <a name="create-a-private-endpoint-with-a-new-azure-cache-for-redis-instance"></a>使用新的 Azure Cache for Redis 实例创建专用终结点 

在本部分中，将使用专用终结点为 Redis 实例创建新的 Azure Cache。

### <a name="create-a-virtual-network"></a>创建虚拟网络 

1. 登录到 [Azure 门户](https://portal.azure.com) ，然后选择 " **创建资源**"。

    :::image type="content" source="media/cache-private-link/1-create-resource.png" alt-text="选择 &quot;创建资源&quot;。&quot;:::

2. 在 &quot; **新建** &quot; 页上，选择 &quot; **网络** &quot;，然后选择 &quot; **虚拟网络**&quot;。

3. 选择 &quot; **添加** &quot; 以创建虚拟网络。

4. 在“创建虚拟网络”  的“基本信息”选项卡中输入或选择以下信息  ：

   | 设置      | 建议的值  | 说明 |
   | ------------ |  ------- | -------------------------------------------------- |
   | **订阅** | 单击下拉箭头并选择你的订阅。 | 要在其下创建此虚拟网络的订阅。 | 
   | **资源组** | 单击下拉箭头并选择一个资源组，或者选择“新建”并输入新的资源组名称。 | 要在其中创建虚拟网络和其他资源的资源组的名称。 将所有应用资源放入一个资源组可以轻松地统一管理或删除这些资源。 | 
   | **名称** | 输入虚拟网络名称。 | 名称必须以字母或数字开头，以字母、数字或下划线结尾，并且只能包含字母、数字、下划线、句点或连字符。 | 
   | **区域** | 下拉，然后选择一个区域。 | 选择其他要使用虚拟网络的服务附近的 [区域](https://azure.microsoft.com/regions/) 。 |

5. 选择 &quot; **Ip 地址** &quot; 选项卡，或单击页面底部的 &quot; **下一步： ip 地址** &quot; 按钮。

6. 在 &quot; **IP 地址** &quot; 选项卡中，将 **IPv4 地址空间** 指定为 CIDR 表示法中的一个或多个地址前缀 (例如 192.168.1.0/24) 。

7. 在 &quot; **子网名称**&quot; 下，单击 &quot; **默认** &quot; 以编辑子网的属性。

8. 在 &quot; **编辑子网** &quot; 窗格中，指定 **子网名称** 和 **子网地址范围**。 子网的地址范围应为 CIDR 表示法 (例如 192.168.1.0/24) 。 它必须包含在虚拟网络的地址空间中。

9. 选择“保存”。

10. 选择 &quot; **查看** &quot; 和 &quot;创建&quot; 选项卡，或者单击 &quot; **查看 + 创建** &quot; 按钮。

11. 验证所有信息都正确，然后单击 &quot; **创建** " 以预配虚拟网络。

### <a name="create-an-azure-cache-for-redis-instance-with-a-private-endpoint"></a>使用专用终结点为 Redis 实例创建 Azure 缓存
若要创建缓存实例，请按照以下步骤操作。

1. 返回 Azure 门户主页，或打开 "侧栏" 菜单，然后选择 " **创建资源**"。 
   
1. 在“新建”页上选择“数据库”，然后选择“Azure Cache for Redis”。

    :::image type="content" source="media/cache-private-link/2-select-cache.png" alt-text="选择 &quot;创建资源&quot;。&quot;:::

2. 在 &quot; **新建** &quot; 页上，选择 &quot; **网络** &quot;，然后选择 &quot; **虚拟网络**&quot;。

3. 选择 &quot; **添加** &quot; 以创建虚拟网络。

4. 在“创建虚拟网络”  的“基本信息”选项卡中输入或选择以下信息  ：

   | 设置      | 建议的值  | 说明 |
   | ------------ |  ------- | -------------------------------------------------- |
   | **订阅** | 单击下拉箭头并选择你的订阅。 | 要在其下创建此虚拟网络的订阅。 | 
   | **资源组** | 单击下拉箭头并选择一个资源组，或者选择“新建”并输入新的资源组名称。 | 要在其中创建虚拟网络和其他资源的资源组的名称。 将所有应用资源放入一个资源组可以轻松地统一管理或删除这些资源。 | 
   | **名称** | 输入虚拟网络名称。 | 名称必须以字母或数字开头，以字母、数字或下划线结尾，并且只能包含字母、数字、下划线、句点或连字符。 | 
   | **区域** | 下拉，然后选择一个区域。 | 选择其他要使用虚拟网络的服务附近的 [区域](https://azure.microsoft.com/regions/) 。 |

5. 选择 &quot; **Ip 地址** &quot; 选项卡，或单击页面底部的 &quot; **下一步： ip 地址** &quot; 按钮。

6. 在 &quot; **IP 地址** &quot; 选项卡中，将 **IPv4 地址空间** 指定为 CIDR 表示法中的一个或多个地址前缀 (例如 192.168.1.0/24) 。

7. 在 &quot; **子网名称**&quot; 下，单击 &quot; **默认** &quot; 以编辑子网的属性。

8. 在 &quot; **编辑子网** &quot; 窗格中，指定 **子网名称** 和 **子网地址范围**。 子网的地址范围应为 CIDR 表示法 (例如 192.168.1.0/24) 。 它必须包含在虚拟网络的地址空间中。

9. 选择“保存”。

10. 选择 &quot; **查看** &quot; 和 &quot;创建&quot; 选项卡，或者单击 &quot; **查看 + 创建** &quot; 按钮。

11. 验证所有信息都正确，然后单击 &quot; **创建** " 按钮创建专用终结点。

    :::image type="content" source="media/cache-private-link/3-add-private-endpoint.png" alt-text="选择 &quot;创建资源&quot;。&quot;:::

2. 在 &quot; **新建** &quot; 页上，选择 &quot; **网络** &quot;，然后选择 &quot; **虚拟网络**&quot;。

3. 选择 &quot; **添加** &quot; 以创建虚拟网络。

4. 在“创建虚拟网络”  的“基本信息”选项卡中输入或选择以下信息  ：

   | 设置      | 建议的值  | 说明 |
   | ------------ |  ------- | -------------------------------------------------- |
   | **订阅** | 单击下拉箭头并选择你的订阅。 | 要在其下创建此虚拟网络的订阅。 | 
   | **资源组** | 单击下拉箭头并选择一个资源组，或者选择“新建”并输入新的资源组名称。 | 要在其中创建虚拟网络和其他资源的资源组的名称。 将所有应用资源放入一个资源组可以轻松地统一管理或删除这些资源。 | 
   | **名称** | 输入虚拟网络名称。 | 名称必须以字母或数字开头，以字母、数字或下划线结尾，并且只能包含字母、数字、下划线、句点或连字符。 | 
   | **区域** | 下拉，然后选择一个区域。 | 选择其他要使用虚拟网络的服务附近的 [区域](https://azure.microsoft.com/regions/) 。 |

5. 选择 &quot; **Ip 地址** &quot; 选项卡，或单击页面底部的 &quot; **下一步： ip 地址** &quot; 按钮。

6. 在 &quot; **IP 地址** &quot; 选项卡中，将 **IPv4 地址空间** 指定为 CIDR 表示法中的一个或多个地址前缀 (例如 192.168.1.0/24) 。

7. 在 &quot; **子网名称**&quot; 下，单击 &quot; **默认** &quot; 以编辑子网的属性。

8. 在 &quot; **编辑子网** &quot; 窗格中，指定 **子网名称** 和 **子网地址范围**。 子网的地址范围应为 CIDR 表示法 (例如 192.168.1.0/24) 。 它必须包含在虚拟网络的地址空间中。

9. 选择“保存”。

10. 选择 &quot; **查看** &quot; 和 &quot;创建&quot; 选项卡，或者单击 &quot; **查看 + 创建** &quot; 按钮。

11. 验证所有信息都正确，然后单击 &quot; **创建** " 时，可以使用缓存。 
    

## <a name="create-a-private-endpoint-with-an-existing-azure-cache-for-redis-instance"></a>使用现有的 Redis 实例的 Azure 缓存创建专用终结点 

在本部分中，你将向 Redis 实例的现有 Azure 缓存添加专用终结点。 

### <a name="create-a-virtual-network"></a>创建虚拟网络 
若要创建虚拟网络，请执行以下步骤。

1. 登录到 [Azure 门户](https://portal.azure.com) ，然后选择 " **创建资源**"。

2. 在 " **新建** " 页上，选择 " **网络** "，然后选择 " **虚拟网络**"。

3. 选择 " **添加** " 以创建虚拟网络。

4. 在“创建虚拟网络”  的“基本信息”选项卡中输入或选择以下信息  ：

   | 设置      | 建议的值  | 说明 |
   | ------------ |  ------- | -------------------------------------------------- |
   | **订阅** | 单击下拉箭头并选择你的订阅。 | 要在其下创建此虚拟网络的订阅。 | 
   | **资源组** | 单击下拉箭头并选择一个资源组，或者选择“新建”并输入新的资源组名称。 | 要在其中创建虚拟网络和其他资源的资源组的名称。 将所有应用资源放入一个资源组可以轻松地统一管理或删除这些资源。 | 
   | **名称** | 输入虚拟网络名称。 | 名称必须以字母或数字开头，以字母、数字或下划线结尾，并且只能包含字母、数字、下划线、句点或连字符。 | 
   | **区域** | 下拉，然后选择一个区域。 | 选择其他要使用虚拟网络的服务附近的 [区域](https://azure.microsoft.com/regions/) 。 |

5. 选择 " **Ip 地址** " 选项卡，或单击页面底部的 " **下一步： ip 地址** " 按钮。

6. 在 " **IP 地址** " 选项卡中，将 **IPv4 地址空间** 指定为 CIDR 表示法中的一个或多个地址前缀 (例如 192.168.1.0/24) 。

7. 在 " **子网名称**" 下，单击 " **默认** " 以编辑子网的属性。

8. 在 " **编辑子网** " 窗格中，指定 **子网名称** 和 **子网地址范围**。 子网的地址范围应为 CIDR 表示法 (例如 192.168.1.0/24) 。 它必须包含在虚拟网络的地址空间中。

9. 选择“保存”。

10. 选择 " **查看** " 和 "创建" 选项卡，或者单击 " **查看 + 创建** " 按钮。

11. 验证所有信息都正确，然后单击 " **创建** " 以预配虚拟网络。

### <a name="create-a-private-endpoint"></a>创建专用终结点 

若要创建专用终结点，请执行以下步骤。

1. 在 Azure 门户中，搜索 **Redis 的 Azure Cache** ，并按 enter 或从搜索建议中选择它。

    :::image type="content" source="media/cache-private-link/4-search-for-cache.png" alt-text="选择 &quot;创建资源&quot;。&quot;:::

2. 在 &quot; **新建** &quot; 页上，选择 &quot; **网络** &quot;，然后选择 &quot; **虚拟网络**&quot;。

3. 选择 &quot; **添加** &quot; 以创建虚拟网络。

4. 在“创建虚拟网络”  的“基本信息”选项卡中输入或选择以下信息  ：

   | 设置      | 建议的值  | 说明 |
   | ------------ |  ------- | -------------------------------------------------- |
   | **订阅** | 单击下拉箭头并选择你的订阅。 | 要在其下创建此虚拟网络的订阅。 | 
   | **资源组** | 单击下拉箭头并选择一个资源组，或者选择“新建”并输入新的资源组名称。 | 要在其中创建虚拟网络和其他资源的资源组的名称。 将所有应用资源放入一个资源组可以轻松地统一管理或删除这些资源。 | 
   | **名称** | 输入虚拟网络名称。 | 名称必须以字母或数字开头，以字母、数字或下划线结尾，并且只能包含字母、数字、下划线、句点或连字符。 | 
   | **区域** | 下拉，然后选择一个区域。 | 选择其他要使用虚拟网络的服务附近的 [区域](https://azure.microsoft.com/regions/) 。 |

5. 选择 &quot; **Ip 地址** &quot; 选项卡，或单击页面底部的 &quot; **下一步： ip 地址** &quot; 按钮。

6. 在 &quot; **IP 地址** &quot; 选项卡中，将 **IPv4 地址空间** 指定为 CIDR 表示法中的一个或多个地址前缀 (例如 192.168.1.0/24) 。

7. 在 &quot; **子网名称**&quot; 下，单击 &quot; **默认** &quot; 以编辑子网的属性。

8. 在 &quot; **编辑子网** &quot; 窗格中，指定 **子网名称** 和 **子网地址范围**。 子网的地址范围应为 CIDR 表示法 (例如 192.168.1.0/24) 。 它必须包含在虚拟网络的地址空间中。

9. 选择“保存”。

10. 选择 &quot; **查看** &quot; 和 &quot;创建&quot; 选项卡，或者单击 &quot; **查看 + 创建** &quot; 按钮。

11. 验证所有信息都正确，然后单击 &quot; **创建** " 按钮以创建专用终结点。

    :::image type="content" source="media/cache-private-link/5-add-private-endpoint.png" alt-text="选择 &quot;创建资源&quot;。&quot;:::

2. 在 &quot; **新建** &quot; 页上，选择 &quot; **网络** &quot;，然后选择 &quot; **虚拟网络**&quot;。

3. 选择 &quot; **添加** &quot; 以创建虚拟网络。

4. 在“创建虚拟网络”  的“基本信息”选项卡中输入或选择以下信息  ：

   | 设置      | 建议的值  | 说明 |
   | ------------ |  ------- | -------------------------------------------------- |
   | **订阅** | 单击下拉箭头并选择你的订阅。 | 要在其下创建此虚拟网络的订阅。 | 
   | **资源组** | 单击下拉箭头并选择一个资源组，或者选择“新建”并输入新的资源组名称。 | 要在其中创建虚拟网络和其他资源的资源组的名称。 将所有应用资源放入一个资源组可以轻松地统一管理或删除这些资源。 | 
   | **名称** | 输入虚拟网络名称。 | 名称必须以字母或数字开头，以字母、数字或下划线结尾，并且只能包含字母、数字、下划线、句点或连字符。 | 
   | **区域** | 下拉，然后选择一个区域。 | 选择其他要使用虚拟网络的服务附近的 [区域](https://azure.microsoft.com/regions/) 。 |

5. 选择 &quot; **Ip 地址** &quot; 选项卡，或单击页面底部的 &quot; **下一步： ip 地址** &quot; 按钮。

6. 在 &quot; **IP 地址** &quot; 选项卡中，将 **IPv4 地址空间** 指定为 CIDR 表示法中的一个或多个地址前缀 (例如 192.168.1.0/24) 。

7. 在 &quot; **子网名称**&quot; 下，单击 &quot; **默认** &quot; 以编辑子网的属性。

8. 在 &quot; **编辑子网** &quot; 窗格中，指定 **子网名称** 和 **子网地址范围**。 子网的地址范围应为 CIDR 表示法 (例如 192.168.1.0/24) 。 它必须包含在虚拟网络的地址空间中。

9. 选择“保存”。

10. 选择 &quot; **查看** &quot; 和 &quot;创建&quot; 选项卡，或者单击 &quot; **查看 + 创建** &quot; 按钮。

11. 验证所有信息都正确，然后单击 &quot; **创建** " **创建**"。


## <a name="next-steps"></a>后续步骤

若要了解有关 Azure 专用链接的详细信息，请参阅 [Azure 专用链接文档](https://docs.microsoft.com/azure/private-link/private-link-overview)。 

